{"version":3,"sources":["webpack://NPlayer/webpack/universalModuleDefinition","webpack://NPlayer/./packages/nplayer/src/scss/index.scss","webpack://NPlayer/./node_modules/css-loader/dist/runtime/api.js","webpack://NPlayer/./packages/nplayer/src/scss/index.scss?8615","webpack://NPlayer/webpack/bootstrap","webpack://NPlayer/webpack/runtime/compat get default export","webpack://NPlayer/webpack/runtime/define property getters","webpack://NPlayer/webpack/runtime/hasOwnProperty shorthand","webpack://NPlayer/webpack/runtime/make namespace object","webpack://NPlayer/./packages/nplayer/src/ts/constants.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/env.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/dom.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/is.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/drag.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/rect.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/emitter.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/component.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/patch.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/tooltip/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/spacer.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/loading/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/contextmenu/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/toast/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/features/fullscreen.ts","webpack://NPlayer/./packages/nplayer/src/ts/features/web-fullscreen.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/popover/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/switch/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/features/i18n.ts","webpack://NPlayer/./packages/nplayer/src/ts/features/icons.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/setting.ts","webpack://NPlayer/./packages/nplayer/src/ts/features/shortcut.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/play.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/volume.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/time.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/web-fullscreen.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/fullscreen.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/airplay.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/progress/thumbnail.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/progress/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/helper.ts","webpack://NPlayer/./packages/nplayer/src/ts/contextmenu-items/loop.ts","webpack://NPlayer/./packages/nplayer/src/ts/contextmenu-items/pip.ts","webpack://NPlayer/./packages/nplayer/src/ts/contextmenu-items/version.ts","webpack://NPlayer/./packages/nplayer/src/ts/setting-items/speed.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/checkbox/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/slider/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/poster/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/features/touch.ts","webpack://NPlayer/./packages/nplayer/src/ts/player.ts","webpack://NPlayer/./packages/nplayer/src/ts/options.ts"],"names":["root","factory","exports","module","define","amd","this","___CSS_LOADER_EXPORT___","i","push","id","cssWithMappingToString","list","toString","map","item","content","concat","join","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","el","window","document","style","__esModule","default","css","create","createElement","setAttribute","textContent","styleSheet","cssText","head","appendChild","insert","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","CLASS_PREFIX","CLASS_PLAYER","EVENT","ENTER_FULLSCREEN","EXIT_FULLSCREEN","WEB_ENTER_FULLSCREEN","WEB_EXIT_FULLSCREEN","DURATION_CHANGE","RATE_CHANGE","AFTER_INIT","PLAY","PAUSE","ENDED","WAITING","STALLED","CANPLAY","LOADED_METADATA","ERROR","SEEKED","TIME_UPDATE","VOLUME_CHANGE","PROGRESS","ENTER_PIP","EXIT_PIP","LOADING_SHOW","LOADING_HIDE","MOUNTED","UPDATE_SIZE","BEFORE_DISPOSE","UPDATE_OPTIONS","OPEN_EDGE","CONTROL_SHOW","CONTROL_HIDE","CONTROL_ITEM_UPDATE","BP_CHANGE","isBrowser","isIOS","test","navigator","platform","isIE","userAgent","isWin10IE","indexOf","SELECTOR_REGEX","$","desc","attrs","children","classPrefix","match","exec","className","replace","trim","keys","forEach","name","isString","innerHTML","c","getEl","querySelector","removeNode","node","remove","parentNode","removeChild","display","dom","cls","prefix","classList","split","add","oldCls","baseVal","containClass","contains","toggleClass","force","toggle","svgNS","createSvg","viewBox","svg","createElementNS","path","setAttributeNS","getEventPath","ev","composedPath","thirdOptsSupported","options","addEventListener","e","DomListener","type","handler","removeEventListener","measureElementSize","clone","cloneNode","position","opacity","removeAttribute","parent","body","rect","getBoundingClientRect","Drag","start","move","end","pending","downHandler","preventDefault","setPointerCapture","pointerId","moveHandler","lastEv","requestAnimationFrame","handlerMove","upHandler","releasePointerCapture","Rect","player","update","on","tryUpdate","width","height","left","top","v","off","String","isFunction","EE","fn","context","once","EventEmitter","_events","_eventsCount","evt","a1","a2","a3","a4","a5","args","listeners","len","arguments","Array","apply","j","TypeError","listener","dispose","bind","event","clearEvent","events","container","assign","isSameNode","b","unmount","unmountNode","mountOrMove","anchor","op","insertBefore","lis","arr","p","m","lo","hi","mid","last","l","propMap","checked","muted","multiple","selected","setAttr","patchProps","prevProps","nextProps","prev","next","k","prevStyle","nextStyle","patchStyles","clamp","lower","upper","Math","max","min","disposableMap","Map","addDisposable","disposable","has","set","delete","addDisposableListener","domListener","throttle","ctx","first","padStart","str","formatTime","seconds","isFinite","round","floor","internalUtils","addClass","classLeft","classRight","classBottom","Tooltip","html","spacerControlItem","ControlBar","items","prevItems","spacer","initControlItem","tooltip","getItem","mounted","resetPos","setBottom","tip","init","onHideControlItem","hide","frag","createDocumentFragment","updateTooltipPos","getControlItem","isSupport","setLeft","setRight","nextItems","prevNodes","nextNodes","prevEnd","nextEnd","startIndex","prevNode","nextNode","mount","toPatch","idMap","moved","prevPos","nextIndex","incSeq","patch","emit","classHide","classBgHide","classBarHide","Control","delayHidTime","latch","controlBars","emitAndUpdateBp","matched","controls","find","bp","currentBp","opts","updateItems","show","bgElement","cursor","showTransient","clearTimeout","showTimer","setTimeout","tryHide","video","played","paused","bpControls","Number","sort","isTouch","toFilter","filter","index","curBar","barItems","getItems","bar","setItems","filterItems","classLoading","Loading","loadingElement","t","ret","repeatStr","startWaitingTime","_checkCanplay","currentTime","tryShow","curTime","eachBuffer","checkCanplay","ContextMenu","showed","contextMenuToggle","renderItems","stopPropagation","x","y","innerWidth","innerHeight","clientX","clientY","applyStyle","invisible","disabled","click","getDomNodes","ToastItem","timer","Toast","toasts","timeout","toastItem","close","CLASS_FULL","Fullscreen","getPrefix","isActive","exit","enter","removeClass","disableDblclick","setTarget","enableDblclick","exitFullscreen","HTMLElement","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","HTMLDocument","webkitExitFullscreen","cancelFullScreen","mozCancelFullScreen","msExitFullscreen","fullscreenElement","mozFullScreenElement","msFullscreenElement","webkitFullscreenElement","target","webkitEnterFullscreen","navigationUI","classFull","WebFullscreen","classActive","Popover","onHide","maskElement","panelElement","applyPanelStyle","includes","activeClass","Switch","change","data","FULL_SCREEN","EXIT_FULL_SCREEN","WEB_FULL_SCREEN","WEB_EXIT_FULL_SCREEN","SETTINGS","MUTE","UNMUTE","NORMAL","SPEED","PIP","LOOP","VOLUME","AIRPLAY","LIVE","I18n","defaultLang","currentLang","lang","transData","toLowerCase","fallback","setCurrentLang","language","userLanguage","setDefaultLang","createIcon","icon","Icon","registerIcon","iconName","classOptionActive","Setting","onItemClick","_switch","renderOptions","showOptionPage","_optionElement","onOptionClick","option","renderHome","showHomePage","back","popover","homeElement","currentOptionElement","__settingItems","cog","willChange","setPos","_selectedElement","opt","selectedHtml","_optionElements","editableTagNames","Shortcut","enable","onKeyDown","altKey","ctrlKey","metaKey","shiftKey","focused","activeElement","tag","tagName","editable","getAttribute","code","keyCode","which","handled","control","showVolume","toast","volume","register","fullscreen","webFullscreen","rewind","seekStep","incVolume","forward","decVolume","disable","Play","onPlay","pauseIcon","playIcon","onPause","_","play","pause","Volume","onDragStart","onDragging","pageX","onVolumeChange","mute","unmute","transform","volumeIcon","mutedIcon","bars","barWidth","volumeBarWidth","toggleVolume","Time","live","playedElement","totalElement","total","duration","exitIcon","enterIcon","webEnterFullscreen","webExitFullscreen","enterFullscreen","Airplay","airplay","availability","webkitShowPlaybackTargetPicker","WebKitPlaybackTargetAvailabilityEvent","Thumbnail","startSecond","gapSecond","col","row","images","updateOptions","timeElement","ssGapRatio","url","thumbImgPrePic","imgElement","maxX","thumb","getCurrentThumb","backgroundImage","backgroundPosition","half","Progress","dragging","setPlayedBarLength","updateThumbnail","onDragEnd","seek","getCurrentTime","updateBufBar","buffered","setBufBarLength","percentage","updatePlayedBar","bufBar","playedBar","dot","progressDot","thumbnail","playing","resetPlayedBar","trans","from","to","transThrottle","setCssVariables","themeColor","setProperty","progressBg","posterBgColor","volumeProgressBg","setVideoSources","s","source","storageVolumeKey","registerNamedMap","registerContextMenuItem","loop","loaded","pictureInPictureElement","requestPictureInPicture","exitPictureInPicture","registerSettingItem","playbackRate","registerControlItem","Checkbox","Slider","stop","onDrag","trackElement","stops","dotElement","step","trigger","closed","Infinity","abs","Poster","tryToPlayed","onTimeUpdate","poster","playElement","posterPlayElement","posterEnable","loading","addTimeUpdateHandler","Touch","startX","startY","dragType","durationStr","seekTime","videoTouched","dragStart","pageY","dragMove","dragEnd","videoTouchHandler","showControlTimer","drag","Player","prevVolume","settingNamedMap","contextmenuNamedMap","controlNamedMap","plugins","Set","origin","def","dOpts","shortcut","volumeStep","settings","contextMenus","openEdgeInIE","videoProps","crossorigin","preload","playsinline","res","maxTouchPoints","msMaxTouchPoints","650","Boolean","newBpControls","isNaN","isArray","processOptions","location","href","URL","tabindex","src","setVideoAttrs","videoSources","parseFloat","localStorage","error","setVideoVolumeFromLocal","dis","ResizeObserver","ro","observe","disconnect","transferEvent","touch","plugin","use","contextmenu","time","autoSeekTime","enableClickPause","readyState","setItem","saveVideoVolume","ended","removeAllListeners","__utils","components","console","log"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"NPlayer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NPlayer\"] = factory();\n\telse\n\t\troot[\"NPlayer\"] = factory();\n})(this, function() {\nreturn ","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".nplayer{--theme-color:#007aff;--poster-bg-color:transparent;--progress-bg:#007aff;--volume-progress-bg:#007aff;--safe-area-inset-bottom:$control_bottom;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;align-items:center;background:#000;color:#fff;display:flex;font-family:-apple-system,BlinkMacSystemFont,Microsoft YaHei;height:100%;justify-content:center;position:relative;width:100%;z-index:0}@supports(padding-bottom:constant(safe-area-inset-bottom)){.nplayer{--safe-area-inset-bottom:max(8px,constant(safe-area-inset-bottom))}}@supports(padding-bottom:env(safe-area-inset-bottom)){.nplayer{--safe-area-inset-bottom:max(8px,env(safe-area-inset-bottom))}}.nplayer *{box-sizing:content-box}.nplayer_control{z-index:10}.nplayer_control_bg{z-index:9}.nplayer_poster{z-index:20}.nplayer_loading{z-index:30}.nplayer_contextmenu{z-index:40}.nplayer_toast{z-index:50}.nplayer:focus{outline:none}.nplayer_flex{display:flex}.nplayer_align-center{align-items:center}.nplayer-web-full{bottom:0;left:0;position:fixed;right:0;top:0;z-index:99999}.nplayer-web-full .nplayer_control{padding-bottom:var(--safe-area-inset-bottom)}.nplayer-loading .nplayer_loading{display:block}.nplayer_icon{fill:#fff;height:28px;width:28px}.nplayer_video{max-height:100%;outline:none;touch-action:none;width:100%}.nplayer_spacer{flex:1}.nplayer_tooltip{cursor:pointer;padding:3px;position:relative;transition:background .2s ease}@media not all and (hover:none){.nplayer_tooltip:hover{background:var(--theme-color)}.nplayer_tooltip:hover .nplayer_tooltip_content{opacity:1;transform:translate(-50%)}.nplayer_tooltip:hover .nplayer_tooltip-left,.nplayer_tooltip:hover .nplayer_tooltip-right{transform:translate(0)}}.nplayer_tooltip_content{background:rgba(0,0,0,.7);bottom:100%;font-size:12px;left:50%;margin-bottom:10px;opacity:0;padding:5px 10px;pointer-events:none;position:absolute;transform:translate(-50%,10px) scale(.8);transform-origin:50% 100%;transition:transform .2s ease .1s,opacity .2s ease .1s;white-space:nowrap}.nplayer_tooltip-left{left:0;transform:translateY(10px) scale(.8);transform-origin:0 100%}.nplayer_tooltip-right{left:auto;right:0;transform:translateY(10px) scale(.8);transform-origin:100% 100%}.nplayer_tooltip-bottom{bottom:auto;margin-bottom:0;margin-top:10px;top:100%;transform:translate(-50%,-10px) scale(.8)}.nplayer_tooltip-bottom.nplayer_tooltip-left,.nplayer_tooltip-bottom.nplayer_tooltip-right{transform:translateY(-10px) scale(.8)}.nplayer_popover{pointer-events:none}.nplayer_popover-active{pointer-events:auto}.nplayer_popover-active .nplayer_popover_panel{opacity:1;transform:translateY(0)}.nplayer_popover_panel{background:rgba(0,0,0,.7);bottom:100%;box-shadow:0 1px 20px 1px rgba(0,0,0,.2);font-size:14px;margin-bottom:5px;opacity:0;overflow:hidden;padding:3px 0;position:absolute;right:0;transform:translateY(10px);transition:opacity .2s ease,transform .2s ease,height .2s cubic-bezier(.4,0,.2,1),width .2s cubic-bezier(.4,0,.2,1);white-space:nowrap;z-index:2}.nplayer_popover_panel-bottom{bottom:auto;margin-bottom:0;margin-top:5px;top:100%;transform:translateY(-10px)}.nplayer_popover_panel-left{left:0;right:auto}.nplayer_popover_mask{bottom:0;left:0;position:fixed;right:0;top:0;z-index:1}.nplayer_switch{background:hsla(0,0%,100%,.3);border-radius:10px;cursor:pointer;display:inline-block;padding:2px;transition:background-color .3s cubic-bezier(.4,0,.2,1);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:30px}.nplayer_switch:after{background:#fff;border-radius:50%;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);content:\\\"\\\";display:block;height:15px;transition:transform .15s cubic-bezier(.4,0,.2,1);width:15px}.nplayer_switch-active{background:var(--theme-color)}.nplayer_switch-active:after{transform:translateX(16px)}.nplayer_loading{display:none;height:70px;left:50%;pointer-events:none;position:absolute;top:50%;transform:translate(-50%,-50%);width:70px}.nplayer_loading i{-webkit-animation:nplayer-loading 1s linear infinite;animation:nplayer-loading 1s linear infinite;background-color:#fff;border-radius:50%/20%;height:25%;left:44.5%;opacity:.25;position:absolute;top:37%;width:5px}.nplayer_loading i:first-child{-webkit-animation-delay:0s;animation-delay:0s;transform:rotate(-150deg) translateY(-150%)}.nplayer_loading i:nth-child(2){-webkit-animation-delay:.0833s;animation-delay:.0833s;transform:rotate(-120deg) translateY(-150%)}.nplayer_loading i:nth-child(3){-webkit-animation-delay:.1666s;animation-delay:.1666s;transform:rotate(-90deg) translateY(-150%)}.nplayer_loading i:nth-child(4){-webkit-animation-delay:.2499s;animation-delay:.2499s;transform:rotate(-60deg) translateY(-150%)}.nplayer_loading i:nth-child(5){-webkit-animation-delay:.3332s;animation-delay:.3332s;transform:rotate(-30deg) translateY(-150%)}.nplayer_loading i:nth-child(6){-webkit-animation-delay:.4165s;animation-delay:.4165s;transform:rotate(0deg) translateY(-150%)}.nplayer_loading i:nth-child(7){-webkit-animation-delay:.4998s;animation-delay:.4998s;transform:rotate(30deg) translateY(-150%)}.nplayer_loading i:nth-child(8){-webkit-animation-delay:.5831s;animation-delay:.5831s;transform:rotate(60deg) translateY(-150%)}.nplayer_loading i:nth-child(9){-webkit-animation-delay:.6664s;animation-delay:.6664s;transform:rotate(90deg) translateY(-150%)}.nplayer_loading i:nth-child(10){-webkit-animation-delay:.7497s;animation-delay:.7497s;transform:rotate(120deg) translateY(-150%)}.nplayer_loading i:nth-child(11){-webkit-animation-delay:.833s;animation-delay:.833s;transform:rotate(150deg) translateY(-150%)}.nplayer_loading i:nth-child(12){-webkit-animation-delay:.9163s;animation-delay:.9163s;transform:rotate(180deg) translateY(-150%)}.nplayer_toast{background:rgba(0,0,0,.7);font-size:16px;padding:3px 5px;position:absolute;white-space:nowrap}.nplayer_toast-center{left:50%;top:50%;transform:translate(-50%,-50%)}.nplayer_toast-left-top,.nplayer_toast-right-top{top:5px}.nplayer_toast-left-bottom,.nplayer_toast-left-top{left:5px}.nplayer_toast-right-bottom,.nplayer_toast-right-top{right:5px}.nplayer_toast-left-bottom,.nplayer_toast-right-bottom{bottom:60px}.nplayer_slider{cursor:pointer;display:inline-block;flex:1;margin:0 6px;padding:5px 0;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nplayer_slider_track{background:hsla(0,0%,100%,.3);height:5px;overflow:hidden;width:100%}.nplayer_slider_track_inner{background:var(--theme-color);height:100%;transform-origin:0 0}.nplayer_slider_stop{background:hsla(0,0%,100%,.7);font-size:12px;height:9px;position:absolute;top:3px;white-space:nowrap;width:3px}.nplayer_slider_stop span{left:2px;position:absolute;top:6px;transform:translateX(-50%)}.nplayer_slider_dot{background:var(--theme-color);border-radius:50%;height:14px;left:-6px;pointer-events:none;position:absolute;top:0;width:14px}.nplayer_checkbox{align-items:center;color:#fff;cursor:pointer;display:inline-flex;font-size:12px;position:relative;transition:color .2s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nplayer_checkbox:before{border:1px solid;border-radius:2px;content:\\\"\\\";display:block;height:1em;margin-right:5px;transition:background .2s ease;width:1em}.nplayer_checkbox:after{border:1px solid #fff;border-left:0;border-top:0;content:\\\"\\\";height:7px;left:.5em;opacity:0;position:absolute;top:50%;transform:translate(-30%,-70%) rotate(45deg);width:4px}.nplayer_checkbox:hover{color:var(--theme-color)}.nplayer_checkbox-active:before{background:var(--theme-color);border-color:var(--theme-color)}.nplayer_checkbox-active:after{opacity:1}.nplayer_poster{background-color:var(--poster-bg-color);background-position:50% 50%;background-repeat:no-repeat;background-size:cover;bottom:0;left:0;position:absolute;right:0;top:0}.nplayer_poster_play{cursor:pointer;height:50px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:50px}.nplayer_control{bottom:0;left:0;padding:0 5px 8px;position:absolute;right:0;transition:opacity .2s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nplayer_control-hide{opacity:0;pointer-events:none}.nplayer_control:hover{cursor:default!important;opacity:1!important;pointer-events:auto!important}.nplayer_control:hover~.nplayer_control_bg{opacity:1!important}.nplayer_control_bg{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;bottom:0;height:100px;left:0;pointer-events:none;position:absolute;right:0;transition:opacity .2s ease}.nplayer_control_bg-hide{opacity:0}.nplayer_control_bar{align-items:center;display:flex;font-size:0}.nplayer_control_bar-top{left:0;padding-top:5px;position:absolute;right:0;top:0;transition:opacity .2s ease;z-index:10}.nplayer_control_bar-hide{opacity:0;pointer-events:none}.nplayer_control_bar>div{margin:0 3px}.nplayer_control_time{font-size:13px;white-space:nowrap}.nplayer_control_time-live{align-items:center;display:flex}.nplayer_control_time-live:before{background:var(--theme-color);border-radius:50%;content:\\\"\\\";display:block;height:10px;margin-right:5px;margin-top:2px;width:10px}.nplayer_control_time :first-child:after{content:\\\"/\\\";display:inline-block;font-size:12px;margin:0 5px;transform:translateY(-.5px)}.nplayer_control_volume{position:relative;z-index:1}.nplayer_control_volume_bar,.nplayer_control_volume_bars{bottom:0;position:absolute;top:0}.nplayer_control_volume_bars{background:hsla(0,0%,100%,.3);font-size:0;left:100%;opacity:0;overflow:hidden;pointer-events:none;transition:opacity .2s ease}.nplayer_control_volume:hover .nplayer_control_volume_bars{opacity:1;pointer-events:auto;transform:translateX(0)}.nplayer_control_volume_bar{background:var(--volume-progress-bg);left:0;right:0;transform:scaleX(0);transform-origin:0 0;will-change:transform}.nplayer_control_setting .nplayer_icon{transition:transform .2s ease}.nplayer_control_setting-active{background:var(--theme-color)}.nplayer_control_setting-active .nplayer_icon{transform:rotate(90deg)}.nplayer_control_setting_item,.nplayer_control_setting_option{align-items:center;display:flex;padding:5px 8px}.nplayer_control_setting_item:hover,.nplayer_control_setting_option:hover{background:hsla(0,0%,100%,.2)}.nplayer_control_setting_item{justify-content:space-between}.nplayer_control_setting_item>:first-child{margin-right:20px}.nplayer_control_setting_item-select:after{border:4px solid transparent;border-left-color:#fff;content:\\\"\\\";display:block;height:0;margin-left:10px;width:0}.nplayer_control_setting_option:before{border-bottom:1px solid #fff;border-right:1px solid #fff;content:\\\"\\\";display:inline-block;height:12px;margin-left:6px;margin-right:17px;opacity:0;transform:rotate(45deg);width:5px}.nplayer_control_setting_option-active:before{opacity:1}.nplayer_control_setting_back{border-bottom:1px solid hsla(0,0%,100%,.2);justify-content:flex-start;padding-right:20px}.nplayer_control_setting_back:before{border:4px solid transparent;border-right-color:#fff;content:\\\"\\\";display:block;height:0;margin-right:21px;width:0}.nplayer_contextmenu{background:rgba(0,0,0,.7);font-size:14px;left:0;padding:3px 0;position:absolute;top:0}.nplayer_contextmenu_item{align-items:center;cursor:pointer;display:flex;justify-content:space-between;padding:5px 8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.nplayer_contextmenu_item:hover{background:hsla(0,0%,100%,.2)}.nplayer_contextmenu_item-disabled{color:hsla(0,0%,100%,.5)}.nplayer_contextmenu_item-disabled:hover{background:transparent}.nplayer_contextmenu_item-checked:after{border-bottom:1px solid #fff;border-right:1px solid #fff;content:\\\"\\\";display:inline-block;height:12px;margin:0 2px 5px;transform:rotate(45deg);width:5px}.nplayer_progress{cursor:pointer;flex:1;padding:5px 0;position:relative}.nplayer_progress_bars{background:hsla(0,0%,100%,.3);height:4px;overflow:hidden;position:relative;touch-action:none;transition:height .12s ease}.nplayer_progress_dot{left:0;pointer-events:none;position:absolute;top:50%;transform:translateY(-50%);transition:opacity .2s ease}.nplayer_progress_dot_inner{background:var(--theme-color);border-radius:50%;height:13px;transform:translateX(-50%);width:13px}@media not all and (hover:none){.nplayer_progress_dot{opacity:0}.nplayer_progress:hover .nplayer_progress_dot{opacity:1}}.nplayer_progress_buf,.nplayer_progress_played{bottom:0;left:0;position:absolute;right:0;top:0;transform:scaleX(0);transform-origin:0 0}.nplayer_progress_played{background:var(--progress-bg);will-change:transform}.nplayer_progress_buf,.nplayer_progress_hover{background:hsla(0,0%,100%,.5)}.nplayer_progress_hover{opacity:0}.nplayer_progress:hover .nplayer_thumb{display:block}.nplayer_thumb{bottom:20px;display:none;font-size:12px;left:0;pointer-events:none;position:absolute;text-align:center;text-shadow:0 0 2px rgba(0,0,0,.3)}.nplayer_thumb_img{background-color:hsla(0,0%,100%,.5);background-repeat:no-repeat;border:1px solid #fff;box-shadow:0 0 10px rgba(0,0,0,.1)}.nplayer_thumb_time{background:rgba(0,0,0,.7);border-radius:3px;display:inline-block;margin-top:5px;padding:2px 5px 3px}@-webkit-keyframes nplayer-loading{0%{opacity:.85}50%{opacity:.25}to{opacity:.25}}@keyframes nplayer-loading{0%{opacity:.85}50%{opacity:.25}to{opacity:.25}}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\n    var isBrowser = typeof window !== 'undefined' && window.document\n    var el;\n\n    function insert() {\n      var style = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[3]!./index.scss\");\n      if (style.__esModule) style = style.default\n      var css = typeof style === 'string' ? style : style[0][1]\n      var create = false\n      if (!el) {\n        el = document.createElement('style')\n        el.setAttribute('type', 'text/css')\n        create = true\n      }\n\n      if ('textContent' in el) {\n        el.textContent = css\n      } else {\n        el.styleSheet.cssText = css\n      }\n\n      if (create) document.head.appendChild(el)\n    }\n\n    if (isBrowser) insert()\n\n    if (module.hot && isBrowser) {\n      module.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[3]!./index.scss\", function() {\n        insert()\n      });\n      module.hot.dispose(function() {\n        if (el) el.parentNode.removeChild(el)\n      });\n    }\n  ","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export const CLASS_PREFIX = 'nplayer_';\n\nexport const CLASS_PLAYER = 'nplayer';\n\nexport const EVENT = {\n  ENTER_FULLSCREEN: 'EnterFullscreen',\n  EXIT_FULLSCREEN: 'ExitFullscreen',\n  WEB_ENTER_FULLSCREEN: 'WebEnterFullscreen',\n  WEB_EXIT_FULLSCREEN: 'WebExitFullscreen',\n  DURATION_CHANGE: 'DurationChange',\n  RATE_CHANGE: 'RateChange',\n  AFTER_INIT: 'AfterInit',\n  PLAY: 'Play',\n  PAUSE: 'Pause',\n  ENDED: 'Ended',\n  WAITING: 'Waiting',\n  STALLED: 'Stalled',\n  CANPLAY: 'Canplay',\n  LOADED_METADATA: 'LoadedMetadata',\n  ERROR: 'Error',\n  SEEKED: 'Seeked',\n  TIME_UPDATE: 'TimeUpdate',\n  VOLUME_CHANGE: 'VolumeChange',\n  PROGRESS: 'Progress',\n  ENTER_PIP: 'EnterPip',\n  EXIT_PIP: 'ExitPip',\n  LOADING_SHOW: 'LoadingShow',\n  LOADING_HIDE: 'LoadingHide',\n  MOUNTED: 'Mounted',\n  UPDATE_SIZE: 'UpdateSize',\n  BEFORE_DISPOSE: 'BeforeDispose',\n  UPDATE_OPTIONS: 'UpdateOptions',\n  OPEN_EDGE: 'OpenEdge',\n  CONTROL_SHOW: 'ControlShow',\n  CONTROL_HIDE: 'ControlHide',\n  CONTROL_ITEM_UPDATE: 'ControlItemUpdate',\n  BP_CHANGE: 'BpChange',\n} as const;\n","export const isBrowser = typeof window !== 'undefined';\nexport const isIOS = isBrowser && /(iPad|iPhone|iPod)/gi.test(navigator.platform);\nexport const isIE = isBrowser && /MSIE|Trident/.test(navigator.userAgent);\nexport const isWin10IE = isBrowser && isIE && navigator.userAgent.indexOf('Windows NT 10.0') > -1;\n","import { isBool, isString } from '.';\nimport { CLASS_PREFIX } from '../constants';\nimport { Disposable } from '../types';\nimport { isBrowser } from './env';\n\nconst SELECTOR_REGEX = /([\\w-]+)?(?:#([\\w-]+))?((?:\\.(?:[\\w-]+))*)/;\n\nexport function $<T extends HTMLElement>(\n  desc?: string,\n  attrs?: { [key: string]: any; },\n  children?: string | Array<Node>,\n  classPrefix = CLASS_PREFIX,\n): T {\n  let match: string[] = [];\n\n  if (desc) match = SELECTOR_REGEX.exec(desc) || [];\n\n  const el = document.createElement(match[1] || 'div');\n\n  if (match[2]) el.id = match[3];\n  if (match[3]) el.className = match[3].replace(/\\./g, ` ${classPrefix}`).trim();\n\n  if (attrs) {\n    Object.keys(attrs).forEach((name) => {\n      const value = attrs[name];\n      if (value === undefined) return;\n\n      if (/^on\\w+$/.test(name)) {\n        (el as any)[name] = value;\n      } else if (name === 'selected') {\n        if (value) {\n          el.setAttribute(name, 'true');\n        }\n      } else {\n        el.setAttribute(name, value);\n      }\n    });\n  }\n\n  if (children) {\n    if (isString(children)) {\n      el.innerHTML = children;\n    } else {\n      children.forEach((c) => el.appendChild(c));\n    }\n  }\n\n  return el as T;\n}\n\nexport function getEl(el: HTMLElement | string | undefined | null): HTMLElement | null {\n  if (!el) return null;\n  if (isString(el)) return document.querySelector(el);\n  return el;\n}\n\nexport function removeNode(node: Element): void {\n  if (!node) return;\n  if (node.remove) {\n    node.remove();\n  } else if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n}\n\nexport function show(node: HTMLElement | SVGElement): void {\n  node.style.display = '';\n}\n\nexport function hide(node: HTMLElement | SVGElement): void {\n  node.style.display = 'none';\n}\n\nexport function addClass<T extends Element>(dom: T, cls = '', prefix = CLASS_PREFIX): T {\n  cls = cls.trim();\n  if (!cls) return dom;\n  if (dom.classList) {\n    cls.split(' ').forEach((c) => dom.classList.add(prefix + c));\n  } else {\n    const oldCls = (dom.className && (dom.className as any).baseVal) || '';\n    dom.setAttribute('class', (oldCls ? `${oldCls} ` : '') + cls.split(' ').map((c) => prefix + c).join(' '));\n  }\n  return dom;\n}\n\nexport function removeClass<T extends Element>(dom: T, cls: string, prefix = CLASS_PREFIX): T {\n  dom.classList.remove(prefix + cls);\n  return dom;\n}\n\nexport function containClass(dom: Element, cls: string, prefix = CLASS_PREFIX): boolean {\n  return dom.classList.contains(prefix + cls);\n}\n\nexport function toggleClass(dom: Element, cls: string, force?: boolean, prefix = CLASS_PREFIX): boolean {\n  cls = prefix + cls;\n  if (force) {\n    dom.classList.add(cls);\n    return true;\n  } if (force === false) {\n    dom.classList.remove(cls);\n    return true;\n  }\n  return dom.classList.toggle(cls, force);\n}\n\nconst svgNS = 'http://www.w3.org/2000/svg';\n\nexport function createSvg(cls?: string, d?: string, viewBox = '0 0 24 24'): SVGSVGElement {\n  const svg = document.createElementNS(svgNS, 'svg');\n  svg.setAttribute('viewBox', viewBox);\n  if (cls) addClass(svg, cls);\n  if (d) {\n    const path = document.createElementNS(svgNS, 'path');\n    path.setAttributeNS(null, 'd', d);\n    svg.appendChild(path);\n  }\n  return svg;\n}\n\nexport function getEventPath(ev: Event): EventTarget[] {\n  return (ev as any).path || ev.composedPath();\n}\n\nlet thirdOptsSupported = false;\n\nif (isBrowser) {\n  try {\n    const options = Object.defineProperty({}, 'once', { get() { thirdOptsSupported = true; } });\n    window.addEventListener('test', null as any, options);\n  // eslint-disable-next-line no-empty\n  } catch (e) {}\n}\n\nexport function isListenerObjOptsSupported(): boolean {\n  return thirdOptsSupported;\n}\n\nexport class DomListener implements Disposable {\n  constructor(\n    private node: EventTarget,\n    private type: string,\n    private handler: (e: any) => void,\n    private options?: boolean | AddEventListenerOptions,\n  ) {\n    this.options = isBool(options) ? options : options ? (thirdOptsSupported && options) : false;\n    node.addEventListener(type, handler, this.options);\n  }\n\n  dispose(): void {\n    if (!this.handler) return;\n    this.node.removeEventListener(this.type, this.handler, this.options);\n    this.node = null!;\n    this.handler = null!;\n    this.options = null!;\n  }\n}\n\nexport function measureElementSize(\n  dom: HTMLElement,\n): { width: number; height: number } {\n  const clone = dom.cloneNode(true) as HTMLElement;\n  clone.style.position = 'absolute';\n  clone.style.opacity = '0';\n  clone.removeAttribute('hidden');\n\n  const parent = dom.parentNode || document.body;\n\n  parent.appendChild(clone);\n\n  // const width = clone.scrollWidth;\n  // const height = clone.scrollHeight;\n\n  const rect = clone.getBoundingClientRect();\n\n  parent.removeChild(clone);\n\n  return rect;\n}\n","const toString = Object.prototype.toString;\n\nexport function isString(o: any): o is string {\n  return typeof o === 'string' || o instanceof String;\n}\n\nexport function isBool(o: any): o is boolean {\n  return o === true || o === false || (toString.call(o) === '[object Boolean]');\n}\n\nexport function isFunction(o: any): o is Function {\n  return typeof o === 'function';\n}\n\nexport function isNumber(o: any): o is number {\n  return typeof o === 'number' || (toString.call(o) === '[object Number]');\n}\n","import { Disposable } from '../types';\n\ntype Fn = (ev: PointerEvent) => any;\n\nexport class Drag implements Disposable {\n  private el: HTMLElement;\n\n  private start: Fn;\n\n  private move: Fn;\n\n  private end: Fn | undefined;\n\n  private pending = false;\n\n  private lastEv!: PointerEvent;\n\n  constructor(dom: HTMLElement, start: Fn, move: Fn, end?: Fn) {\n    this.el = dom;\n    this.start = start;\n    this.move = move;\n    this.end = end;\n\n    dom.addEventListener('pointerdown', this.downHandler, true);\n    dom.addEventListener('pointerup', this.upHandler, true);\n    dom.addEventListener('pointercancel', this.upHandler, true);\n  }\n\n  private downHandler = (ev: PointerEvent): void => {\n    ev.preventDefault();\n    this.el.setPointerCapture(ev.pointerId);\n    this.el.addEventListener('pointermove', this.moveHandler, true);\n    this.start(ev);\n  };\n\n  private moveHandler = (ev: PointerEvent): void => {\n    ev.preventDefault();\n    this.lastEv = ev;\n    if (this.pending) return;\n    this.pending = true;\n    requestAnimationFrame(this.handlerMove);\n  };\n\n  private handlerMove = (): void => {\n    this.move(this.lastEv);\n    this.pending = false;\n  };\n\n  private upHandler = (ev: PointerEvent): void => {\n    ev.preventDefault();\n    this.el.releasePointerCapture(ev.pointerId);\n    this.el.removeEventListener('pointermove', this.moveHandler, true);\n\n    if (this.end) this.end(ev);\n  };\n\n  dispose(): void {\n    if (!this.el) return;\n    this.el.removeEventListener('pointerdown', this.downHandler, true);\n    this.el.removeEventListener('pointerup', this.upHandler, true);\n    this.el.removeEventListener('pointercancel', this.upHandler, true);\n    this.el.removeEventListener('pointermove', this.moveHandler, true);\n    this.start = null!;\n    this.move = null!;\n    this.end = null!;\n    this.lastEv = null!;\n    this.el = null!;\n  }\n}\n","import { EVENT } from '../constants';\nimport { Player } from '../player';\nimport { Disposable } from '../types';\n\nexport class Rect implements Disposable {\n  private rect!: DOMRect;\n\n  constructor(private el: HTMLElement, private player?: Player) {\n    this.rect = {} as DOMRect;\n    if (player) {\n      player.on(EVENT.UPDATE_SIZE, this.update);\n    }\n  }\n\n  get width(): number {\n    this.tryUpdate(this.rect.width);\n    return this.rect.width;\n  }\n\n  get height(): number {\n    this.tryUpdate(this.rect.height);\n    return this.rect.height;\n  }\n\n  get x(): number {\n    this.tryUpdate(this.rect.left);\n    return this.rect.left;\n  }\n\n  get y(): number {\n    this.tryUpdate(this.rect.top);\n    return this.rect.top;\n  }\n\n  private tryUpdate(v: number): void {\n    if (!v) this.update();\n  }\n\n  update = (): void => {\n    this.rect = this.el.getBoundingClientRect();\n  }\n\n  dispose(): void {\n    if (this.player) this.player.off(EVENT.UPDATE_SIZE, this.update);\n    this.el = null!;\n    this.rect = null!;\n  }\n}\n","import { Disposable } from '../types';\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nclass EE {\n  constructor(public fn: Function, public context: any, public once: boolean) {\n    this.once = once || false;\n  }\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nexport class EventEmitter {\n  private _events: Record<string, any>;\n\n  private _eventsCount: number;\n\n  constructor() {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  emit(evt: string, a1?: any, a2?: any, a3?: any, a4?: any, a5?: any): boolean {\n    if (!this._events[evt]) return false;\n\n    const listeners = this._events[evt];\n    const len = arguments.length;\n    let args;\n    let i;\n\n    if (listeners.fn) {\n      if (listeners.once) this.off(evt, listeners.fn, undefined, true);\n\n      switch (len) {\n        case 1: return listeners.fn.call(listeners.context), true;\n        case 2: return listeners.fn.call(listeners.context, a1), true;\n        case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n        case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n        case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n        case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n      }\n\n      for (i = 1, args = new Array(len - 1); i < len; i++) {\n        args[i - 1] = arguments[i];\n      }\n\n      listeners.fn.apply(listeners.context, args);\n    } else {\n      const length = listeners.length;\n      let j;\n\n      for (i = 0; i < length; i++) {\n        if (listeners[i].once) this.off(evt, listeners[i].fn, undefined, true);\n\n        switch (len) {\n          case 1: listeners[i].fn.call(listeners[i].context); break;\n          case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n          case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n          case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n          default:\n            if (!args) {\n              for (j = 1, args = new Array(len - 1); j < len; j++) {\n                args[j - 1] = arguments[j];\n              }\n            }\n\n            listeners[i].fn.apply(listeners[i].context, args);\n        }\n      }\n    }\n\n    return true;\n  }\n\n  on(evt: string, fn: Function, context?: any, once = false): Disposable {\n    if (typeof fn !== 'function') {\n      throw new TypeError('The listener must be a function');\n    }\n\n    const listener = new EE(fn, context || this, once);\n\n    // eslint-disable-next-line no-unused-expressions\n    if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n    else if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [this._events[evt], listener];\n\n    return { dispose: this.off.bind(this, evt, fn) };\n  }\n\n  once(event: string, fn: Function, context?: any): Disposable {\n    return this.on(event, fn, context, true);\n  }\n\n  off(evt: string, fn?: Function, context?: any, once?: boolean): this {\n    if (!this._events[evt]) return this;\n    if (!fn) {\n      this.clearEvent(evt);\n      return this;\n    }\n\n    const listeners = this._events[evt];\n    const events = [];\n\n    if (listeners.fn) {\n      if (\n        listeners.fn === fn\n        && (!once || listeners.once)\n        && (!context || listeners.context === context)\n      ) {\n        this.clearEvent(evt);\n      }\n    } else {\n      for (let i = 0, length = listeners.length; i < length; i++) {\n        if (\n          listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n\n      //\n      // Reset the array, or remove it completely if we have no more listeners.\n      //\n      if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n      else this.clearEvent(evt);\n    }\n\n    return this;\n  }\n\n  removeAllListeners(evt?: string): this {\n    if (evt) {\n      if (this._events[evt]) this.clearEvent(evt);\n    } else {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    }\n\n    return this;\n  }\n\n  private clearEvent(evt: string) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);\n    else delete this._events[evt];\n  }\n}\n","import { Disposable } from '../types';\nimport {\n  $, dispose, removeNode,\n} from '.';\nimport { isString } from './is';\n\nexport class Component implements Disposable {\n  el: HTMLElement;\n\n  constructor(\n    container?: HTMLElement,\n    desc?: string | HTMLElement,\n    attrs?: { [key: string]: any; },\n    children?: string | Array<Node>,\n    classPrefix?: string,\n  ) {\n    if (desc && !isString(desc)) {\n      this.el = desc;\n    } else {\n      this.el = $(desc, attrs, children, classPrefix);\n    }\n    if (container) container.appendChild(this.el);\n  }\n\n  applyStyle(style: Partial<CSSStyleDeclaration>): void {\n    Object.assign(this.el.style, style);\n  }\n\n  dispose() {\n    removeNode(this.el);\n    dispose(this);\n  }\n}\n","import { removeNode } from './dom';\n\nexport interface Node {\n  id?: any;\n  el: HTMLElement;\n}\n\nfunction isSameNode(a: Node, b: Node): boolean {\n  if (!a || !b) return false;\n  return a === b || a.id === b.id;\n}\n\nfunction unmount(node: Node, unmountNode?: (n: Node) => void) {\n  removeNode(node.el);\n  if (unmountNode) unmountNode(node);\n}\n\nfunction mountOrMove(node: Node, container: HTMLElement, anchor?: Node, op?:(n: Node) => void) {\n  container.insertBefore(node.el, anchor?.el || null);\n  if (op) op(node);\n}\n\nfunction lis(arr: number[]): number[] {\n  const p: number[] = [];\n  const m = [arr[0]];\n  let lo = 0;\n  let hi = 0;\n  let mid = 0;\n  let last = 0;\n\n  for (let i = 1, l = arr.length, item; i < l; ++i) {\n    item = arr[i];\n    if (item !== -1) {\n      last = m.length - 1;\n      if (item > arr[m[last]]) {\n        p[i] = m[last];\n        m.push(i);\n      } else {\n        lo = 0;\n        hi = last;\n        while (lo < hi) {\n          mid = ((lo + hi) / 2) | 0;\n          if (item > arr[m[mid]]) {\n            lo = mid + 1;\n          } else {\n            hi = mid;\n          }\n        }\n        p[i] = m[lo - 1];\n        m[lo] = i;\n      }\n    }\n  }\n\n  last = m.length;\n  lo = m[last - 1];\n  while (last-- > 0) {\n    m[last] = lo;\n    lo = p[lo];\n  }\n\n  return m;\n}\n\nexport function patch(\n  prevNodes: Node[],\n  nextNodes: Node[],\n  container: HTMLElement,\n  op: {\n    mount?: (node: Node) => void;\n    update?: (node: Node) => void;\n    unmount?: (node: Node) => void;\n  } = {},\n) {\n  let prevEnd = prevNodes.length - 1;\n  let nextEnd = nextNodes.length - 1;\n  let startIndex = 0;\n  let prevNode = prevNodes[startIndex];\n  let nextNode = nextNodes[startIndex];\n\n  while (isSameNode(prevNode, nextNode)) {\n    startIndex++;\n    prevNode = prevNodes[startIndex];\n    nextNode = nextNodes[startIndex];\n  }\n\n  if (startIndex < prevEnd && startIndex < nextEnd) {\n    prevNode = prevNodes[prevEnd];\n    nextNode = nextNodes[nextEnd];\n\n    while (isSameNode(prevNode, nextNode)) {\n      prevNode = prevNodes[--prevEnd];\n      nextNode = nextNodes[--nextEnd];\n    }\n  }\n\n  if (startIndex > prevEnd && startIndex > nextEnd) return;\n\n  if (startIndex > prevEnd) {\n    for (let i = startIndex; i <= nextEnd; i++) {\n      mountOrMove(nextNodes[i], container, undefined, op.mount);\n    }\n  } else if (startIndex > nextEnd) {\n    for (let i = startIndex; i <= prevEnd; i++) {\n      unmount(prevNodes[i], op.unmount);\n    }\n  } else {\n    const toPatch = [];\n    const idMap = new Map<any, number>();\n    for (let i = startIndex; i <= nextEnd; i++) {\n      toPatch.push(-1);\n      idMap.set(nextNodes[i].id || nextNodes[i], i);\n    }\n\n    let moved = false;\n    let prevPos = 0;\n    let nextIndex = 0;\n    for (let i = startIndex; i <= prevEnd; i++) {\n      prevNode = prevNodes[i];\n      nextIndex = idMap.get(prevNode.id || prevNode) as any;\n\n      if (nextIndex == null) {\n        unmount(prevNode, op.unmount);\n      } else {\n        toPatch[nextIndex - startIndex] = i;\n\n        if (prevPos > nextIndex) {\n          moved = true;\n        } else {\n          prevPos = nextIndex;\n        }\n      }\n    }\n\n    const incSeq = moved ? lis(toPatch) : [];\n    let j = incSeq.length - 1;\n    for (let i = toPatch.length - 1, item, anchor; i > -1; i--) {\n      item = toPatch[i];\n      nextIndex = startIndex + i;\n      anchor = nextNodes[nextIndex + 1];\n      if (item === -1) {\n        mountOrMove(nextNodes[nextIndex], container, anchor, op.mount);\n      } else if (moved) {\n        if (i === incSeq[j]) {\n          j--;\n        } else {\n          mountOrMove(nextNodes[nextIndex], container, anchor, op.update);\n        }\n      }\n    }\n  }\n}\n\ntype CSSStyle = Partial<CSSStyleDeclaration>\ntype Data = Record<string, any>\n\nexport function patchStyles(el: HTMLElement, prevStyle: CSSStyle, nextStyle?: CSSStyle): void {\n  if (nextStyle === undefined) return;\n  if (!nextStyle) {\n    el.removeAttribute('style');\n  } else {\n    Object.keys(nextStyle).forEach((k) => {\n      el.style[k as any] = nextStyle[k as any] || '';\n    });\n    Object.keys(prevStyle).forEach((k) => {\n      if (!(k in nextStyle)) {\n        el.style[k as any] = '';\n      }\n    });\n  }\n}\n\nconst propMap: Record<string, boolean> = {\n  checked: true, muted: true, multiple: true, selected: true,\n};\n\nfunction setAttr(el: HTMLElement, key: string, value: any) {\n  if (propMap[key]) {\n    (el as any)[key] = value;\n  } else if (value == null) {\n    el.removeAttribute(key);\n  } else {\n    el.setAttribute(key, value);\n  }\n}\n\nexport function patchProps(el: HTMLElement, prevProps: Data, nextProps?: Data): void {\n  if (nextProps === undefined) return;\n  let prev;\n  let next;\n  Object.keys(nextProps).forEach((k) => {\n    prev = prevProps[k];\n    next = nextProps[k];\n    if (k === 'style') {\n      patchStyles(el, prev, next);\n    } else if (prev !== next) {\n      setAttr(el, k, next);\n    }\n  });\n  Object.keys(prevProps).forEach((k) => {\n    if (!(k in nextProps)) {\n      setAttr(el, k, undefined);\n    }\n  });\n}\n","import { Disposable } from '../types';\nimport {\n  DomListener, $, createSvg, getEventPath, removeNode, addClass,\n} from './dom';\n\nexport * from './drag';\nexport * from './rect';\nexport * from './dom';\nexport * from './is';\nexport * from './env';\nexport * from './emitter';\nexport * from './component';\nexport * from './patch';\n\nexport function clamp(n: number, lower = 0, upper = 1): number {\n  return Math.max(Math.min(n, upper), lower);\n}\n\nconst disposableMap: Map<any, Array<Disposable>> = new Map();\n\nexport function getDisposableMap(): Map<any, Array<Disposable>> {\n  return disposableMap;\n}\n\nexport function addDisposable<T extends Disposable>(key: any, disposable: T): T {\n  if (!disposableMap.has(key)) disposableMap.set(key, []);\n  disposableMap.get(key)!.push(disposable);\n  return disposable;\n}\n\nexport function dispose(key: any): void {\n  if (disposableMap.has(key)) {\n    disposableMap.get(key)!.forEach((item) => item.dispose());\n    disposableMap.delete(key);\n  }\n}\n\nexport function addDisposableListener<K extends keyof GlobalEventHandlersEventMap>(\n  key: any,\n  node: EventTarget,\n  type: K,\n  handler: (event: GlobalEventHandlersEventMap[K]) => void,\n  useCapture?: boolean): DomListener;\nexport function addDisposableListener(\n  key: any,\n  el: EventTarget,\n  type: string,\n  listener: EventListener,\n  options?: boolean | AddEventListenerOptions,\n): DomListener {\n  const domListener = new DomListener(el, type, listener, options);\n  if (key) addDisposable(key, domListener);\n  return domListener;\n}\n\nexport function throttle(fn: Function, ctx?: any): any {\n  let pending = false;\n  let first = true;\n  let args: typeof arguments | null = null;\n  return function () {\n    args = arguments;\n    if (first) {\n      first = false;\n      return fn.apply(ctx, args);\n    }\n\n    if (pending) return;\n    pending = true;\n\n    requestAnimationFrame(() => {\n      fn.apply(ctx, args);\n      pending = false;\n    });\n  };\n}\n\nexport function repeatStr(str: string, t: number): string {\n  const ret = [];\n  for (let i = 0; i < t; ++i) {\n    ret.push(str);\n  }\n  return ret.join('');\n}\n\nfunction padStart(v: string | number, len = 2, str = '0'): string {\n  v = String(v);\n  if (v.length >= 2) return v;\n\n  for (let i = 0, l = len - v.length; i < l; i++) {\n    v = str + v;\n  }\n\n  return v;\n}\n\nexport function formatTime(seconds: number): string {\n  // eslint-disable-next-line no-restricted-globals\n  if (!isFinite(seconds)) return '-';\n  if (seconds <= 0) return '0:00';\n\n  seconds = Math.round(seconds);\n  if (seconds < 60) return `0:${padStart(seconds)}`;\n  if (seconds < 3600) {\n    return `${Math.floor(seconds / 60)}:${padStart(seconds % 60)}`;\n  }\n\n  return `${Math.floor(seconds / 3600)}:${padStart(\n    Math.floor((seconds % 3600) / 60),\n  )}:${padStart(seconds % 60)}`;\n}\n\nexport const internalUtils = {\n  $, clamp, addDisposableListener, addDisposable, createSvg, dispose, getEventPath, removeNode, addClass,\n};\n","import {\n  addClass, Component, hide, removeClass, show,\n} from 'src/ts/utils';\n\nconst classLeft = 'tooltip-left';\nconst classRight = 'tooltip-right';\nconst classBottom = 'tooltip-bottom';\n\nexport class Tooltip extends Component {\n  constructor(container: HTMLElement, html?: string) {\n    super(container, '.tooltip_content');\n    addClass(container, 'tooltip');\n    if (html) this.html = html;\n  }\n\n  get html(): string {\n    return this.el.innerHTML;\n  }\n\n  set html(v: string) {\n    this.el.innerHTML = v;\n  }\n\n  resetPos(): void {\n    removeClass(this.el, classLeft);\n    removeClass(this.el, classRight);\n    removeClass(this.el, classBottom);\n  }\n\n  setBottom(): void {\n    addClass(this.el, classBottom);\n  }\n\n  setLeft(): void {\n    addClass(this.el, classLeft);\n  }\n\n  setRight(): void {\n    addClass(this.el, classRight);\n  }\n\n  hide(): void {\n    hide(this.el);\n  }\n\n  show(): void {\n    show(this.el);\n  }\n}\n","import { $ } from 'src/ts/utils';\nimport { ControlItem } from '..';\n\nexport const spacerControlItem = (): ControlItem => ({\n  id: 'spacer',\n  el: $('.spacer'),\n});\n","import { Player } from 'src/ts/player';\nimport {\n  $, addClass, addDisposable, Component, isString, patch,\n} from 'src/ts/utils';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { Disposable } from 'src/ts/types';\nimport { EVENT } from 'src/ts/constants';\nimport { ControlItem } from '..';\nimport { spacerControlItem } from './spacer';\n\nexport class ControlBar extends Component {\n  private prevItems: ControlItem[] = [];\n\n  private spacer = spacerControlItem();\n\n  constructor(container: HTMLElement, private player: Player, items?: (ControlItem | string)[], private position = 0) {\n    super(container, '.control_bar');\n    if (position === 2) addClass(this.el, 'control_bar-top');\n    if (items) {\n      const frag = document.createDocumentFragment();\n      items.forEach((item) => {\n        item = this.initControlItem(item) as ControlItem;\n        if (item) {\n          frag.appendChild(item.el);\n          this.prevItems.push(item);\n        }\n      });\n      this.updateTooltipPos();\n      this.el.appendChild(frag);\n    }\n  }\n\n  private getItem(item: ControlItem | string): ControlItem | void {\n    if (item === 'spacer') return this.spacer;\n    if (isString(item)) item = this.player.getControlItem(item) as ControlItem;\n    if (!item || (item.isSupport && !item.isSupport(this.player))) return;\n    return item;\n  }\n\n  private initControlItem = (item: ControlItem | string): ControlItem | void => {\n    item = this.getItem(item) as ControlItem;\n    if (item) {\n      if (!item.el) item.el = $();\n      if (item.mounted) {\n        if (item.tooltip) {\n          item.tooltip.resetPos();\n          if (this.position === 2) item.tooltip.setBottom();\n        }\n        if (item.update) item.update(this.position);\n        return;\n      }\n\n      let tooltip: Tooltip | undefined;\n      if (item.tip) tooltip = new Tooltip(item.el, item.tip);\n      if (item.init) {\n        if (item.init.length > 2 && !tooltip) tooltip = new Tooltip(item.el);\n        item.init(this.player, this.position, tooltip as Tooltip);\n      }\n      if (item.dispose) addDisposable(this, item as Disposable);\n      if (!tooltip) tooltip = item.tooltip;\n      if (tooltip) {\n        tooltip.resetPos();\n        if (this.position === 2) tooltip.setBottom();\n      }\n\n      item.mounted = true;\n      return item;\n    }\n  }\n\n  private onHideControlItem = (item: ControlItem) => {\n    if (item.hide) item.hide();\n  }\n\n  updateTooltipPos() {\n    const last = this.prevItems.length - 1;\n    this.prevItems.forEach((item, i) => {\n      if (item.tooltip) {\n        item.tooltip.resetPos();\n        if (this.position === 2) item.tooltip.setBottom();\n        if (i === 0) {\n          item.tooltip.setLeft();\n        } else if (i === last) {\n          item.tooltip.setRight();\n        }\n      }\n    });\n  }\n\n  getItems(): ControlItem[] {\n    return this.prevItems;\n  }\n\n  setItems(items?: ControlItem[]): void {\n    if (items) {\n      this.prevItems = items;\n    }\n  }\n\n  update(nextItems: (string | ControlItem)[]) {\n    if (nextItems) {\n      const items: ControlItem[] = [];\n      nextItems.forEach((item) => {\n        item = this.getItem(item) as ControlItem;\n        if (item) items.push(item);\n      });\n\n      patch(this.prevItems, items, this.el, {\n        mount: this.initControlItem,\n        unmount: this.onHideControlItem,\n      });\n      this.prevItems = items;\n      this.updateTooltipPos();\n      this.player.emit(EVENT.CONTROL_ITEM_UPDATE);\n    }\n  }\n}\n","import { EVENT } from 'src/ts/constants';\nimport { Player } from 'src/ts/player';\nimport { Disposable } from 'src/ts/types';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport {\n  $, addClass, addDisposable, addDisposableListener, Component, containClass, removeClass,\n} from 'src/ts/utils';\nimport { ControlBar } from './items';\n\nconst classHide = 'control-hide';\nconst classBgHide = 'control_bg-hide';\nconst classBarHide = 'control_bar-hide';\n\nexport interface ControlItem extends Partial<Disposable> {\n  el: HTMLElement;\n  id?: any;\n  tip?: string;\n  tooltip?: Tooltip;\n  mounted?: boolean;\n  init?: (player: Player, position: number, tooltip: Tooltip) => void;\n  update?: (position: number) => void;\n  hide?: () => void;\n  isSupport?: (player: Player) => boolean;\n  [key: string]: any;\n}\n\ntype BpControl = { bp: number, controls: (ControlItem| string)[][] }\n\nexport class Control extends Component {\n  private readonly bgElement: HTMLElement;\n\n  private showTimer: any;\n\n  private delayHidTime = 3000;\n\n  private latch = 0;\n\n  private controlBars: ControlBar[] = [];\n\n  private controls: BpControl[]\n\n  currentBp: number | undefined;\n\n  constructor(container: HTMLElement, private player: Player) {\n    super(container, '.control');\n    this.bgElement = container.appendChild($('.control_bg'));\n\n    this.controlBars[1] = addDisposable(this, new ControlBar(this.el, player, player.opts.controls[1], 1));\n    this.controlBars[0] = addDisposable(this, new ControlBar(this.el, player, player.opts.controls[0], 0));\n    this.controlBars[2] = addDisposable(this, new ControlBar(container, player, player.opts.controls[2], 2));\n\n    const bpControls = player.opts.bpControls;\n    this.controls = Object.keys(bpControls)\n      .map((bp) => ({ bp: Number(bp), controls: bpControls[bp] }))\n      .sort((a, b) => a.bp - b.bp);\n\n    if (this.controls.length) {\n      addDisposable(this, player.on(EVENT.UPDATE_SIZE, this.emitAndUpdateBp));\n      addDisposable(this, player.on(EVENT.MOUNTED, this.emitAndUpdateBp));\n    }\n\n    addDisposable(this, player.on(EVENT.PAUSE, () => {\n      if (!player.opts.isTouch) this.show();\n    }));\n    addDisposable(this, player.on(EVENT.PLAY, () => {\n      if (!player.opts.isTouch) this.showTransient();\n    }));\n    addDisposableListener(this, player.el, 'mousemove', this.showTransient);\n    addDisposableListener(this, player.el, 'mouseleave', this.tryHide);\n    this.showTransient();\n  }\n\n  get isActive(): boolean {\n    return !containClass(this.el, classHide);\n  }\n\n  private filterItems(items: ControlItem[], toFilter: ControlItem[]): ControlItem[] | undefined {\n    if (items.length && toFilter.length) {\n      const map = new Map();\n      items.forEach((i) => map.set(i, true));\n      return toFilter.filter((item) => !map.get(item));\n    }\n  }\n\n  private emitAndUpdateBp = (): BpControl | undefined => {\n    const width = this.player.rect.width;\n    const matched = this.controls.find((c) => width <= c.bp);\n    // eslint-disable-next-line eqeqeq\n    if (this.currentBp != matched?.bp) {\n      this.currentBp = matched?.bp;\n      const controls = matched?.controls || this.player.opts.controls;\n      this.updateItems(controls[0], 0);\n      this.updateItems(controls[1], 1);\n      this.updateItems(controls[2], 2);\n      this.player.emit(EVENT.BP_CHANGE, this.currentBp);\n    }\n    return matched;\n  }\n\n  updateItems(items: Parameters<ControlBar['update']>[0], index = 0): void {\n    const curBar = this.controlBars[index];\n    if (!curBar) return;\n    curBar.update(items);\n    const barItems = curBar.getItems();\n    this.controlBars.forEach((bar, i) => {\n      if (i === index) return;\n      bar.setItems(this.filterItems(barItems, bar.getItems()));\n      bar.updateTooltipPos();\n    });\n  }\n\n  require(): void {\n    this.latch++;\n  }\n\n  release(): void {\n    if (this.latch) {\n      this.latch--;\n      this.tryHide();\n    }\n  }\n\n  show = (): void => {\n    removeClass(this.el, classHide);\n    removeClass(this.bgElement, classBgHide);\n    removeClass(this.controlBars[2].el, classBarHide);\n    this.player.el.style.cursor = '';\n    this.player.emit(EVENT.CONTROL_SHOW);\n  }\n\n  hide = (): void => {\n    addClass(this.el, classHide);\n    addClass(this.bgElement, classBgHide);\n    addClass(this.controlBars[2].el, classBarHide);\n    this.player.el.style.cursor = 'none';\n    this.player.emit(EVENT.CONTROL_HIDE);\n  }\n\n  showTransient = (): void => {\n    this.show();\n    clearTimeout(this.showTimer);\n    this.showTimer = setTimeout(this.tryHide, this.delayHidTime);\n  }\n\n  tryHide = (): void => {\n    if (this.player.video.played.length && !this.player.paused && !this.latch) {\n      this.hide();\n    }\n  }\n}\n","import { CLASS_PLAYER, EVENT } from 'src/ts/constants';\nimport { Player } from 'src/ts/player';\nimport {\n  addClass, addDisposable, Component, containClass, removeClass, repeatStr,\n} from 'src/ts/utils';\n\nconst classLoading = '-loading';\nexport class Loading extends Component {\n  private showTimer: any;\n\n  private startWaitingTime = 0;\n\n  constructor(container: HTMLElement, private player: Player) {\n    super(container, player.opts.loadingElement || '.loading', undefined, player.opts.loadingElement ? undefined : repeatStr('<i></i>', 12));\n\n    addDisposable(this, player.on(EVENT.CANPLAY, this.hide));\n    addDisposable(this, player.on(EVENT.WAITING, () => {\n      if (!this.player.currentTime) return;\n      this.tryShow();\n    }));\n    addDisposable(this, player.on(EVENT.STALLED, () => {\n      const curTime = this.player.currentTime;\n      if (!curTime) return;\n\n      let show = true;\n      this.player.eachBuffer((start, end) => {\n        if (start <= curTime && end > curTime) {\n          show = false;\n          return true;\n        }\n      });\n\n      if (show) this.tryShow();\n    }));\n  }\n\n  get isActive(): boolean {\n    return containClass(this.player.el, classLoading, CLASS_PLAYER);\n  }\n\n  private _checkCanplay = (): void => {\n    if (this.startWaitingTime !== this.player.currentTime) {\n      this.hide();\n      clearTimeout(this.showTimer);\n      this.player.off(EVENT.TIME_UPDATE, this._checkCanplay);\n    }\n  };\n\n  private checkCanplay(): void {\n    this.startWaitingTime = this.player.currentTime;\n    this.player.off(EVENT.TIME_UPDATE, this._checkCanplay);\n    this.player.on(EVENT.TIME_UPDATE, this._checkCanplay);\n  }\n\n  private tryShow(): void {\n    this.checkCanplay();\n    clearTimeout(this.showTimer);\n    this.showTimer = setTimeout(this.show, 100);\n  }\n\n  show = (): void => {\n    addClass(this.player.el, classLoading, CLASS_PLAYER);\n    this.player.emit(EVENT.LOADING_SHOW);\n  }\n\n  hide = () => {\n    removeClass(this.player.el, classLoading, CLASS_PLAYER);\n    this.player.emit(EVENT.LOADING_HIDE);\n  }\n}\n","import { Player } from 'src/ts/player';\nimport {\n  $, addClass, show, hide, addDisposableListener, Rect, Component,\n} from 'src/ts/utils';\n\nexport interface ContextMenuItem {\n  id?: string;\n  html?: string;\n  disabled?: boolean;\n  invisible?: boolean;\n  checked?: boolean;\n  init?: (player: Player, item: ContextMenuItem) => void;\n  show?: (player: Player, item: ContextMenuItem) => void;\n  click?: (player: Player, item: ContextMenuItem) => void;\n}\n\nexport class ContextMenu extends Component {\n  private rect: Rect;\n\n  private showed = false;\n\n  constructor(\n    container: HTMLElement,\n    private player: Player,\n    private items: ContextMenuItem[],\n  ) {\n    super(container, '.contextmenu');\n    hide(this.el);\n\n    this.rect = new Rect(this.el, player);\n\n    this.items.forEach((item) => item.init && item.init(player, item));\n\n    addDisposableListener(this, player.el, 'contextmenu', (ev: MouseEvent) => {\n      this.hide();\n      if (!player.opts.contextMenuToggle || !this.showed) {\n        if (this.renderItems()) {\n          ev.preventDefault();\n          ev.stopPropagation();\n\n          show(this.el);\n          this.rect.update();\n          this.player.rect.update();\n\n          const { width, height } = this.rect;\n          const { x, y } = this.player.rect;\n          const { innerWidth, innerHeight } = window;\n          const { clientX, clientY } = ev;\n\n          let left = clientX - x;\n          let top = clientY - y;\n\n          if (clientX + width > innerWidth) left = innerWidth - width;\n          if (clientY + height > innerHeight) top = innerHeight - height;\n\n          this.applyStyle({ left: `${left}px`, top: `${top}px` });\n        }\n      }\n\n      this.showed = !this.showed;\n    });\n\n    addDisposableListener(this, document, 'click', () => {\n      this.showed = false;\n      this.hide();\n    });\n  }\n\n  private getDomNodes(): HTMLElement[] {\n    return this.items.filter((x) => x && !x.invisible).map((item) => {\n      const el = $('.contextmenu_item');\n      if (item.show) item.show(this.player, item);\n      if (item.html) el.innerHTML = item.html;\n      if (item.disabled) addClass(el, 'contextmenu_item-disabled');\n      if (item.checked) addClass(el, 'contextmenu_item-checked');\n      if (item.click) {\n        el.addEventListener('click', () => (item as any).click(this.player, item), false);\n      }\n      return el;\n    });\n  }\n\n  private renderItems(): boolean {\n    const items = this.getDomNodes();\n    if (!items.length) return false;\n    this.el.textContent = '';\n    const frag = document.createDocumentFragment();\n    items.forEach((item) => frag.appendChild(item));\n    this.el.appendChild(frag);\n    return true;\n  }\n\n  get isActive(): boolean {\n    return this.el.style.display !== 'none';\n  }\n\n  hide = () => {\n    hide(this.el);\n  }\n}\n","import { Disposable } from 'src/ts/types';\nimport { addClass, Component } from 'src/ts/utils';\n\ntype Position = 'center' | 'left-top' | 'right-top' | 'left-bottom' | 'right-bottom'\n\nexport class ToastItem extends Component {\n  timer!: any;\n\n  constructor(\n    container: HTMLElement,\n    html: string,\n    readonly position: Position = 'center',\n  ) {\n    super(container, '.toast');\n    addClass(this.el, `toast-${position}`);\n    this.el.innerHTML = html;\n  }\n\n  dispose(): void {\n    super.dispose();\n    clearTimeout(this.timer);\n  }\n}\n\nexport class Toast implements Disposable {\n  private toasts: ToastItem[] = [];\n\n  private container: HTMLElement;\n\n  constructor(container: HTMLElement) {\n    this.container = container;\n  }\n\n  show(html: string, position?: Position, timeout = 3000): ToastItem {\n    let toastItem = this.toasts.find((t) => t.position === position);\n\n    if (toastItem) {\n      clearTimeout(toastItem.timer);\n      toastItem.el.innerHTML = html;\n    } else {\n      toastItem = new ToastItem(this.container, html, position);\n      this.toasts.push(toastItem);\n    }\n\n    if (timeout > 0) {\n      toastItem.timer = setTimeout(this.close.bind(this, toastItem), timeout);\n    }\n\n    return toastItem;\n  }\n\n  close(toastItem?: ToastItem): void {\n    if (toastItem) {\n      this.toasts = this.toasts.filter((x) => x !== toastItem);\n      return toastItem.dispose();\n    }\n\n    this.toasts.forEach((item) => item.dispose());\n    this.toasts = [];\n  }\n\n  dispose(): void {\n    if (!this.toasts) return;\n    this.close();\n    this.toasts = null!;\n    this.container = null!;\n  }\n}\n","import { CLASS_PLAYER, EVENT } from '../constants';\nimport { Player } from '../player';\nimport { Disposable } from '../types';\nimport {\n  addClass, addDisposable, addDisposableListener, dispose, isFunction, isIOS, removeClass,\n} from '../utils';\n\nconst CLASS_FULL = '-full';\n\nexport class Fullscreen implements Disposable {\n  private target!: HTMLElement;\n\n  private readonly prefix = this.getPrefix();\n\n  constructor(private player: Player) {\n    addDisposableListener(this, document, this.prefix === 'ms' ? 'MSFullscreenChange' : `${this.prefix}fullscreenchange` as any, () => {\n      let evt = '';\n      if (this.isActive) {\n        this.addClass();\n        evt = EVENT.ENTER_FULLSCREEN;\n      } else {\n        this.removeClass();\n        evt = EVENT.EXIT_FULLSCREEN;\n      }\n      this.player.emit(evt);\n      this.player.emit(EVENT.UPDATE_SIZE);\n    });\n\n    addDisposable(this, player.on(EVENT.UPDATE_OPTIONS, () => {\n      this.disableDblclick();\n    }));\n\n    this.setTarget();\n    if (this.isActive) this.addClass();\n\n    if (!player.opts.isTouch) {\n      this.enableDblclick();\n    }\n  }\n\n  private getPrefix(): string {\n    if (isFunction(document.exitFullscreen)) return '';\n\n    let prefix = '';\n    ['webkit', 'moz', 'ms'].forEach((p) => {\n      if (\n        isFunction((document as any)[`${p}ExitFullscreen`])\n        || isFunction((document as any)[`${p}CancelFullScreen`])\n      ) {\n        prefix = p;\n      }\n    });\n\n    return prefix;\n  }\n\n  get requestFullscreen(): Element['requestFullscreen'] {\n    return (\n      HTMLElement.prototype.requestFullscreen\n      || (HTMLElement.prototype as any).webkitRequestFullscreen\n      || (HTMLElement.prototype as any).mozRequestFullScreen\n      || (HTMLElement.prototype as any).msRequestFullscreen\n    );\n  }\n\n  get exitFullscreen(): Document['exitFullscreen'] {\n    return (\n      HTMLDocument.prototype.exitFullscreen\n      || (HTMLDocument.prototype as any).webkitExitFullscreen\n      || (HTMLDocument.prototype as any).cancelFullScreen\n      || (HTMLDocument.prototype as any).mozCancelFullScreen\n      || (HTMLDocument.prototype as any).msExitFullscreen\n    );\n  }\n\n  get fullscreenElement(): HTMLElement {\n    return (\n      document.fullscreenElement\n      || (document as any).mozFullScreenElement\n      || (document as any).msFullscreenElement\n      || (document as any).webkitFullscreenElement\n    );\n  }\n\n  get isActive(): boolean {\n    return this.fullscreenElement === this.target;\n  }\n\n  private addClass(): void {\n    addClass(this.player.el, CLASS_FULL, CLASS_PLAYER);\n  }\n\n  private removeClass(): void {\n    removeClass(this.player.el, CLASS_FULL, CLASS_PLAYER);\n  }\n\n  enableDblclick(): void {\n    this.player.video.addEventListener('dblclick', this.toggle);\n  }\n\n  disableDblclick(): void {\n    this.player.video.removeEventListener('dblclick', this.toggle);\n  }\n\n  setTarget(dom?: HTMLElement, video?: HTMLVideoElement): void {\n    this.target = (dom && isIOS ? video : dom) || (isIOS ? this.player.video : this.player.el);\n    if (this.isActive) this.enter();\n  }\n\n  enter(): void {\n    if (isIOS) {\n      (this.target as any).webkitEnterFullscreen();\n    } else {\n      this.requestFullscreen.call(this.target, { navigationUI: 'hide' });\n      this.player.emit(EVENT.UPDATE_SIZE);\n    }\n  }\n\n  exit(): boolean {\n    if (!this.isActive) return false;\n    if (isIOS) {\n      (this.target as any).webkitExitFullscreen();\n    } else {\n      this.exitFullscreen.call(document);\n      this.player.emit(EVENT.UPDATE_SIZE);\n    }\n    return true;\n  }\n\n  toggle = (): void => {\n    if (this.isActive) {\n      this.exit();\n    } else {\n      this.enter();\n    }\n  }\n\n  dispose(): void {\n    if (!this.player) return;\n    this.player.off(EVENT.ENTER_FULLSCREEN);\n    this.player.off(EVENT.EXIT_FULLSCREEN);\n    this.disableDblclick();\n    this.player = null!;\n    dispose(this);\n  }\n}\n","import { CLASS_PLAYER, EVENT } from '../constants';\nimport { Player } from '../player';\nimport { Disposable } from '../types';\nimport { addClass, containClass, removeClass } from '../utils';\n\nconst classFull = '-web-full';\n\nexport class WebFullscreen implements Disposable {\n  private player: Player\n\n  constructor(player: Player) {\n    this.player = player;\n  }\n\n  get isActive(): boolean {\n    return containClass(this.player.el, classFull, CLASS_PLAYER);\n  }\n\n  enter(): void {\n    addClass(this.player.el, classFull, CLASS_PLAYER);\n    this.player.emit(EVENT.WEB_ENTER_FULLSCREEN);\n    this.player.emit(EVENT.UPDATE_SIZE);\n  }\n\n  exit(): boolean {\n    if (!this.isActive) return false;\n    removeClass(this.player.el, classFull, CLASS_PLAYER);\n    this.player.emit(EVENT.WEB_EXIT_FULLSCREEN);\n    this.player.emit(EVENT.UPDATE_SIZE);\n    return true;\n  }\n\n  toggle = (): void => {\n    if (this.isActive) {\n      this.exit();\n    } else {\n      this.enter();\n    }\n  }\n\n  dispose(): void {\n    if (!this.player) return;\n    this.player.off(EVENT.WEB_ENTER_FULLSCREEN);\n    this.player.off(EVENT.WEB_EXIT_FULLSCREEN);\n    this.player = null!;\n  }\n}\n","import {\n  $, addClass, addDisposableListener, Component, getEventPath, removeClass,\n} from 'src/ts/utils';\n\nconst classActive = 'popover-active';\nconst classBottom = 'popover_panel-bottom';\nexport class Popover extends Component {\n  readonly panelElement: HTMLElement;\n\n  readonly maskElement: HTMLElement;\n\n  constructor(\n    container: HTMLElement,\n    private readonly onHide?: (ev?: MouseEvent) => void,\n    style?: Partial<CSSStyleDeclaration>,\n    left?: boolean,\n  ) {\n    super(container, '.popover');\n    this.maskElement = this.el.appendChild($('.popover_mask'));\n    this.panelElement = this.el.appendChild($('.popover_panel'));\n\n    if (style) this.applyPanelStyle(style);\n\n    if (left) addClass(this.panelElement, 'popover_panel-left');\n\n    addDisposableListener(this, this.maskElement, 'click', (ev: MouseEvent) => {\n      ev.stopPropagation();\n      if (getEventPath(ev).includes(this.panelElement)) return;\n      this.hide(ev);\n    });\n  }\n\n  resetPos() {\n    removeClass(this.panelElement, classBottom);\n  }\n\n  setBottom() {\n    addClass(this.panelElement, classBottom);\n  }\n\n  applyPanelStyle(style: Partial<CSSStyleDeclaration>): void {\n    Object.assign(this.panelElement.style, style);\n  }\n\n  show() {\n    addClass(this.el, classActive);\n  }\n\n  hide(ev?: MouseEvent) {\n    removeClass(this.el, classActive);\n    if (this.onHide) this.onHide(ev);\n  }\n}\n","import {\n  addDisposableListener, Component, containClass, toggleClass,\n} from 'src/ts/utils';\n\nconst activeClass = 'switch-active';\nexport class Switch extends Component {\n  constructor(container: HTMLElement, value?: boolean, change?: (v: boolean) => void) {\n    super(container, '.switch');\n    this.toggle(value || false);\n\n    if (change) {\n      addDisposableListener(this, this.el, 'click', () => {\n        this.toggle();\n        change(containClass(this.el, activeClass));\n      });\n    }\n  }\n\n  toggle(value?: boolean): void {\n    toggleClass(this.el, activeClass, value);\n  }\n}\n","import { isBrowser } from '../utils';\n\nconst data: Record<string, Record<string, string>> = Object.create(null);\n\nexport const FULL_SCREEN = 'Fullscreen';\nexport const EXIT_FULL_SCREEN = 'Exit fullscreen';\nexport const WEB_FULL_SCREEN = 'Web fullscreen';\nexport const WEB_EXIT_FULL_SCREEN = 'Web exit fullscreen';\nexport const SETTINGS = 'Settings';\nexport const PLAY = 'Play';\nexport const PAUSE = 'Pause';\nexport const MUTE = 'Mute';\nexport const UNMUTE = 'Unmute';\nexport const NORMAL = 'Normal';\nexport const SPEED = 'Speed';\nexport const PIP = 'Picture in Picture';\nexport const LOOP = 'Loop';\nexport const VOLUME = 'Volume';\nexport const AIRPLAY = 'Airplay';\nexport const LIVE = 'Live';\n\nexport const I18n = {\n  defaultLang: '',\n  currentLang: '',\n  t(key: string, lang?: string): string {\n    return data[lang || I18n.currentLang || I18n.defaultLang]?.[key] || key;\n  },\n  add(lang: string, transData: Record<string, string>): void {\n    data[lang.toLowerCase()] = { ...data[lang.toLowerCase()], ...transData };\n    I18n.fallback();\n  },\n  fallback(): void {\n    Object.keys(data).forEach((k) => {\n      data[k.split('-')[0]] = data[k];\n    });\n  },\n  setCurrentLang(lang?: string): void {\n    this.currentLang = lang || navigator.language || (navigator as any).userLanguage;\n    if (this.currentLang) this.currentLang = this.currentLang.toLowerCase();\n  },\n  setDefaultLang(lang?: string): void {\n    this.defaultLang = (lang || '').toLowerCase();\n  },\n};\n\nI18n.add('zh-cn', {\n  [FULL_SCREEN]: '',\n  [EXIT_FULL_SCREEN]: '',\n  [WEB_FULL_SCREEN]: '',\n  [WEB_EXIT_FULL_SCREEN]: '',\n  [SETTINGS]: '',\n  [PLAY]: '',\n  [PAUSE]: '',\n  [MUTE]: '',\n  [UNMUTE]: '',\n  [NORMAL]: '',\n  [SPEED]: '',\n  [PIP]: '',\n  [LOOP]: '',\n  [VOLUME]: '',\n  [AIRPLAY]: '',\n  [LIVE]: '',\n});\nif (isBrowser) I18n.setCurrentLang();\n","import { addClass, createSvg } from '../utils';\n\nconst play = 'M6 2.914v18.172L20.279 12 6 2.914z';\nconst pause = 'M14.333 20.133H19V3.8h-4.667M5 20.133h4.667V3.8H5v16.333z';\nconst volume = 'M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z';\nconst muted = 'M3,9H7L12,4V20L7,15H3V9M16.59,12L14,9.41L15.41,8L18,10.59L20.59,8L22,9.41L19.41,12L22,14.59L20.59,16L18,13.41L15.41,16L14,14.59L16.59,12Z';\nconst cog = 'M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z';\nconst webEnterFullscreen = 'M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z';\nconst webExitFullscreen = 'M19.5,3.09L15,7.59V4H13V11H20V9H16.41L20.91,4.5L19.5,3.09M4,13V15H7.59L3.09,19.5L4.5,20.91L9,16.41V20H11V13H4Z';\nconst enterFullscreen = 'M3 3h6.429v2.571H5.57V9.43H3V3m11.571 0H21v6.429h-2.571V5.57H14.57V3m3.858 11.571H21V21h-6.429v-2.571h3.858V14.57m-9 3.858V21H3v-6.429h2.571v3.858H9.43z';\nconst exitFullscreen = 'M14.571 14.571H21v2.572h-3.857V21H14.57v-6.429M3 14.571h6.429V21H6.857v-3.857H3V14.57M6.857 3H9.43v6.429H3V6.857h3.857V3M21 6.857V9.43h-6.429V3h2.572v3.857H21z';\nconst airplay = 'M6 22h12l-6-6m9-13H3a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H3V5h18v12h-4v2h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z';\n\nfunction createIcon(icon: string) {\n  return (cls?: string) => {\n    const svg = createSvg('icon', icon);\n    if (cls) addClass(svg, cls);\n    return svg;\n  };\n}\n\nconst Icon: {\n  // eslint-disable-next-line no-use-before-define\n  register: typeof registerIcon;\n} & {\n  [key: string]: <T extends Element>(cls?: string) => T;\n} = Object.create(null);\n\nfunction registerIcon(iconName: string, icon: (cls?: string) => any): void {\n  Icon[iconName] = icon;\n}\n\nObject.defineProperty(Icon, 'register', { value: registerIcon });\n\nregisterIcon('play', createIcon(play));\nregisterIcon('pause', createIcon(pause));\nregisterIcon('volume', createIcon(volume));\nregisterIcon('muted', createIcon(muted));\nregisterIcon('cog', createIcon(cog));\nregisterIcon('webEnterFullscreen', createIcon(webEnterFullscreen));\nregisterIcon('webExitFullscreen', createIcon(webExitFullscreen));\nregisterIcon('enterFullscreen', createIcon(enterFullscreen));\nregisterIcon('exitFullscreen', createIcon(exitFullscreen));\nregisterIcon('airplay', createIcon(airplay));\n\nexport { Icon };\n","import { Popover } from 'src/ts/components/popover';\nimport { Switch } from 'src/ts/components/switch';\nimport { EVENT } from 'src/ts/constants';\nimport { I18n, SETTINGS } from 'src/ts/features/i18n';\nimport { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport {\n  $, addClass, addDisposable, addDisposableListener, Component, getEventPath, measureElementSize, removeClass,\n} from 'src/ts/utils';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { ControlItem } from '..';\n\nexport interface SettingItemOption<T = any> {\n  html?: string;\n  selectedHtml?: string;\n  value?: T;\n}\n\nexport interface SettingItem<T = any> {\n  id?: string;\n  html?: string;\n  type?: 'switch' | 'select';\n  checked?: boolean;\n  options?: SettingItemOption<T>[];\n  value?: T;\n  init?: (player: Player, item: SettingItem) => void;\n  change?: (value: T, player: Player, item: SettingItem) => void;\n  _switch?: Switch;\n  _selectedElement?: HTMLElement;\n  _optionElements?: HTMLElement[];\n  _optionElement?: HTMLElement;\n  [key: string]: any;\n}\n\nexport class SettingPanel extends Component {\n  constructor(container: HTMLElement) {\n    super(container, '.control_setting_panel');\n  }\n}\n\nconst classActive = 'control_setting-active';\nconst classOptionActive = 'control_setting_option-active';\n\nclass Setting extends Component implements ControlItem {\n  readonly id = 'settings';\n\n  private player!: Player;\n\n  private items!: SettingItem[];\n\n  private homeElement!: HTMLElement;\n\n  private popover!: Popover;\n\n  private currentOptionElement!: HTMLElement;\n\n  tooltip!: Tooltip;\n\n  tip = I18n.t(SETTINGS);\n\n  init(player: Player, position: number, tooltip: Tooltip) {\n    this.player = player;\n    this.tooltip = tooltip;\n    addClass(this.el, 'control_setting');\n    this.items = player.__settingItems;\n    this.el.appendChild(Icon.cog());\n    this.popover = new Popover(this.el, this.hide, { willChange: 'width, height' });\n    this.homeElement = this.popover.panelElement.appendChild($());\n\n    this.setPos(position);\n\n    addDisposableListener(this, this.el, 'click', this.show);\n    addDisposable(this, player.on(EVENT.MOUNTED, () => this.showHomePage()));\n    this.items.forEach((item) => item.init && item.init(player, item));\n    this.renderHome();\n  }\n\n  update(position: number): void {\n    this.setPos(position);\n  }\n\n  private setPos(position: number): void {\n    this.popover.resetPos();\n    if (position === 2) this.popover.setBottom();\n  }\n\n  private renderHome(): void {\n    this.items.forEach((item) => {\n      const el = (!item._switch && !item._selectedElement && !item._optionElement) ? $('.control_setting_item') : null;\n\n      if (el) {\n        el.appendChild($(undefined, undefined, item.html));\n        if (item.type !== 'switch') el.appendChild($('.spacer'));\n      }\n\n      if (item.type === 'switch') {\n        if (!item._switch) item._switch = new Switch(el!, item.checked);\n      } else {\n        if (!item.options || !item.options.length) return;\n        if (!item._selectedElement) {\n          addClass(el!, 'control_setting_item-select');\n          item._selectedElement = el!.appendChild($());\n        }\n\n        const opt = item.options.find((x) => x.value === item.value);\n        if (!opt) return;\n        item._selectedElement.innerHTML = opt.selectedHtml || opt.html || '';\n      }\n\n      if (item._optionElement) {\n        item._optionElement.style.display = 'none';\n      }\n\n      if (el) {\n        el.addEventListener('click', this.onItemClick(item));\n        this.homeElement.appendChild(el);\n      }\n    });\n  }\n\n  private renderOptions(): void {\n    this.items.forEach((item) => {\n      if (item.type === 'switch') return;\n\n      if (!item._optionElement) {\n        item._optionElement = this.popover.panelElement.appendChild($());\n        const back = item._optionElement.appendChild($('.control_setting_item.control_setting_back'));\n        back.innerHTML = item.html || '';\n        back.addEventListener('click', this.back(item));\n      }\n\n      if (!item._optionElements && item.options) {\n        item._optionElements = item.options.map((opt) => {\n          const el = item._optionElement!.appendChild($('.control_setting_option', undefined, opt.html));\n          el.addEventListener('click', this.onOptionClick(item, opt));\n          return el;\n        });\n      }\n\n      if (item._optionElements) {\n        item._optionElements.forEach((el, i) => {\n          removeClass(el, classOptionActive);\n          if (item.value === item.options![i].value) {\n            addClass(el, classOptionActive);\n          }\n        });\n      }\n\n      item._optionElement.style.display = 'none';\n    });\n  }\n\n  private onItemClick = (item: SettingItem) => () => {\n    if (item.type === 'switch') {\n      item.checked = !item.checked;\n      item._switch!.toggle(item.checked);\n      if (item.change) item.change(item.checked, this.player, item);\n    } else {\n      this.renderOptions();\n      this.showOptionPage(item._optionElement as HTMLElement);\n    }\n  }\n\n  private onOptionClick = (item: SettingItem, option: SettingItemOption) => () => {\n    if (item.value !== option.value) {\n      item.value = option.value;\n      if (item.change) item.change(option.value, this.player, item);\n    }\n    this.renderHome();\n    this.showHomePage(item._optionElement as HTMLElement);\n  }\n\n  private back = (item: SettingItem) => () => {\n    this.showHomePage(item._optionElement as HTMLElement);\n  }\n\n  private showOptionPage(opt: HTMLElement): void {\n    this.homeElement.style.display = 'none';\n    opt.style.display = '';\n\n    const { width, height } = measureElementSize(opt);\n\n    this.popover.applyPanelStyle({\n      width: `${width}px`,\n      height: `${height}px`,\n    });\n\n    this.currentOptionElement = opt;\n  }\n\n  private showHomePage(opt?: HTMLElement): void {\n    if (opt) opt.style.display = 'none';\n\n    this.homeElement.style.display = '';\n\n    const { width, height } = measureElementSize(this.homeElement);\n\n    this.popover.applyPanelStyle({\n      width: `${width}px`,\n      height: `${height}px`,\n    });\n  }\n\n  show = (ev?: MouseEvent) => {\n    if (ev && getEventPath(ev).includes(this.popover.el)) return;\n    this.tooltip.hide();\n    this.renderHome();\n    this.popover.show();\n    this.homeElement.style.display = '';\n    addClass(this.el, classActive);\n  }\n\n  hide = (ev?: MouseEvent) => {\n    if (ev) ev.stopPropagation();\n\n    this.tooltip.show();\n    removeClass(this.el, classActive);\n\n    if (this.currentOptionElement) {\n      setTimeout(() => this.showHomePage(this.currentOptionElement), 200);\n    }\n  }\n}\n\nexport const settingControlItem = () => new Setting();\n","import { Player } from '../player';\nimport { Disposable } from '../types';\nimport { addDisposableListener, dispose, isNumber } from '../utils';\nimport { VOLUME, I18n } from './i18n';\n\nexport type ShortcutHandler = (player: Player) => void;\n\nconst editableTagNames = ['input', 'textarea', 'select'];\n\nexport class Shortcut implements Disposable {\n  private map: Record<string, ShortcutHandler>;\n\n  constructor(private player: Player, enable: boolean) {\n    this.map = Object.create(null);\n\n    const showVolume = (p: Player) => p.toast.show(`${I18n.t(VOLUME)} ${Math.round(p.volume * 100)}%`, 'left-bottom', 500);\n\n    this.register(27, (p) => {\n      if (!p.fullscreen.exit()) p.webFullscreen.exit();\n    });\n    this.register(32, (p) => p.toggle());\n    this.register(37, (p) => {\n      p.rewind();\n      p.toast.show(`- ${p.opts.seekStep}s`, 'left-bottom', 500);\n    });\n    this.register(38, (p) => {\n      p.incVolume();\n      showVolume(p);\n    });\n    this.register(39, (p) => {\n      p.forward();\n      p.toast.show(`+ ${p.opts.seekStep}s`, 'left-bottom', 500);\n    });\n    this.register(40, (p) => {\n      p.decVolume();\n      showVolume(p);\n    });\n\n    if (enable) this.enable();\n  }\n\n  private onKeyDown = (ev: KeyboardEvent) => {\n    if (ev.altKey || ev.ctrlKey || ev.metaKey || ev.shiftKey) return;\n    const focused = document.activeElement;\n\n    if (focused) {\n      const tag = focused.tagName.toLowerCase();\n      const editable = focused.getAttribute('contenteditable');\n      if (editableTagNames.indexOf(tag) > -1 || editable || editable === '') {\n        return;\n      }\n    }\n\n    const code = ev.keyCode ? ev.keyCode : ev.which;\n\n    if (!isNumber(code)) return;\n\n    let handled = false;\n    if (this.map[code]) {\n      this.map[code](this.player);\n      handled = true;\n      this.player.control.showTransient();\n    }\n\n    if (handled) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n  }\n\n  register(keyCode: number, handler: ShortcutHandler): void {\n    this.map[keyCode] = handler;\n  }\n\n  unregister(keyCode: number): boolean {\n    return delete this.map[keyCode];\n  }\n\n  dispose(): void {\n    if (!this.map) return;\n    dispose(this);\n    this.map = null!;\n  }\n\n  enable(): void {\n    this.disable();\n    addDisposableListener(this, this.player.el, 'keydown', this.onKeyDown);\n  }\n\n  disable(): void {\n    dispose(this);\n  }\n}\n","import {\n  addDisposable, addDisposableListener, Component, hide, show,\n} from 'src/ts/utils';\nimport { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport { EVENT } from 'src/ts/constants';\nimport { I18n, PAUSE, PLAY } from 'src/ts/features/i18n';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { ControlItem } from '..';\n\nclass Play extends Component implements ControlItem {\n  readonly id = 'play';\n\n  private playIcon!: HTMLElement;\n\n  private pauseIcon!: HTMLElement;\n\n  tooltip!: Tooltip;\n\n  init(player: Player, _: any, tooltip: Tooltip) {\n    this.tooltip = tooltip;\n    this.playIcon = this.el.appendChild(Icon.play());\n    this.pauseIcon = this.el.appendChild(Icon.pause());\n\n    if (player.paused) {\n      this.onPause();\n    } else {\n      this.onPlay();\n    }\n    addDisposable(this, player.on(EVENT.PLAY, this.onPlay));\n    addDisposable(this, player.on(EVENT.PAUSE, this.onPause));\n    addDisposableListener(this, this.el, 'click', player.toggle);\n  }\n\n  private onPlay = () => {\n    show(this.pauseIcon);\n    hide(this.playIcon);\n    this.tooltip.html = I18n.t(PAUSE);\n  }\n\n  private onPause = () => {\n    show(this.playIcon);\n    hide(this.pauseIcon);\n    this.tooltip.html = I18n.t(PLAY);\n  }\n}\n\nexport const playControlItem = () => new Play();\n","import { EVENT } from 'src/ts/constants';\nimport { I18n, MUTE, UNMUTE } from 'src/ts/features/i18n';\nimport { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport {\n  $, addClass, addDisposable, addDisposableListener, clamp, Component, Drag, getEventPath, hide, isString, Rect, show,\n} from 'src/ts/utils';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { ControlItem } from '..';\n\nclass Volume extends Component implements ControlItem {\n  readonly id = 'volume';\n\n  private player!: Player;\n\n  private volumeIcon!: HTMLElement;\n\n  private mutedIcon!: HTMLElement;\n\n  private bar!: HTMLElement;\n\n  private rect!: Rect;\n\n  tooltip!: Tooltip;\n\n  init(player: Player, _: any, tooltip: Tooltip) {\n    this.player = player;\n    this.tooltip = tooltip;\n\n    addClass(this.el, 'control_volume');\n    this.volumeIcon = this.el.appendChild(Icon.volume());\n    this.mutedIcon = this.el.appendChild(Icon.muted());\n\n    const bars = this.el.appendChild($('.control_volume_bars'));\n    const barWidth = player.opts.volumeBarWidth;\n    bars.style.width = isString(barWidth) ? barWidth : `${barWidth}px`;\n\n    this.bar = bars.appendChild($('.control_volume_bar'));\n\n    this.rect = new Rect(bars, player);\n\n    addDisposable(this, player.on(EVENT.VOLUME_CHANGE, this.onVolumeChange));\n    addDisposable(this, new Drag(bars, this.onDragStart, this.onDragging));\n    addDisposableListener(this, this.el, 'click', (ev:MouseEvent) => {\n      if (getEventPath(ev).includes(bars)) return;\n      player.toggleVolume();\n    });\n\n    this.onVolumeChange();\n  }\n\n  private onDragStart = (ev: PointerEvent) => {\n    this.onDragging(ev);\n  }\n\n  private onDragging = (ev: PointerEvent) => {\n    const x = ev.pageX - this.rect.x;\n    const v = clamp(x / this.rect.width);\n    this.player.volume = v;\n  }\n\n  private onVolumeChange = () => {\n    if (this.player.muted) {\n      this.mute();\n    } else {\n      this.unmute();\n    }\n    this.bar.style.transform = `scaleX(${this.player.volume})`;\n  };\n\n  mute(): void {\n    show(this.mutedIcon);\n    hide(this.volumeIcon);\n    this.tooltip.html = I18n.t(UNMUTE);\n  }\n\n  unmute(): void {\n    show(this.volumeIcon);\n    hide(this.mutedIcon);\n    this.tooltip.html = I18n.t(MUTE);\n  }\n}\n\nexport const volumeControlItem = () => new Volume();\n","import { EVENT } from 'src/ts/constants';\nimport { I18n, LIVE } from 'src/ts/features';\nimport { Player } from 'src/ts/player';\nimport {\n  $, addClass, addDisposable, Component, formatTime,\n} from 'src/ts/utils';\nimport { ControlItem } from '..';\n\nclass Time extends Component implements ControlItem {\n  readonly id = 'time';\n\n  private playedElement!: HTMLElement;\n\n  private totalElement!: HTMLElement;\n\n  init(player: Player) {\n    addClass(this.el, 'control_time');\n\n    if (player.opts.live) {\n      addClass(this.el, 'control_time-live');\n      this.el.textContent = I18n.t(LIVE);\n    } else {\n      this.playedElement = this.el.appendChild($('span'));\n      this.totalElement = this.el.appendChild($('span'));\n\n      this.played = player.currentTime;\n      this.total = player.duration;\n\n      addDisposable(this, player.on(EVENT.TIME_UPDATE, () => {\n        this.played = player.currentTime;\n      }));\n      addDisposable(this, player.on(EVENT.DURATION_CHANGE, () => {\n        this.total = player.duration;\n      }));\n    }\n  }\n\n  private set played(v: number) {\n    this.playedElement.textContent = formatTime(v);\n  }\n\n  private set total(v: number) {\n    this.totalElement.textContent = formatTime(v);\n  }\n}\n\nexport const timeControlItem = () => new Time();\n","import { EVENT } from 'src/ts/constants';\nimport { I18n, WEB_EXIT_FULL_SCREEN, WEB_FULL_SCREEN } from 'src/ts/features/i18n';\nimport { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport {\n  addDisposable, addDisposableListener, Component, hide, show,\n} from 'src/ts/utils';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { ControlItem } from '..';\n\nclass WebFullscreen extends Component implements ControlItem {\n  readonly id = 'web-fullscreen'\n\n  private exitIcon!: HTMLElement;\n\n  private enterIcon!: HTMLElement;\n\n  tooltip!: Tooltip;\n\n  init(player: Player, _: any, tooltip: Tooltip) {\n    this.tooltip = tooltip;\n    this.enterIcon = this.el.appendChild(Icon.webEnterFullscreen());\n    this.exitIcon = this.el.appendChild(Icon.webExitFullscreen());\n    if (player.webFullscreen.isActive) {\n      this.enter();\n    } else {\n      this.exit();\n    }\n    addDisposable(this, player.on(EVENT.WEB_ENTER_FULLSCREEN, this.enter));\n    addDisposable(this, player.on(EVENT.WEB_EXIT_FULLSCREEN, this.exit));\n    addDisposableListener(this, this.el, 'click', player.webFullscreen.toggle);\n  }\n\n  private enter = (): void => {\n    show(this.exitIcon);\n    hide(this.enterIcon);\n    this.tooltip.html = I18n.t(WEB_EXIT_FULL_SCREEN);\n  }\n\n  private exit = (): void => {\n    hide(this.exitIcon);\n    show(this.enterIcon);\n    this.tooltip.html = I18n.t(WEB_FULL_SCREEN);\n  }\n}\n\nexport const webFullscreenControlItem = () => new WebFullscreen();\n","import { EVENT } from 'src/ts/constants';\nimport { EXIT_FULL_SCREEN, FULL_SCREEN, I18n } from 'src/ts/features/i18n';\nimport { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport {\n  hide, Component, addDisposableListener, addDisposable, show,\n} from 'src/ts/utils';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { ControlItem } from '..';\n\nclass Fullscreen extends Component implements ControlItem {\n  readonly id = 'fullscreen'\n\n  private exitIcon!: HTMLElement;\n\n  private enterIcon!: HTMLElement;\n\n  tooltip!: Tooltip;\n\n  init(player: Player, _: any, tooltip: Tooltip) {\n    this.tooltip = tooltip;\n    this.exitIcon = this.el.appendChild(Icon.exitFullscreen());\n    this.enterIcon = this.el.appendChild(Icon.enterFullscreen());\n    if (player.fullscreen.isActive) {\n      this.enter();\n    } else {\n      this.exit();\n    }\n\n    addDisposable(this, player.on(EVENT.ENTER_FULLSCREEN, this.enter));\n    addDisposable(this, player.on(EVENT.EXIT_FULLSCREEN, this.exit));\n    addDisposableListener(this, this.el, 'click', player.fullscreen.toggle);\n  }\n\n  private enter = (): void => {\n    show(this.exitIcon);\n    hide(this.enterIcon);\n    this.tooltip.html = I18n.t(EXIT_FULL_SCREEN);\n  }\n\n  private exit = (): void => {\n    hide(this.exitIcon);\n    show(this.enterIcon);\n    this.tooltip.html = I18n.t(FULL_SCREEN);\n  }\n}\n\nexport const fullscreenControlItem = () => new Fullscreen();\n","import { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport {\n  hide, Component, addDisposableListener, show,\n} from 'src/ts/utils';\nimport { AIRPLAY, I18n } from 'src/ts/features';\nimport { ControlItem } from '..';\n\nclass Airplay extends Component implements ControlItem {\n  readonly id = 'airplay'\n\n  tip = I18n.t(AIRPLAY);\n\n  init(player: Player) {\n    if (!this.isSupport()) {\n      hide(this.el);\n      return;\n    }\n\n    this.el.appendChild(Icon.airplay());\n\n    addDisposableListener(this, player.video, 'webkitplaybacktargetavailabilitychanged' as any, (ev) => {\n      if (ev.availability === 'available') {\n        show(this.el);\n      } else {\n        hide(this.el);\n      }\n    });\n    addDisposableListener(this, this.el, 'click', () => {\n      const video = player.video as any;\n      if (video && video.webkitShowPlaybackTargetPicker) {\n        video.webkitShowPlaybackTargetPicker();\n      }\n    });\n  }\n\n  isSupport(): boolean {\n    return !!(window as any).WebKitPlaybackTargetAvailabilityEvent;\n  }\n}\n\nexport const airplayControlItem = () => new Airplay();\n","import {\n  $, addDisposable, clamp, Component, formatTime, Rect,\n} from 'src/ts/utils';\n\nexport interface ThumbnailOptions {\n  startSecond?: number;\n  gapSecond?: number;\n  row?: number;\n  col?: number;\n  width?: number;\n  height?: number;\n  images?: string[];\n}\n\nexport interface ThumbImg {\n  url: string;\n  x: number;\n  y: number;\n}\n\nexport class Thumbnail extends Component {\n  private opts: Required<ThumbnailOptions> = {\n    startSecond: 0,\n    gapSecond: 10,\n    col: 5,\n    row: 5,\n    width: 160,\n    height: 90,\n    images: [],\n  };\n\n  private imgElement?: HTMLElement;\n\n  private timeElement: HTMLElement;\n\n  private thumbImgPrePic?: number;\n\n  private ssGapRatio?: number;\n\n  private rect: Rect;\n\n  constructor(container: HTMLElement, opts: ThumbnailOptions) {\n    super(container, '.thumb');\n\n    this.updateOptions(opts);\n\n    this.timeElement = this.el.appendChild($('.thumb_time'));\n    this.timeElement.textContent = '0:00';\n\n    this.rect = addDisposable(this, new Rect(this.el));\n  }\n\n  private getCurrentThumb(seconds: number): ThumbImg | void {\n    const i = Math.max(seconds / this.opts.gapSecond - this.ssGapRatio!, 0) | 0;\n    const url = this.opts.images[(i / this.thumbImgPrePic!) | 0];\n\n    if (!url) return;\n\n    const x = (i % this.opts.col) * this.opts.width;\n    const y = ~~((i % this.thumbImgPrePic!) / this.opts.row) * this.opts.height;\n\n    return { url, x, y };\n  }\n\n  updateOptions(opts: ThumbnailOptions): void {\n    Object.assign(this.opts, opts);\n\n    if (this.opts.images.length) {\n      if (!this.imgElement) {\n        this.imgElement = this.el.appendChild($('.thumb_img'));\n      }\n      this.imgElement.style.width = `${this.opts.width}px`;\n      this.imgElement.style.height = `${this.opts.height}px`;\n      this.thumbImgPrePic = this.opts.col * this.opts.row;\n      this.ssGapRatio = this.opts.startSecond / this.opts.gapSecond;\n    }\n  }\n\n  update(seconds: number, x: number, maxX: number): void {\n    this.timeElement.textContent = formatTime(seconds);\n\n    if (this.imgElement) {\n      const thumb = this.getCurrentThumb(seconds);\n      if (thumb) {\n        this.imgElement.style.backgroundImage = `url(${thumb.url})`;\n        this.imgElement.style.backgroundPosition = `-${thumb.x}px -${thumb.y}px`;\n      }\n    } else {\n      this.rect.update();\n    }\n\n    const half = this.rect.width / 2;\n\n    this.applyStyle({\n      left: `${clamp(x - half, 0, Math.max(0, maxX - 2 * half))}px`,\n    });\n  }\n}\n","import { EVENT } from 'src/ts/constants';\nimport { Player } from 'src/ts/player';\nimport {\n  $, addClass, addDisposable, addDisposableListener, clamp, Component, Drag, Rect, throttle,\n} from 'src/ts/utils';\nimport { ControlItem } from '..';\nimport { Thumbnail } from './thumbnail';\n\nexport class Progress extends Component implements ControlItem {\n  readonly id = 'progress'\n\n  private playedBar!: HTMLElement;\n\n  private bufBar!: HTMLElement;\n\n  private bars!: HTMLElement;\n\n  private dot!: HTMLElement;\n\n  private rect!: Rect;\n\n  private thumbnail!: Thumbnail;\n\n  private player!: Player;\n\n  private dragging = false;\n\n  init(player: Player) {\n    this.player = player;\n\n    addClass(this.el, 'progress');\n\n    this.bars = this.el.appendChild($('.progress_bars'));\n    this.bufBar = this.bars.appendChild($('.progress_buf'));\n    this.playedBar = this.bars.appendChild($('.progress_played'));\n    this.dot = this.el.appendChild($('.progress_dot'));\n    this.dot.appendChild(player.opts.progressDot || $('.progress_dot_inner'));\n\n    this.rect = addDisposable(this, new Rect(this.bars, player));\n    this.thumbnail = addDisposable(this, new Thumbnail(this.el, player.opts.thumbnail));\n\n    addDisposable(this, new Drag(this.el, this.onDragStart, this.onDragging, this.onDragEnd));\n    addDisposable(this, player.on(EVENT.TIME_UPDATE, this.updatePlayedBar));\n    addDisposable(this, player.on(EVENT.PROGRESS, this.updateBufBar));\n    addDisposable(this, player.on(EVENT.UPDATE_OPTIONS, () => this.thumbnail.updateOptions(player.opts.thumbnail)));\n    addDisposable(this, player.on(EVENT.UPDATE_SIZE, () => {\n      if (!player.playing) this.resetPlayedBar();\n    }));\n    addDisposable(this, player.on(EVENT.CONTROL_ITEM_UPDATE, () => {\n      this.rect.update();\n      this.resetPlayedBar();\n    }));\n    addDisposableListener(this, this.el, 'mousemove', throttle((ev: MouseEvent) => this.updateThumbnail(ev.pageX)), true);\n\n    if (player.opts.isTouch) {\n      addDisposableListener(this, this.el, 'touchstart', (ev: Event) => ev.preventDefault());\n    }\n  }\n\n  private resetPlayedBar() {\n    this.setPlayedBarLength(this.player.currentTime / this.player.duration);\n  }\n\n  private setPlayedBarLength(percentage: number): void {\n    this.playedBar.style.transform = `scaleX(${clamp(percentage)})`;\n    this.dot.style.transform = `translate(${clamp(percentage * this.rect.width, 0, this.rect.width)}px, -50%)`;\n  }\n\n  private setBufBarLength(percentage: number): void {\n    this.bufBar.style.transform = `scaleX(${clamp(percentage)})`;\n  }\n\n  private onDragStart = (ev: PointerEvent) => {\n    this.dragging = true;\n    this.onDragging(ev);\n  }\n\n  private onDragging = (ev: PointerEvent) => {\n    const x = ev.pageX - this.rect.x;\n    this.setPlayedBarLength(x / this.rect.width);\n    this.updateThumbnail(ev.pageX);\n  }\n\n  private onDragEnd = (ev: PointerEvent) => {\n    this.dragging = false;\n    this.player.seek(this.getCurrentTime(ev.pageX));\n  }\n\n  private updateThumbnail(x: number): void {\n    this.thumbnail.update(this.getCurrentTime(x), x - this.rect.x, this.rect.width);\n  }\n\n  private updateBufBar = (): void => {\n    const bufLen = this.player.buffered.length;\n\n    if (!bufLen) return this.setBufBarLength(0);\n\n    const curTime = this.player.currentTime;\n    let percentage = 0;\n\n    this.player.eachBuffer((start, end) => {\n      if (start <= curTime && end >= curTime) {\n        percentage = end / this.player.duration;\n        return true;\n      }\n    });\n\n    this.setBufBarLength(percentage);\n  }\n\n  private updatePlayedBar = (): void => {\n    if (this.dragging) return;\n    this.setPlayedBarLength(this.player.currentTime / this.player.duration);\n  }\n\n  private getCurrentTime(x: number): number {\n    return clamp(((x - this.rect.x) / this.rect.width)) * this.player.duration;\n  }\n}\n\nexport const progressControlItem = () => new Progress();\n","import { EVENT } from './constants';\nimport { Player } from './player';\nimport { Disposable, PlayerOptions } from './types';\nimport { addDisposable, isWin10IE, throttle } from './utils';\nimport { settingControlItem } from './parts/control/items/setting';\nimport { speedSettingItem } from './setting-items/speed';\nimport { playControlItem } from './parts/control/items/play';\nimport { volumeControlItem } from './parts/control/items/volume';\nimport { timeControlItem } from './parts/control/items/time';\nimport { webFullscreenControlItem } from './parts/control/items/web-fullscreen';\nimport { fullscreenControlItem } from './parts/control/items/fullscreen';\nimport { loopContextMenuItem } from './contextmenu-items/loop';\nimport { pipContextMenuItem } from './contextmenu-items/pip';\nimport { versionContextMenuItem } from './contextmenu-items/version';\nimport { airplayControlItem } from './parts/control/items/airplay';\nimport { progressControlItem } from './parts/control/progress';\n\nfunction trans(\n  player: Player,\n  from: string,\n  to: string,\n): Disposable {\n  const fn = (ev: Event) => player.emit(to, ev);\n  player.video.addEventListener(from, fn);\n  return { dispose: () => player.video.removeEventListener(from, fn) };\n}\n\nfunction transThrottle(\n  player: Player,\n  from: string,\n  to: string,\n  dom: HTMLElement | Window = player.video,\n): Disposable {\n  const fn = (ev: Event) => player.emit(to, ev);\n  dom.addEventListener(from, throttle(fn));\n  return { dispose: () => dom.removeEventListener('from', fn) };\n}\n\nexport function tryOpenEdge(player: Player): void {\n  if (player.opts.openEdgeInIE && isWin10IE) {\n    window.location.href = `microsoft-edge:${document.URL}`;\n    player.emit(EVENT.OPEN_EDGE);\n  }\n}\n\nexport function setCssVariables(el: HTMLElement, opts: PlayerOptions): void {\n  const style = el.style;\n  if (opts.themeColor) style.setProperty('--theme-color', opts.themeColor);\n  if (opts.progressBg) style.setProperty('--progress-bg', opts.progressBg);\n  if (opts.posterBgColor) style.setProperty('--poster-bg-color', opts.posterBgColor);\n  if (opts.volumeProgressBg) style.setProperty('--volume-progress-bg', opts.volumeProgressBg);\n}\n\nexport function setVideoAttrs(video: HTMLVideoElement, opts: PlayerOptions['videoAttrs']): void {\n  if (!opts) return;\n  Object.keys(opts).forEach((k) => {\n    video.setAttribute(k, opts[k]);\n  });\n}\n\nexport function setVideoSources(video: HTMLVideoElement, opts: PlayerOptions['videoSources']): void {\n  if (!opts) return;\n  video.innerHTML = '';\n  if (!opts.length) return;\n  const frag = document.createDocumentFragment();\n  opts.forEach((s) => {\n    const source = document.createElement('source');\n    Object.keys(s).forEach((k) => {\n      source.setAttribute(k, (s as any)[k]);\n    });\n    frag.appendChild(source);\n  });\n  video.appendChild(frag);\n}\n\nconst storageVolumeKey = 'nplayer:volume';\nexport function setVideoVolumeFromLocal(video: HTMLVideoElement): void {\n  try {\n    const volume = parseFloat(localStorage.getItem(storageVolumeKey) as string);\n\n    // eslint-disable-next-line no-restricted-globals\n    if (!isNaN(volume)) video.volume = volume;\n  } catch (error) {\n    // ignore\n  }\n}\n\nexport function saveVideoVolume(volume: number) {\n  try {\n    localStorage.setItem(storageVolumeKey, String(volume));\n  } catch (error) {\n    // ignore\n  }\n}\n\nexport function registerNamedMap(player: Player) {\n  player.registerContextMenuItem(loopContextMenuItem());\n  player.registerContextMenuItem(pipContextMenuItem());\n  player.registerContextMenuItem(versionContextMenuItem());\n  player.registerSettingItem(speedSettingItem());\n  player.registerControlItem(playControlItem());\n  player.registerControlItem(volumeControlItem());\n  player.registerControlItem(timeControlItem());\n  player.registerControlItem(settingControlItem());\n  player.registerControlItem(webFullscreenControlItem());\n  player.registerControlItem(fullscreenControlItem());\n  player.registerControlItem(airplayControlItem());\n  player.registerControlItem(progressControlItem());\n}\n\nexport function transferEvent(player: Player): void {\n  const dis = (d: Disposable) => addDisposable(player, d);\n\n  dis(trans(player, 'durationchange', EVENT.DURATION_CHANGE));\n  dis(trans(player, 'ratechange', EVENT.RATE_CHANGE));\n  dis(trans(player, 'play', EVENT.PLAY));\n  dis(trans(player, 'pause', EVENT.PAUSE));\n  dis(trans(player, 'ended', EVENT.ENDED));\n  dis(trans(player, 'waiting', EVENT.WAITING));\n  dis(trans(player, 'stalled', EVENT.STALLED));\n  dis(trans(player, 'canplay', EVENT.CANPLAY));\n  dis(trans(player, 'loadedmetadata', EVENT.LOADED_METADATA));\n  dis(trans(player, 'error', EVENT.ERROR));\n  dis(trans(player, 'seeked', EVENT.SEEKED));\n  dis(trans(player, 'enterpictureinpicture', EVENT.ENTER_PIP));\n  dis(trans(player, 'leavepictureinpicture', EVENT.EXIT_PIP));\n\n  dis(transThrottle(player, 'timeupdate', EVENT.TIME_UPDATE));\n  dis(transThrottle(player, 'volumechange', EVENT.VOLUME_CHANGE));\n  dis(transThrottle(player, 'progress', EVENT.PROGRESS));\n\n  dis(transThrottle(player, 'resize', EVENT.UPDATE_SIZE, window));\n  if ((window as any).ResizeObserver) {\n    const ro = new ResizeObserver(throttle(() => player.emit(EVENT.UPDATE_SIZE)));\n    ro.observe(player.el);\n    dis({ dispose: () => ro.disconnect() });\n  }\n\n  player.on(EVENT.LOADED_METADATA, () => {\n    if (player.video.paused) {\n      player.emit(EVENT.PAUSE);\n    } else {\n      player.emit(EVENT.PLAY);\n    }\n  });\n}\n","import { I18n, LOOP } from '../features';\nimport { ContextMenuItem } from '../parts/contextmenu';\n\nexport const loopContextMenuItem = (): ContextMenuItem => ({\n  id: 'loop',\n  html: I18n.t(LOOP),\n  show(player, item) {\n    item.checked = player.loop;\n  },\n  click(player, item) {\n    item.checked = player.loop = !player.loop;\n  },\n});\n","import { I18n, PIP } from '../features';\nimport { ContextMenuItem } from '../parts/contextmenu';\n\nexport const pipContextMenuItem = (): ContextMenuItem => ({\n  id: 'pip',\n  html: I18n.t(PIP),\n  init() {\n    this.invisible = !('pictureInPictureEnabled' in document);\n  },\n  click(player) {\n    if (!player.loaded) return;\n    if ((document as any).pictureInPictureElement !== player.video) {\n      (player.video as any).requestPictureInPicture();\n    } else {\n      (document as any).exitPictureInPicture();\n    }\n  },\n});\n","import { ContextMenuItem } from '../parts/contextmenu';\n\nexport const versionContextMenuItem = (): ContextMenuItem => ({\n  id: 'version',\n  html: `NPlayer v${__VERSION__}`,\n  disabled: true,\n});\n","import { I18n, NORMAL, SPEED } from '../features';\nimport { SettingItem } from '../parts/control/items/setting';\n\nexport const speedSettingItem = (): SettingItem => ({\n  id: 'speed',\n  html: I18n.t(SPEED),\n  type: 'select',\n  value: 1,\n  options: [\n    { value: 0.25, html: '0.25' },\n    { value: 0.5, html: '0.5' },\n    { value: 1, html: I18n.t(NORMAL) },\n    { value: 1.5, html: '1.5' },\n    { value: 2, html: '2' },\n  ],\n  init(p) {\n    p.playbackRate = 1;\n  },\n  change(value, player) {\n    this.value = player.playbackRate = value;\n  },\n});\n","import {\n  addClass,\n  addDisposableListener, Component, containClass, toggleClass,\n} from 'src/ts/utils';\n\nexport interface CheckboxOptions {\n  html?: string;\n  checked?: boolean;\n  change?: (newValue: boolean) => void;\n}\n\nconst classActive = 'checkbox-active';\n\nexport class Checkbox extends Component {\n  constructor(container: HTMLElement, opts: CheckboxOptions) {\n    super(container, '.checkbox');\n    if (opts.html) this.el.innerHTML = opts.html;\n    if (opts.change) {\n      addDisposableListener(this, this.el, 'click', () => {\n        toggleClass(this.el, classActive);\n        opts.change!(containClass(this.el, classActive));\n      });\n    }\n\n    if (opts.checked) addClass(this.el, classActive);\n  }\n\n  update(v: boolean) {\n    toggleClass(this.el, classActive, v);\n  }\n}\n","import { EVENT } from 'src/ts/constants';\nimport { Player } from 'src/ts/player';\nimport {\n  $, addDisposable, addDisposableListener, clamp, Component, Drag, Rect,\n} from 'src/ts/utils';\n\nexport interface SliderOption {\n  value?: number;\n  stops?: { value: number, html?: string }[];\n  change?: (value: number) => void;\n  step?: boolean;\n}\n\nexport class Slider extends Component {\n  private readonly trackElement: HTMLElement;\n\n  private readonly dotElement: HTMLElement;\n\n  private readonly step: boolean | undefined;\n\n  readonly rect: Rect;\n\n  constructor(container: HTMLElement, private opts: SliderOption, player?: Player) {\n    super(container, '.slider');\n\n    this.rect = new Rect(this.el);\n\n    this.trackElement = this.el.appendChild($('.slider_track')).appendChild($('.slider_track_inner'));\n    if (opts.stops) {\n      let stop;\n      opts.stops.forEach((s) => {\n        stop = $('.slider_stop', undefined, s.html ? `<span>${s.html}</span>` : '');\n        stop.style.left = `${s.value * 100}%`;\n        this.el.appendChild(stop);\n      });\n    }\n    this.dotElement = this.el.appendChild($('.slider_dot'));\n\n    addDisposable(this, new Drag(this.el, this.onDrag, this.onDrag));\n    addDisposableListener(this, this.el, 'touchstart', (ev: Event) => ev.preventDefault());\n\n    this.step = opts.stops && opts.step;\n\n    this.update(opts.value || 0, undefined, false);\n\n    if (player) addDisposable(this, player.on(EVENT.UPDATE_SIZE, () => this.rect.update()));\n  }\n\n  private onDrag = (ev: PointerEvent) => {\n    const x = ev.pageX - this.rect.x;\n    this.update(x / this.rect.width, x);\n  }\n\n  update(value: number, x?: number, trigger = true): void {\n    if (this.step) {\n      let closed = Infinity;\n      let v = 0; let c;\n      this.opts.stops!.forEach((s) => {\n        c = Math.abs(value - s.value);\n        if (c < closed) {\n          closed = c;\n          v = s.value;\n        }\n      });\n      value = v;\n      x = null!;\n    }\n\n    x = x != null ? x : value * this.rect.width;\n    this.trackElement.style.transform = `scaleX(${clamp(value)})`;\n    this.dotElement.style.transform = `translateX(${clamp(x, 0, this.rect.width)}px)`;\n\n    if (trigger && this.opts.change) this.opts.change(value);\n  }\n}\n","import { EVENT } from 'src/ts/constants';\nimport { Icon } from 'src/ts/features';\nimport { Player } from 'src/ts/player';\nimport {\n  addDisposable, addDisposableListener, Component, hide, show,\n} from 'src/ts/utils';\n\nexport class Poster extends Component {\n  private playElement: HTMLElement;\n\n  private poster: string;\n\n  private tryToPlayed = false;\n\n  constructor(container: HTMLElement, private player: Player) {\n    super(container, '.poster');\n    this.poster = player.opts.poster;\n    this.playElement = player.opts.posterPlayElement || Icon.play('poster_play');\n    this.el.appendChild(this.playElement);\n    this.hide();\n\n    if (!player.opts.posterEnable) return;\n\n    this.show();\n    if (this.poster) {\n      this.applyStyle({\n        backgroundImage: `url(${this.poster})`,\n      });\n    }\n\n    addDisposableListener(this, this.el, 'click', () => {\n      if (this.tryToPlayed) return;\n      this.tryToPlayed = true;\n      if (player.loaded) {\n        this.hide();\n      } else {\n        hide(this.playElement);\n        player.loading.show();\n      }\n      player.play();\n    });\n\n    addDisposable(this, player.on(EVENT.CANPLAY, this.tryHide));\n    addDisposable(this, player.on(EVENT.LOADED_METADATA, this.tryHide));\n    addDisposable(this, player.on(EVENT.UPDATE_OPTIONS, () => {\n      if (player.opts.poster && player.opts.poster !== this.poster && !player.loaded) {\n        this.tryToPlayed = false;\n        this.addTimeUpdateHandler();\n        this.show();\n      }\n    }));\n\n    this.addTimeUpdateHandler();\n  }\n\n  private addTimeUpdateHandler() {\n    this.player.off(EVENT.TIME_UPDATE, this.onTimeUpdate);\n    this.player.on(EVENT.TIME_UPDATE, this.onTimeUpdate);\n  }\n\n  private onTimeUpdate = () => {\n    if (this.player.playing) {\n      this.tryToPlayed = true;\n      this.hide();\n      this.player.off(EVENT.TIME_UPDATE, this.onTimeUpdate);\n    }\n  }\n\n  private tryHide = () => {\n    if (!this.tryToPlayed) return;\n    this.hide();\n  }\n\n  get isActive(): boolean {\n    return this.el.style.display !== 'none';\n  }\n\n  show() {\n    show(this.el);\n    show(this.playElement);\n  }\n\n  hide() {\n    hide(this.el);\n  }\n}\n","import { ToastItem } from '../parts';\nimport { Player } from '../player';\nimport { Disposable } from '../types';\nimport {\n  clamp, Drag, formatTime,\n} from '../utils';\n\nexport class Touch implements Disposable {\n  private startX = 0;\n\n  private startY = 0;\n\n  private dragType = 0;\n\n  private duration = 0;\n\n  private durationStr = '';\n\n  private currentTime = 0;\n\n  private volume = 0;\n\n  private seekTime = 0;\n\n  private toastItem!: ToastItem;\n\n  private drag!: Drag;\n\n  private showControlTimer!: any;\n\n  private videoTouched = false;\n\n  constructor(private player: Player) {\n    if (player.opts.isTouch) {\n      this.enable();\n    }\n  }\n\n  private dragStart = (ev: PointerEvent) => {\n    this.duration = this.player.duration;\n    if (!this.duration) return;\n    this.durationStr = formatTime(this.duration);\n    this.currentTime = this.player.currentTime;\n    this.volume = this.player.volume;\n    this.startX = ev.pageX;\n    this.startY = ev.pageY;\n    this.dragType = 0;\n    this.seekTime = 0;\n  }\n\n  private dragMove = (ev: PointerEvent) => {\n    if (!this.duration) return;\n    if (this.dragType === 1) {\n      if (this.player.opts.live) return;\n      this.seekTime = clamp(this.currentTime + (ev.pageX - this.startX) / 5, 0, this.duration) | 0;\n      this.toastItem = this.player.toast.show(`${formatTime(this.seekTime)}  ${this.durationStr}`, 'center', 0);\n    } else if (this.dragType === 2) {\n      const volume = clamp(this.volume + (this.startY - ev.pageY) / 200);\n      this.toastItem = this.player.toast.show(`${volume * 100 | 0}%`, 'center', 0);\n      this.player.volume = volume;\n    } else if (Math.abs(ev.pageX - this.startX) > 20) {\n      this.dragType = 1;\n    } else if (Math.abs(ev.pageY - this.startY) > 20) {\n      this.dragType = 2;\n    }\n  }\n\n  private dragEnd = () => {\n    if (this.toastItem) {\n      setTimeout(() => this.player.toast.close(this.toastItem), 200);\n    }\n    if (!this.duration) return;\n    if (this.dragType === 1) {\n      this.player.currentTime = this.seekTime;\n    }\n  }\n\n  private videoTouchHandler = () => {\n    if (this.videoTouched) {\n      clearTimeout(this.showControlTimer);\n      this.videoTouched = false;\n      this.player.toggle();\n    } else {\n      this.videoTouched = true;\n      this.showControlTimer = setTimeout(() => {\n        this.videoTouched = false;\n        const control = this.player.control;\n        if (control.isActive) {\n          control.hide();\n        } else {\n          control.showTransient();\n        }\n      }, 200);\n    }\n  }\n\n  enable(): void {\n    if (this.drag) return;\n    this.drag = new Drag(this.player.video, this.dragStart, this.dragMove, this.dragEnd);\n    this.player.video.addEventListener('touchstart', this.videoTouchHandler);\n  }\n\n  disable(): void {\n    if (this.drag) {\n      this.drag.dispose();\n      this.drag = null!;\n    }\n    this.player.video.removeEventListener('touchstart', this.videoTouchHandler);\n  }\n\n  dispose() {\n    if (this.toastItem) {\n      this.player.toast.close(this.toastItem);\n    }\n    this.disable();\n  }\n}\n","import { Disposable, PlayerOptions, Plugin } from './types';\nimport { processOptions } from './options';\nimport {\n  $, addClass, getEl, Rect, EventEmitter, clamp, isString,\n  dispose, removeNode, addDisposable, isBrowser, patchProps, internalUtils,\n} from './utils';\nimport { Control, ControlItem } from './parts/control';\nimport { Loading } from './parts/loading';\nimport { ContextMenu, ContextMenuItem } from './parts/contextmenu';\nimport { Toast } from './parts/toast';\nimport { Fullscreen } from './features/fullscreen';\nimport { WebFullscreen } from './features/web-fullscreen';\nimport {\n  setCssVariables, setVideoAttrs, transferEvent, tryOpenEdge,\n  setVideoVolumeFromLocal, registerNamedMap, setVideoSources, saveVideoVolume,\n} from './helper';\nimport { EVENT } from './constants';\nimport { Shortcut } from './features/shortcut';\nimport { SettingItem } from './parts/control/items/setting';\n\nimport * as components from './components';\nimport { I18n, Icon } from './features';\nimport { Poster } from './parts/poster';\nimport { Touch } from './features/touch';\n\nexport class Player extends EventEmitter implements Disposable {\n  container: HTMLElement | null;\n\n  el: HTMLElement;\n\n  opts: Required<PlayerOptions>;\n\n  mounted = false;\n\n  private prevVolume = 1;\n\n  private readonly settingNamedMap: Record<string, SettingItem> = Object.create(null);\n\n  private readonly contextmenuNamedMap: Record<string, ContextMenuItem> = Object.create(null);\n\n  private readonly controlNamedMap: Record<string, ControlItem> = Object.create(null);\n\n  readonly __settingItems: SettingItem[];\n\n  readonly video: HTMLVideoElement;\n\n  readonly rect: Rect;\n\n  readonly fullscreen: Fullscreen;\n\n  readonly webFullscreen: WebFullscreen;\n\n  readonly shortcut: Shortcut;\n\n  readonly touch: Touch;\n\n  readonly control: Control;\n\n  readonly loading: Loading;\n\n  readonly poster: Poster;\n\n  readonly contextmenu: ContextMenu;\n\n  readonly toast: Toast;\n\n  private readonly plugins: Set<Plugin> = new Set();\n\n  constructor(opts?: PlayerOptions) {\n    super();\n    this.opts = processOptions(opts);\n    tryOpenEdge(this);\n    this.container = getEl(this.opts.container);\n    this.el = $('.nplayer', { tabindex: '0' }, undefined, '');\n    if (this.opts.video) {\n      this.video = this.opts.video;\n      addClass(this.video, 'video');\n    } else {\n      this.video = $('video.video');\n    }\n\n    if (this.opts.src) this.opts.videoProps.src = this.opts.src;\n    setCssVariables(this.el, this.opts);\n    setVideoAttrs(this.video, this.opts.videoProps);\n    setVideoSources(this.video, this.opts.videoSources);\n    setVideoVolumeFromLocal(this.video);\n    transferEvent(this);\n    this.el.appendChild(this.video);\n\n    registerNamedMap(this);\n\n    this.rect = addDisposable(this, new Rect(this.el, this));\n    this.fullscreen = addDisposable(this, new Fullscreen(this));\n    this.webFullscreen = addDisposable(this, new WebFullscreen(this));\n    this.shortcut = addDisposable(this, new Shortcut(this, this.opts.shortcut));\n    this.touch = addDisposable(this, new Touch(this));\n    this.toast = addDisposable(this, new Toast(this.el));\n    this.loading = addDisposable(this, new Loading(this.el, this));\n    this.poster = addDisposable(this, new Poster(this.el, this));\n\n    if (this.opts.plugins) {\n      this.opts.plugins.forEach((plugin) => this.use(plugin));\n    }\n\n    this.contextmenu = addDisposable(this, new ContextMenu(this.el, this, this.opts.contextMenus.map((item) => {\n      if (isString(item)) return this.contextmenuNamedMap[item];\n      return item;\n    }).filter(Boolean)));\n\n    this.__settingItems = this.opts.settings.map((item) => {\n      if (isString(item)) return this.settingNamedMap[item];\n      return item;\n    }).filter(Boolean);\n\n    this.control = addDisposable(this, new Control(this.el, this));\n\n    addDisposable(this, this.on(EVENT.LOADED_METADATA, () => {\n      const time = this.opts.autoSeekTime || 0.3;\n      if (this.currentTime < time) this.currentTime = time;\n      this.opts.autoSeekTime = 0;\n    }));\n\n    if (!this.opts.isTouch) {\n      this.enableClickPause();\n    }\n\n    this.emit(EVENT.AFTER_INIT);\n  }\n\n  get currentTime(): number {\n    return this.video.currentTime;\n  }\n\n  set currentTime(v: number) {\n    if (!this.duration) return;\n    const diff = v - this.video.currentTime;\n    if (!diff) return;\n    this.video.currentTime = clamp(v, 0, this.duration);\n  }\n\n  get loaded(): boolean {\n    return this.video.readyState >= 3;\n  }\n\n  get duration(): number {\n    return this.video.duration || 0;\n  }\n\n  get buffered(): TimeRanges {\n    return this.video.buffered;\n  }\n\n  get volume(): number {\n    return this.video.volume;\n  }\n\n  set volume(v: number) {\n    this.video.volume = clamp(v);\n    if (this.muted && v > 0) this.muted = false;\n    saveVideoVolume(this.video.volume);\n  }\n\n  get muted(): boolean {\n    return this.video.muted || this.volume === 0;\n  }\n\n  set muted(v: boolean) {\n    this.video.muted = v;\n  }\n\n  get playbackRate(): number {\n    return this.video.playbackRate;\n  }\n\n  set playbackRate(v: number) {\n    this.video.playbackRate = v;\n  }\n\n  get ended(): boolean {\n    return this.video.ended;\n  }\n\n  get paused(): boolean {\n    return this.video.paused;\n  }\n\n  get playing(): boolean {\n    return !this.paused && !this.ended;\n  }\n\n  get loop(): boolean {\n    return this.video.loop;\n  }\n\n  set loop(v: boolean) {\n    this.video.loop = v;\n  }\n\n  enableClickPause() {\n    this.video.addEventListener('click', this.toggle);\n  }\n\n  disableClickPause() {\n    this.video.removeEventListener('click', this.toggle);\n  }\n\n  use(plugin: Plugin): this {\n    if (!plugin || this.plugins.has(plugin)) return this;\n    if (plugin.dispose) {\n      addDisposable(this, plugin as Disposable);\n    }\n    plugin.apply(this);\n    return this;\n  }\n\n  mount(el?: PlayerOptions['container']): void {\n    if (this.mounted) {\n      el = getEl(el) as any;\n      if (el && el !== this.container) {\n        if (this.container) this.container.removeChild(this.el);\n        this.container = el as HTMLElement;\n        this.container.appendChild(this.el);\n        this.emit(EVENT.UPDATE_SIZE);\n      }\n      return;\n    }\n    if (el) this.container = getEl(el) || this.container;\n    if (!this.container) return;\n    this.container.appendChild(this.el);\n    this.emit(EVENT.MOUNTED);\n    this.mounted = true;\n  }\n\n  incVolume(v = this.opts.volumeStep): void {\n    this.volume += v;\n  }\n\n  decVolume(v = this.opts.volumeStep): void {\n    this.volume -= v;\n  }\n\n  forward(v = this.opts.seekStep): void {\n    this.currentTime += v;\n  }\n\n  rewind(v = this.opts.seekStep): void {\n    this.currentTime -= v;\n  }\n\n  play(): Promise<void> | void {\n    return this.video.play();\n  }\n\n  pause(): void {\n    this.video.pause();\n  }\n\n  seek(seconds: number): void {\n    this.video.currentTime = clamp(seconds, 0, this.duration);\n  }\n\n  toggle = () => {\n    if (this.paused) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  }\n\n  toggleVolume(): void {\n    if (this.muted) {\n      this.volume = this.prevVolume || 1;\n      this.muted = false;\n    } else {\n      this.prevVolume = this.volume;\n      this.volume = 0;\n    }\n  }\n\n  eachBuffer(fn: (start: number, end: number) => boolean | void): void {\n    for (let l = this.buffered.length, i = l - 1; i >= 0; i--) {\n      if (fn(this.buffered.start(i), this.buffered.end(i))) {\n        break;\n      }\n    }\n  }\n\n  registerSettingItem(item: SettingItem, id?: string): void {\n    this.settingNamedMap[id || item.id!] = item;\n  }\n\n  registerContextMenuItem(item: ContextMenuItem, id?: string): void {\n    this.contextmenuNamedMap[id || item.id!] = item;\n  }\n\n  registerControlItem(item: ControlItem, id?: string): void {\n    this.controlNamedMap[id || item.id!] = item;\n  }\n\n  getSettingItem(id: string): SettingItem | undefined {\n    return this.settingNamedMap[id];\n  }\n\n  getContextMenuItem(id: string): ContextMenuItem | undefined {\n    return this.contextmenuNamedMap[id];\n  }\n\n  getControlItem(id: string): ControlItem | undefined {\n    return this.controlNamedMap[id] as ControlItem;\n  }\n\n  updateOptions(opts: PlayerOptions): void {\n    if (opts.videoProps !== this.opts.videoProps) patchProps(this.video, this.opts.videoProps, opts.videoProps);\n    if (opts.src && opts.src !== this.opts.src) this.video.src = opts.src;\n    if (opts.videoSources !== this.opts.videoSources) setVideoSources(this.video, opts.videoSources);\n    this.opts = { ...this.opts, ...opts };\n    setCssVariables(this.el, this.opts);\n    if (this.opts.shortcut) {\n      this.shortcut.enable();\n    } else {\n      this.shortcut.disable();\n    }\n    this.emit(EVENT.UPDATE_OPTIONS, this.opts);\n  }\n\n  updateControlItems(items: Parameters<Control['updateItems']>[0], index?: number): void {\n    this.control.updateItems(items, index);\n  }\n\n  dispose(): void {\n    if (!this.el) return;\n    this.emit(EVENT.BEFORE_DISPOSE);\n    dispose(this);\n    const plugins = this.opts.plugins;\n    if (plugins) plugins.forEach((p) => p.dispose && p.dispose());\n    this.removeAllListeners();\n    removeNode(this.el);\n    this.el = null!;\n    this.container = null;\n  }\n\n  static __utils = internalUtils;\n\n  static EVENT = EVENT;\n\n  static I18n = I18n;\n\n  static Icon = Icon;\n\n  static components = components;\n\n  static Player = Player;\n\n  Player!: typeof Player;\n\n  EVENT!: typeof EVENT;\n}\n\nPlayer.prototype.Player = Player;\nPlayer.prototype.EVENT = EVENT;\n\nif (isBrowser) {\n  // eslint-disable-next-line no-console\n  console.log(\n    `%c NPlayer %c v${__VERSION__} %c https://github.com/woopen/nplayer `,\n    'padding: 1px; border-radius: 3px 0 0 3px; color: #fff; background: #606060;',\n    'padding: 1px; color: #fff; background: #1475b2;',\n    'padding: 1px; border-radius: 0 3px 3px 0; color: #fff; background: #42c02e;',\n  );\n}\n","import { PlayerOptions } from './types';\n\nconst defaultOptions = (): Partial<PlayerOptions> => ({\n  shortcut: true,\n  seekStep: 10,\n  volumeStep: 0.1,\n  volumeBarWidth: 100,\n  settings: ['speed'],\n  contextMenus: ['loop', 'pip', 'version'],\n  contextMenuToggle: true,\n  openEdgeInIE: true,\n  posterEnable: true,\n  videoProps: {\n    crossorigin: 'anonymous',\n    preload: 'auto',\n    playsinline: 'true',\n  },\n});\n\nfunction processControls(origin: Required<PlayerOptions>['controls'], def: Required<PlayerOptions>['controls']) {\n  return [origin[0] || def[0], origin[1] || def[1], origin[2] || def[2]];\n}\n\nexport function processOptions(opts?: PlayerOptions): Required<PlayerOptions> {\n  const dOpts = defaultOptions();\n  const res = {\n    ...dOpts,\n    isTouch: (('ontouchstart' in window)\n    || (navigator.maxTouchPoints > 0)\n    || (navigator.msMaxTouchPoints > 0)),\n    ...opts,\n    videoProps: {\n      ...dOpts.videoProps,\n      ...opts?.videoProps,\n    },\n  } as Required<PlayerOptions>;\n\n  res.controls = processControls(res.controls || [], [\n    ['play', res.isTouch ? '' : 'volume', 'time', 'spacer', 'airplay', 'settings', 'web-fullscreen', 'fullscreen'],\n    [res.live ? '' : 'progress'],\n  ]);\n\n  res.bpControls = res.bpControls || {\n    650: [\n      ['play', res.live ? '' : 'progress', 'time', 'web-fullscreen', 'fullscreen'],\n      [],\n      ['spacer', 'airplay', 'settings'],\n    ],\n  };\n\n  res.controls = res.controls.filter(Boolean).map((x) => x.filter(Boolean));\n\n  const newBpControls: PlayerOptions['bpControls'] = {};\n  // eslint-disable-next-line no-restricted-globals\n  Object.keys(res.bpControls).filter((x) => x && !isNaN(Number(x)) && Array.isArray(res.bpControls[x])).forEach((k) => {\n    newBpControls[k] = res.bpControls[k].filter(Boolean).map((x) => x.filter(Boolean));\n  });\n\n  res.bpControls = newBpControls;\n\n  return res;\n}\n"],"sourceRoot":""}