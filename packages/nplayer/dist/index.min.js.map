{"version":3,"sources":["webpack://NPlayer/webpack/universalModuleDefinition","webpack://NPlayer/./packages/nplayer/src/scss/index.scss?8b24","webpack://NPlayer/./packages/nplayer/src/ts/constants.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/dom.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/drag.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/rect.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/is.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/env.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/emitter.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/component.ts","webpack://NPlayer/./packages/nplayer/src/ts/utils/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/tooltip/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/progress/thumbnail.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/progress/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/loading/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/contextmenu/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/toast/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/features/fullscreen.ts","webpack://NPlayer/./packages/nplayer/src/ts/features/web-fullscreen.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/popover/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/switch/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/features/i18n.ts","webpack://NPlayer/./packages/nplayer/src/ts/features/icons.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/setting.ts","webpack://NPlayer/./packages/nplayer/src/ts/features/shortcut.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/play.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/volume.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/time.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/spacer.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/web-fullscreen.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/fullscreen.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/control/items/airplay.ts","webpack://NPlayer/./packages/nplayer/src/ts/helper.ts","webpack://NPlayer/./packages/nplayer/src/ts/contextmenu-items/loop.ts","webpack://NPlayer/./packages/nplayer/src/ts/contextmenu-items/pip.ts","webpack://NPlayer/./packages/nplayer/src/ts/contextmenu-items/version.ts","webpack://NPlayer/./packages/nplayer/src/ts/setting-items/speed.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/mask/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/spacer/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/checkbox/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/components/slider/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/parts/poster/index.ts","webpack://NPlayer/./packages/nplayer/src/ts/player.ts","webpack://NPlayer/./packages/nplayer/src/ts/options.ts","webpack://NPlayer/./packages/nplayer/src/scss/index.scss","webpack://NPlayer/./node_modules/css-loader/dist/runtime/api.js","webpack://NPlayer/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://NPlayer/webpack/bootstrap","webpack://NPlayer/webpack/startup","webpack://NPlayer/webpack/runtime/compat get default export","webpack://NPlayer/webpack/runtime/define property getters","webpack://NPlayer/webpack/runtime/hasOwnProperty shorthand","webpack://NPlayer/webpack/runtime/make namespace object"],"names":["root","factory","exports","module","define","amd","this","options","CLASS_PREFIX","CLASS_PLAYER","EVENT","ENTER_FULLSCREEN","EXIT_FULLSCREEN","WEB_ENTER_FULLSCREEN","WEB_EXIT_FULLSCREEN","DURATION_CHANGE","RATE_CHANGE","AFTER_INIT","PLAY","PAUSE","ENDED","WAITING","STALLED","CANPLAY","LOADED_METADATA","ERROR","SEEKED","TIME_UPDATE","VOLUME_CHANGE","PROGRESS","ENTER_PIP","EXIT_PIP","LOADING_SHOW","LOADING_HIDE","MOUNTED","UPDATE_SIZE","BEFORE_DISPOSE","UPDATE_OPTIONS","OPEN_EDGE","CONTROL_SHOW","CONTROL_HIDE","SELECTOR_REGEX","$","desc","attrs","children","classPrefix","match","exec","el","document","createElement","id","className","replace","trim","Object","keys","forEach","name","value","undefined","test","setAttribute","isString","innerHTML","c","appendChild","getEl","querySelector","removeNode","node","remove","parentNode","removeChild","style","display","dom","cls","prefix","classList","split","add","oldCls","baseVal","map","join","containClass","contains","toggleClass","force","toggle","svgNS","createSvg","d","viewBox","svg","createElementNS","path","setAttributeNS","getEventPath","ev","composedPath","thirdOptsSupported","defineProperty","get","window","addEventListener","e","isListenerObjOptsSupported","DomListener","type","handler","isBool","removeEventListener","measureElementSize","clone","cloneNode","position","opacity","removeAttribute","parent","body","rect","getBoundingClientRect","Drag","start","move","end","pending","downHandler","preventDefault","element","setPointerCapture","pointerId","moveHandler","lastEv","requestAnimationFrame","handlerMove","upHandler","releasePointerCapture","Rect","player","update","on","tryUpdate","width","height","left","top","v","off","prototype","toString","o","String","call","isFunction","isNumber","isIOS","navigator","platform","isIE","userAgent","isWin10IE","indexOf","isBrowser","EE","fn","context","once","EventEmitter","_events","create","_eventsCount","evt","a1","a2","a3","a4","a5","args","i","listeners","len","arguments","length","Array","apply","j","TypeError","listener","push","dispose","bind","event","clearEvent","events","container","assign","clamp","n","lower","upper","Math","max","min","disposableMap","Map","getDisposableMap","addDisposable","key","disposable","has","set","item","delete","addDisposableListener","domListener","throttle","ctx","first","padStart","str","l","formatTime","seconds","round","floor","Tooltip","html","ControlBar","last","opts","controls","Item","getControlItem","tooltip","isSupport","tip","init","setLeft","setRight","registerControlItem","Thumbnail","startSecond","gapSecond","col","row","images","updateOptions","timeElement","textContent","ssGapRatio","url","thumbImgPrePic","x","y","imgElement","maxX","thumb","getCurrentThumb","backgroundImage","backgroundPosition","half","applyStyle","Progress","dragging","onDragStart","onDragging","pageX","setPlayedBarLength","updateThumbnail","onDragEnd","seek","getCurrentTime","updateBufBar","buffered","setBufBarLength","curTime","currentTime","percentage","eachBuffer","duration","updatePlayedBar","bars","bufBar","playedBar","thumbnail","transform","classHide","classBgHide","Control","delayHidTime","latch","show","bgElement","cursor","emit","hide","showTransient","clearTimeout","showTimer","setTimeout","tryHide","video","played","paused","classLoading","Loading","loadingElement","startWaitingTime","_checkCanplay","tryShow","checkCanplay","ContextMenu","items","showed","contextMenuToggle","renderItems","stopPropagation","innerWidth","innerHeight","clientX","clientY","filter","invisible","disabled","checked","click","getDomNodes","frag","createDocumentFragment","ToastItem","timer","Toast","toasts","timeout","toastItem","find","t","close","CLASS_FULL","Fullscreen","getPrefix","isActive","exit","enter","addClass","removeClass","dblclickFullscreen","enableDblclick","disableDblclick","setTarget","exitFullscreen","p","HTMLElement","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","HTMLDocument","webkitExitFullscreen","cancelFullScreen","mozCancelFullScreen","msExitFullscreen","fullscreenElement","mozFullScreenElement","msFullscreenElement","webkitFullscreenElement","target","webkitEnterFullscreen","navigationUI","classFull","WebFullscreen","classActive","Popover","onHide","maskElement","panelElement","applyPanelStyle","includes","activeClass","Switch","change","data","FULL_SCREEN","EXIT_FULL_SCREEN","WEB_FULL_SCREEN","WEB_EXIT_FULL_SCREEN","SETTINGS","MUTE","UNMUTE","NORMAL","SPEED","PIP","LOOP","CURRENT_VOLUME","AIRPLAY","I18n","defaultLang","currentLang","lang","transData","fallback","k","setCurrentLang","language","userLanguage","toLowerCase","setDefaultLang","createIcon","icon","Icon","registerIcon","iconName","classOptionActive","Setting","onItemClick","_switch","renderOptions","showOptionPage","_optionElement","onOptionClick","option","renderHome","showHomePage","back","popover","homeElement","currentOptionElement","_settingItems","cog","willChange","_selectedElement","opt","selectedHtml","_optionElements","settingControlItem","editableTagNames","Shortcut","enable","onKeyDown","altKey","ctrlKey","metaKey","shiftKey","focused","activeElement","tag","tagName","editable","getAttribute","code","keyCode","which","handled","control","register","fullscreen","webFullscreen","rewind","incVolume","forward","decVolume","disable","Play","onPlay","pauseIcon","playIcon","onPause","play","pause","playControlItem","Volume","volume","onVolumeChange","muted","mute","unmute","bar","volumeIcon","mutedIcon","barWidth","volumeBarWidth","toggleVolume","_","volumeControlItem","Time","playedElement","totalElement","total","timeControlItem","spacerControlItem","flex","exitIcon","enterIcon","webEnterFullscreen","webExitFullscreen","webFullscreenControlItem","enterFullscreen","fullscreenControlItem","Airplay","airplay","availability","webkitShowPlaybackTargetPicker","WebKitPlaybackTargetAvailabilityEvent","airplayControlItem","trans","from","to","transThrottle","setCssVariables","themeColor","setProperty","progressBg","posterBgColor","volumeProgressBg","setVideoAttrs","registerNamedMap","registerContextMenuItem","loop","readyState","pictureInPictureElement","requestPictureInPicture","exitPictureInPicture","registerSettingItem","playbackRate","Mask","Spacer","Checkbox","Slider","stop","onDrag","trackElement","stops","s","dotElement","step","trigger","closed","Infinity","abs","Poster","tryToPlayed","onTimeUpdate","playing","poster","playElement","posterPlayElement","posterEnable","loading","addTimeUpdateHandler","Player","prevVolume","settingNamedMap","contextmenuNamedMap","controlNamedMap","dOpts","shortcut","seekStep","volumeStep","settings","contextMenus","openEdgeInIE","clickPause","videoAttrs","crossorigin","preload","playsinline","processOptions","location","href","URL","tabindex","parseFloat","localStorage","getItem","isNaN","setVideoVolumeFromLocal","dis","ResizeObserver","ro","observe","disconnect","transferEvent","enableClickPause","toast","plugins","plugin","contextmenu","Boolean","setItem","ended","Error","updateVolume","disableClickPause","removeAllListeners","_utils","components","console","log","___CSS_LOADER_EXPORT___","cssWithMappingToString","list","content","concat","modules","mediaQuery","dedupe","alreadyImportedModules","_i","memo","isOldIE","all","atob","getTarget","styleTarget","HTMLIFrameElement","contentDocument","head","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","index","obj","css","media","sourceMap","references","updater","addStyle","insertStyleElement","attributes","nonce","insert","textStore","replaceText","replacement","applyToSingletonTag","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","applyToTag","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","singleton","singletonCounter","styleIndex","removeStyleElement","newObj","lastIdentifiers","newList","newLastIdentifiers","_index","splice","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","getter","__esModule","a","definition","enumerable","prop","hasOwnProperty","r","Symbol","toStringTag"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NPlayer\"] = factory();\n\telse\n\t\troot[\"NPlayer\"] = factory();\n})(this, function() {\nreturn ","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[3]!./index.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","export const CLASS_PREFIX = 'nplayer_';\n\nexport const CLASS_PLAYER = 'nplayer';\n\nexport const EVENT = {\n  ENTER_FULLSCREEN: 'EnterFullscreen',\n  EXIT_FULLSCREEN: 'ExitFullscreen',\n  WEB_ENTER_FULLSCREEN: 'WebEnterFullscreen',\n  WEB_EXIT_FULLSCREEN: 'WebExitFullscreen',\n  DURATION_CHANGE: 'DurationChange',\n  RATE_CHANGE: 'RateChange',\n  AFTER_INIT: 'AfterInit',\n  PLAY: 'Play',\n  PAUSE: 'Pause',\n  ENDED: 'Ended',\n  WAITING: 'Waiting',\n  STALLED: 'Stalled',\n  CANPLAY: 'Canplay',\n  LOADED_METADATA: 'LoadedMetadata',\n  ERROR: 'Error',\n  SEEKED: 'Seeked',\n  TIME_UPDATE: 'TimeUpdate',\n  VOLUME_CHANGE: 'VolumeChange',\n  PROGRESS: 'Progress',\n  ENTER_PIP: 'EnterPip',\n  EXIT_PIP: 'ExitPip',\n  LOADING_SHOW: 'LoadingShow',\n  LOADING_HIDE: 'LoadingHide',\n  MOUNTED: 'Mounted',\n  UPDATE_SIZE: 'UpdateSize',\n  BEFORE_DISPOSE: 'BeforeDispose',\n  UPDATE_OPTIONS: 'UpdateOptions',\n  OPEN_EDGE: 'OpenEdge',\n  CONTROL_SHOW: 'ControlShow',\n  CONTROL_HIDE: 'ControlHide',\n} as const;\n","import { isBool, isString } from '.';\nimport { CLASS_PREFIX } from '../constants';\nimport { Disposable } from '../types';\n\nconst SELECTOR_REGEX = /([\\w-]+)?(?:#([\\w-]+))?((?:\\.(?:[\\w-]+))*)/;\n\nexport function $<T extends HTMLElement>(\n  desc?: string,\n  attrs?: { [key: string]: any; },\n  children?: string | Array<Node>,\n  classPrefix = CLASS_PREFIX,\n): T {\n  let match: string[] = [];\n\n  if (desc) match = SELECTOR_REGEX.exec(desc) || [];\n\n  const el = document.createElement(match[1] || 'div');\n\n  if (match[2]) el.id = match[3];\n  if (match[3]) el.className = match[3].replace(/\\./g, ` ${classPrefix}`).trim();\n\n  if (attrs) {\n    Object.keys(attrs).forEach((name) => {\n      const value = attrs[name];\n      if (value === undefined) return;\n\n      if (/^on\\w+$/.test(name)) {\n        (el as any)[name] = value;\n      } else if (name === 'selected') {\n        if (value) {\n          el.setAttribute(name, 'true');\n        }\n      } else {\n        el.setAttribute(name, value);\n      }\n    });\n  }\n\n  if (children) {\n    if (isString(children)) {\n      el.innerHTML = children;\n    } else {\n      children.forEach((c) => el.appendChild(c));\n    }\n  }\n\n  return el as T;\n}\n\nexport function getEl(el: HTMLElement | string | undefined | null): HTMLElement | null {\n  if (!el) return null;\n  if (isString(el)) return document.querySelector(el);\n  return el;\n}\n\nexport function removeNode(node: Element): void {\n  if (node.remove) {\n    node.remove();\n  } if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n}\n\nexport function show(node: HTMLElement | SVGElement): void {\n  node.style.display = '';\n}\n\nexport function hide(node: HTMLElement | SVGElement): void {\n  node.style.display = 'none';\n}\n\nexport function addClass<T extends Element>(dom: T, cls = '', prefix = CLASS_PREFIX): T {\n  cls = cls.trim();\n  if (!cls) return dom;\n  if (dom.classList) {\n    cls.split(' ').forEach((c) => dom.classList.add(prefix + c));\n  } else {\n    const oldCls = (dom.className && (dom.className as any).baseVal) || '';\n    dom.setAttribute('class', (oldCls ? `${oldCls} ` : '') + cls.split(' ').map((c) => prefix + c).join(' '));\n  }\n  return dom;\n}\n\nexport function removeClass<T extends Element>(dom: T, cls: string, prefix = CLASS_PREFIX): T {\n  dom.classList.remove(prefix + cls);\n  return dom;\n}\n\nexport function containClass(dom: Element, cls: string, prefix = CLASS_PREFIX): boolean {\n  return dom.classList.contains(prefix + cls);\n}\n\nexport function toggleClass(dom: Element, cls: string, force?: boolean, prefix = CLASS_PREFIX): boolean {\n  cls = prefix + cls;\n  if (force) {\n    dom.classList.add(cls);\n    return true;\n  } if (force === false) {\n    dom.classList.remove(cls);\n    return true;\n  }\n  return dom.classList.toggle(cls, force);\n}\n\nconst svgNS = 'http://www.w3.org/2000/svg';\n\nexport function createSvg(cls?: string, d?: string, viewBox = '0 0 24 24'): SVGSVGElement {\n  const svg = document.createElementNS(svgNS, 'svg');\n  svg.setAttribute('viewBox', viewBox);\n  if (cls) addClass(svg, cls);\n  if (d) {\n    const path = document.createElementNS(svgNS, 'path');\n    path.setAttributeNS(null, 'd', d);\n    svg.appendChild(path);\n  }\n  return svg;\n}\n\nexport function getEventPath(ev: Event): EventTarget[] {\n  return (ev as any).path || ev.composedPath();\n}\n\nlet thirdOptsSupported = false;\n\ntry {\n  const options = Object.defineProperty({}, 'once', { get() { thirdOptsSupported = true; } });\n  window.addEventListener('test', null as any, options);\n// eslint-disable-next-line no-empty\n} catch (e) {}\n\nexport function isListenerObjOptsSupported(): boolean {\n  return thirdOptsSupported;\n}\n\nexport class DomListener implements Disposable {\n  constructor(\n    private node: EventTarget,\n    private type: string,\n    private handler: (e: any) => void,\n    private options?: boolean | AddEventListenerOptions,\n  ) {\n    this.options = isBool(options) ? options : options ? (thirdOptsSupported && options) : false;\n    node.addEventListener(type, handler, this.options);\n  }\n\n  dispose(): void {\n    if (!this.handler) return;\n    this.node.removeEventListener(this.type, this.handler, this.options);\n    this.node = null!;\n    this.handler = null!;\n    this.options = null!;\n  }\n}\n\nexport function measureElementSize(\n  dom: HTMLElement,\n): { width: number; height: number } {\n  const clone = dom.cloneNode(true) as HTMLElement;\n  clone.style.position = 'absolute';\n  clone.style.opacity = '0';\n  clone.removeAttribute('hidden');\n\n  const parent = dom.parentNode || document.body;\n\n  parent.appendChild(clone);\n\n  // const width = clone.scrollWidth;\n  // const height = clone.scrollHeight;\n\n  const rect = clone.getBoundingClientRect();\n\n  parent.removeChild(clone);\n\n  return rect;\n}\n","import { Disposable } from '../types';\n\ntype Fn = (ev: PointerEvent) => any;\n\nexport class Drag implements Disposable {\n  private element: HTMLElement;\n\n  private start: Fn;\n\n  private move: Fn;\n\n  private end: Fn | undefined;\n\n  private pending = false;\n\n  private lastEv!: PointerEvent;\n\n  constructor(dom: HTMLElement, start: Fn, move: Fn, end?: Fn) {\n    this.element = dom;\n    this.start = start;\n    this.move = move;\n    this.end = end;\n\n    dom.addEventListener('pointerdown', this.downHandler, true);\n    dom.addEventListener('pointerup', this.upHandler, true);\n    dom.addEventListener('pointercancel', this.upHandler, true);\n  }\n\n  private downHandler = (ev: PointerEvent): void => {\n    ev.preventDefault();\n    this.element.setPointerCapture(ev.pointerId);\n    this.element.addEventListener('pointermove', this.moveHandler, true);\n    this.start(ev);\n  };\n\n  private moveHandler = (ev: PointerEvent): void => {\n    ev.preventDefault();\n    this.lastEv = ev;\n    if (this.pending) return;\n    this.pending = true;\n    requestAnimationFrame(this.handlerMove);\n  };\n\n  private handlerMove = (): void => {\n    this.move(this.lastEv);\n    this.pending = false;\n  };\n\n  private upHandler = (ev: PointerEvent): void => {\n    ev.preventDefault();\n    this.element.releasePointerCapture(ev.pointerId);\n    this.element.removeEventListener('pointermove', this.moveHandler, true);\n\n    if (this.end) this.end(ev);\n  };\n\n  dispose(): void {\n    if (!this.element) return;\n    this.element.removeEventListener('pointerdown', this.downHandler, true);\n    this.element.removeEventListener('pointerup', this.upHandler, true);\n    this.element.removeEventListener('pointercancel', this.upHandler, true);\n    this.element.removeEventListener('pointermove', this.moveHandler, true);\n    this.start = null!;\n    this.move = null!;\n    this.end = null!;\n    this.lastEv = null!;\n    this.element = null!;\n  }\n}\n","import { EVENT } from '../constants';\nimport { Player } from '../player';\nimport { Disposable } from '../types';\n\nexport class Rect implements Disposable {\n  private rect!: DOMRect;\n\n  constructor(private element: HTMLElement, private player?: Player) {\n    this.rect = {} as DOMRect;\n    if (player) {\n      player.on(EVENT.UPDATE_SIZE, this.update);\n    }\n  }\n\n  get width(): number {\n    this.tryUpdate(this.rect.width);\n    return this.rect.width;\n  }\n\n  get height(): number {\n    this.tryUpdate(this.rect.height);\n    return this.rect.height;\n  }\n\n  get x(): number {\n    this.tryUpdate(this.rect.left);\n    return this.rect.left;\n  }\n\n  get y(): number {\n    this.tryUpdate(this.rect.top);\n    return this.rect.top;\n  }\n\n  private tryUpdate(v: number): void {\n    if (!v) this.update();\n  }\n\n  update = (): void => {\n    this.rect = this.element.getBoundingClientRect();\n  }\n\n  dispose(): void {\n    if (this.player) this.player.off(EVENT.UPDATE_SIZE, this.update);\n    this.element = null!;\n    this.rect = null!;\n  }\n}\n","const toString = Object.prototype.toString;\n\nexport function isString(o: any): o is string {\n  return typeof o === 'string' || o instanceof String;\n}\n\nexport function isBool(o: any): o is boolean {\n  return o === true || o === false || (toString.call(o) === '[object Boolean]');\n}\n\nexport function isFunction(o: any): o is Function {\n  return typeof o === 'function';\n}\n\nexport function isNumber(o: any): o is number {\n  return typeof o === 'number' || (toString.call(o) === '[object Number]');\n}\n","export const isIOS = /(iPad|iPhone|iPod)/gi.test(navigator.platform);\nexport const isIE = /MSIE|Trident/.test(navigator.userAgent);\nexport const isWin10IE = isIE && navigator.userAgent.indexOf('Windows NT 10.0') > -1;\nexport const isBrowser = typeof window !== 'undefined';\n","import { Disposable } from '../types';\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nclass EE {\n  constructor(public fn: Function, public context: any, public once: boolean) {\n    this.once = once || false;\n  }\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nexport class EventEmitter {\n  private _events: Record<string, any>;\n\n  private _eventsCount: number;\n\n  constructor() {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  emit(evt: string, a1?: any, a2?: any, a3?: any, a4?: any, a5?: any): boolean {\n    if (!this._events[evt]) return false;\n\n    const listeners = this._events[evt];\n    const len = arguments.length;\n    let args;\n    let i;\n\n    if (listeners.fn) {\n      if (listeners.once) this.off(evt, listeners.fn, undefined, true);\n\n      switch (len) {\n        case 1: return listeners.fn.call(listeners.context), true;\n        case 2: return listeners.fn.call(listeners.context, a1), true;\n        case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n        case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n        case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n        case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n      }\n\n      for (i = 1, args = new Array(len - 1); i < len; i++) {\n        args[i - 1] = arguments[i];\n      }\n\n      listeners.fn.apply(listeners.context, args);\n    } else {\n      const length = listeners.length;\n      let j;\n\n      for (i = 0; i < length; i++) {\n        if (listeners[i].once) this.off(evt, listeners[i].fn, undefined, true);\n\n        switch (len) {\n          case 1: listeners[i].fn.call(listeners[i].context); break;\n          case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n          case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n          case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n          default:\n            if (!args) {\n              for (j = 1, args = new Array(len - 1); j < len; j++) {\n                args[j - 1] = arguments[j];\n              }\n            }\n\n            listeners[i].fn.apply(listeners[i].context, args);\n        }\n      }\n    }\n\n    return true;\n  }\n\n  on(evt: string, fn: Function, context?: any, once = false): Disposable {\n    if (typeof fn !== 'function') {\n      throw new TypeError('The listener must be a function');\n    }\n\n    const listener = new EE(fn, context || this, once);\n\n    // eslint-disable-next-line no-unused-expressions\n    if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n    else if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [this._events[evt], listener];\n\n    return { dispose: this.off.bind(this, evt, fn) };\n  }\n\n  once(event: string, fn: Function, context?: any): Disposable {\n    return this.on(event, fn, context, true);\n  }\n\n  off(evt: string, fn?: Function, context?: any, once?: boolean): this {\n    if (!this._events[evt]) return this;\n    if (!fn) {\n      this.clearEvent(evt);\n      return this;\n    }\n\n    const listeners = this._events[evt];\n    const events = [];\n\n    if (listeners.fn) {\n      if (\n        listeners.fn === fn\n        && (!once || listeners.once)\n        && (!context || listeners.context === context)\n      ) {\n        this.clearEvent(evt);\n      }\n    } else {\n      for (let i = 0, length = listeners.length; i < length; i++) {\n        if (\n          listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n\n      //\n      // Reset the array, or remove it completely if we have no more listeners.\n      //\n      if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n      else this.clearEvent(evt);\n    }\n\n    return this;\n  }\n\n  removeAllListeners(evt?: string): this {\n    if (evt) {\n      if (this._events[evt]) this.clearEvent(evt);\n    } else {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    }\n\n    return this;\n  }\n\n  private clearEvent(evt: string) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);\n    else delete this._events[evt];\n  }\n}\n","import { Disposable } from '../types';\nimport {\n  $, dispose, removeNode,\n} from '.';\nimport { isString } from './is';\n\nexport class Component implements Disposable {\n  element: HTMLElement;\n\n  constructor(\n    container?: HTMLElement,\n    desc?: string | HTMLElement,\n    attrs?: { [key: string]: any; },\n    children?: string | Array<Node>,\n    classPrefix?: string,\n  ) {\n    if (desc && !isString(desc)) {\n      this.element = desc;\n    } else {\n      this.element = $(desc, attrs, children, classPrefix);\n    }\n    if (container) container.appendChild(this.element);\n  }\n\n  applyStyle(style: Partial<CSSStyleDeclaration>): void {\n    Object.assign(this.element.style, style);\n  }\n\n  dispose() {\n    if (!this.element) return;\n    removeNode(this.element);\n    this.element = null!;\n    dispose(this);\n  }\n}\n","import { Disposable } from '../types';\nimport { DomListener } from './dom';\n\nexport * from './drag';\nexport * from './rect';\nexport * from './dom';\nexport * from './is';\nexport * from './env';\nexport * from './emitter';\nexport * from './component';\n\nexport function clamp(n: number, lower = 0, upper = 1): number {\n  return Math.max(Math.min(n, upper), lower);\n}\n\nconst disposableMap: Map<any, Array<Disposable>> = new Map();\n\nexport function getDisposableMap(): Map<any, Array<Disposable>> {\n  return disposableMap;\n}\n\nexport function addDisposable<T extends Disposable>(key: any, disposable: T): T {\n  if (!disposableMap.has(key)) disposableMap.set(key, []);\n  disposableMap.get(key)!.push(disposable);\n  return disposable;\n}\n\nexport function dispose(key: any): void {\n  if (disposableMap.has(key)) {\n    disposableMap.get(key)!.forEach((item) => item.dispose());\n    disposableMap.delete(key);\n  }\n}\n\nexport function addDisposableListener<K extends keyof GlobalEventHandlersEventMap>(\n  key: any,\n  node: EventTarget,\n  type: K,\n  handler: (event: GlobalEventHandlersEventMap[K]) => void,\n  useCapture?: boolean): DomListener;\nexport function addDisposableListener(\n  key: any,\n  el: EventTarget,\n  type: string,\n  listener: EventListener,\n  options?: boolean | AddEventListenerOptions,\n): DomListener {\n  const domListener = new DomListener(el, type, listener, options);\n  if (key) addDisposable(key, domListener);\n  return domListener;\n}\n\nexport function throttle(fn: Function, ctx?: any): any {\n  let pending = false;\n  let first = true;\n  let args: typeof arguments | null = null;\n  return function () {\n    args = arguments;\n    if (first) {\n      first = false;\n      return fn.apply(ctx, args);\n    }\n\n    if (pending) return;\n    pending = true;\n\n    requestAnimationFrame(() => {\n      pending = false;\n      fn.apply(ctx, args);\n    });\n  };\n}\n\nexport function padStart(v: string | number, len = 2, str = '0'): string {\n  v = String(v);\n  if (v.length >= 2) return v;\n\n  for (let i = 0, l = len - v.length; i < l; i++) {\n    v = str + v;\n  }\n\n  return v;\n}\n\nexport function formatTime(seconds: number): string {\n  if (!seconds || seconds < 0) return '0:00';\n\n  seconds = Math.round(seconds);\n  if (seconds < 60) return `0:${padStart(seconds)}`;\n  if (seconds < 3600) {\n    return `${Math.floor(seconds / 60)}:${padStart(seconds % 60)}`;\n  }\n\n  return `${Math.floor(seconds / 3600)}:${padStart(\n    Math.floor((seconds % 3600) / 60),\n  )}:${padStart(seconds % 60)}`;\n}\n","import {\n  addClass, Component, hide, show,\n} from 'src/ts/utils';\n\nconst classLeft = 'tooltip-left';\nconst classRight = 'tooltip-right';\n\nexport class Tooltip extends Component {\n  constructor(container: HTMLElement, html?: string) {\n    super(container, '.tooltip_content');\n    addClass(container, 'tooltip');\n    if (html) this.html = html;\n  }\n\n  get html(): string {\n    return this.element.innerHTML;\n  }\n\n  set html(v: string) {\n    this.element.innerHTML = v;\n  }\n\n  setLeft(): void {\n    addClass(this.element, classLeft);\n  }\n\n  setRight(): void {\n    addClass(this.element, classRight);\n  }\n\n  hide(): void {\n    hide(this.element);\n  }\n\n  show(): void {\n    show(this.element);\n  }\n}\n","import { Player } from 'src/ts/player';\nimport {\n  addDisposable, Component, isFunction, isString,\n} from 'src/ts/utils';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { Disposable } from 'src/ts/types';\nimport { ControlItem, ControlItemEntry } from '..';\n\nexport class ControlBar extends Component {\n  constructor(container: HTMLElement, player: Player) {\n    super(container, '.control_bar');\n    const last = player.opts.controls.length - 1;\n    player.opts.controls.forEach((Item, i) => {\n      if (isString(Item)) Item = player.getControlItem(Item) as ControlItemEntry;\n      if (Item) {\n        let item: ControlItem;\n        if (isFunction(Item)) {\n          item = Item(player);\n        } else {\n          item = Item;\n        }\n        if (item.isSupport && !item.isSupport(player)) return;\n        let tooltip: Tooltip | undefined;\n        if (item.tip) tooltip = new Tooltip(item.element, item.tip);\n        if (item.init) {\n          if (item.init.length > 1 && !tooltip) tooltip = new Tooltip(item.element);\n          item.init(player, tooltip as Tooltip);\n        }\n        if (item.dispose) addDisposable(this, item as Disposable);\n        if (!tooltip) tooltip = item.tooltip;\n        if (tooltip) {\n          if (i === 0) {\n            tooltip.setLeft();\n          } else if (i === last) {\n            tooltip.setRight();\n          }\n        }\n        if (Item.id) player.registerControlItem(item, Item.id);\n\n        this.element.appendChild(item.element);\n      }\n    });\n  }\n}\n","import {\n  $, addDisposable, clamp, Component, formatTime, Rect,\n} from 'src/ts/utils';\n\nexport interface ThumbnailOptions {\n  startSecond?: number;\n  gapSecond?: number;\n  row?: number;\n  col?: number;\n  width?: number;\n  height?: number;\n  images?: string[];\n}\n\nexport interface ThumbImg {\n  url: string;\n  x: number;\n  y: number;\n}\n\nexport class Thumbnail extends Component {\n  private opts: Required<ThumbnailOptions> = {\n    startSecond: 0,\n    gapSecond: 10,\n    col: 5,\n    row: 5,\n    width: 160,\n    height: 90,\n    images: [],\n  };\n\n  private imgElement?: HTMLElement;\n\n  private timeElement: HTMLElement;\n\n  private thumbImgPrePic?: number;\n\n  private ssGapRatio?: number;\n\n  private rect: Rect;\n\n  constructor(container: HTMLElement, opts: ThumbnailOptions) {\n    super(container, '.thumb');\n\n    this.updateOptions(opts);\n\n    this.timeElement = this.element.appendChild($('.thumb_time'));\n    this.timeElement.textContent = '0:00';\n\n    this.rect = addDisposable(this, new Rect(this.element));\n  }\n\n  private getCurrentThumb(seconds: number): ThumbImg | void {\n    const i = Math.max(seconds / this.opts.gapSecond - this.ssGapRatio!, 0) | 0;\n    const url = this.opts.images[(i / this.thumbImgPrePic!) | 0];\n\n    if (!url) return;\n\n    const x = (i % this.opts.col) * this.opts.width;\n    const y = ~~((i % this.thumbImgPrePic!) / this.opts.row) * this.opts.height;\n\n    return { url, x, y };\n  }\n\n  updateOptions(opts: ThumbnailOptions): void {\n    Object.assign(this.opts, opts);\n\n    if (this.opts.images.length) {\n      if (!this.imgElement) {\n        this.imgElement = this.element.appendChild($('.thumb_img'));\n      }\n      this.imgElement.style.width = `${this.opts.width}px`;\n      this.imgElement.style.height = `${this.opts.height}px`;\n      this.thumbImgPrePic = this.opts.col * this.opts.row;\n      this.ssGapRatio = this.opts.startSecond / this.opts.gapSecond;\n    }\n  }\n\n  update(seconds: number, x: number, maxX: number): void {\n    this.timeElement.textContent = formatTime(seconds);\n\n    if (this.imgElement) {\n      const thumb = this.getCurrentThumb(seconds);\n      if (thumb) {\n        this.imgElement.style.backgroundImage = `url(${thumb.url})`;\n        this.imgElement.style.backgroundPosition = `-${thumb.x}px -${thumb.y}px`;\n      }\n    } else {\n      this.rect.update();\n    }\n\n    const half = this.rect.width / 2;\n\n    this.applyStyle({\n      left: `${clamp(x - half, 0, Math.max(0, maxX - 2 * half))}px`,\n    });\n  }\n}\n","import { EVENT } from 'src/ts/constants';\nimport { Player } from 'src/ts/player';\nimport {\n  $, addDisposable, addDisposableListener, clamp, Component, Drag, Rect, throttle,\n} from 'src/ts/utils';\nimport { Thumbnail } from './thumbnail';\n\nexport class Progress extends Component {\n  private playedBar: HTMLElement;\n\n  private bufBar: HTMLElement;\n\n  private bars: HTMLElement;\n\n  private rect: Rect;\n\n  private thumbnail: Thumbnail;\n\n  private dragging = false;\n\n  constructor(container: HTMLElement, private player: Player) {\n    super(container, '.progress');\n    this.bars = this.element.appendChild($('.progress_bars'));\n    this.bufBar = this.bars.appendChild($('.progress_buf'));\n    this.playedBar = this.bars.appendChild($('.progress_played'));\n\n    this.rect = addDisposable(this, new Rect(this.bars, player));\n    this.thumbnail = addDisposable(this, new Thumbnail(this.element, player.opts.thumbnail));\n\n    addDisposable(this, new Drag(this.bars, this.onDragStart, this.onDragging, this.onDragEnd));\n    addDisposable(this, player.on(EVENT.TIME_UPDATE, this.updatePlayedBar));\n    addDisposable(this, player.on(EVENT.PROGRESS, this.updateBufBar));\n    addDisposable(this, player.on(EVENT.UPDATE_OPTIONS, () => this.thumbnail.updateOptions(player.opts.thumbnail)));\n    addDisposableListener(this, this.bars, 'mousemove', throttle((ev: MouseEvent) => this.updateThumbnail(ev.pageX)), true);\n  }\n\n  private setPlayedBarLength(percentage: number): void {\n    this.playedBar.style.transform = `scaleX(${clamp(percentage)})`;\n  }\n\n  private setBufBarLength(percentage: number): void {\n    this.bufBar.style.transform = `scaleX(${clamp(percentage)})`;\n  }\n\n  private onDragStart = (ev: PointerEvent) => {\n    this.dragging = true;\n    this.onDragging(ev);\n  }\n\n  private onDragging = (ev: PointerEvent) => {\n    const x = ev.pageX - this.rect.x;\n    this.setPlayedBarLength(x / this.rect.width);\n    this.updateThumbnail(ev.pageX);\n  }\n\n  private onDragEnd = (ev: PointerEvent) => {\n    this.dragging = false;\n    this.player.seek(this.getCurrentTime(ev.pageX));\n  }\n\n  private updateThumbnail(x: number): void {\n    this.thumbnail.update(this.getCurrentTime(x), x - this.rect.x, this.rect.width);\n  }\n\n  private updateBufBar = (): void => {\n    const bufLen = this.player.buffered.length;\n\n    if (!bufLen) return this.setBufBarLength(0);\n\n    const curTime = this.player.currentTime;\n    let percentage = 0;\n\n    this.player.eachBuffer((start, end) => {\n      if (start <= curTime && end >= curTime) {\n        percentage = end / this.player.duration;\n        return true;\n      }\n    });\n\n    this.setBufBarLength(percentage);\n  }\n\n  private updatePlayedBar = (): void => {\n    if (this.dragging) return;\n    this.setPlayedBarLength(this.player.currentTime / this.player.duration);\n  }\n\n  private getCurrentTime(x: number): number {\n    return clamp(((x - this.rect.x) / this.rect.width)) * this.player.duration;\n  }\n}\n","import { EVENT } from 'src/ts/constants';\nimport { Player } from 'src/ts/player';\nimport { Disposable } from 'src/ts/types';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport {\n  $, addClass, addDisposable, addDisposableListener, Component, containClass, removeClass,\n} from 'src/ts/utils';\nimport { ControlBar } from './items';\nimport { Progress } from './progress';\n\nconst classHide = 'control-hide';\nconst classBgHide = 'control_bg-hide';\n\nexport interface ControlItem extends Partial<Disposable> {\n  element: HTMLElement;\n  id?: string;\n  tip?: string;\n  tooltip?: Tooltip;\n  init?: (player: Player, tooltip: Tooltip) => void;\n  isSupport?: (player: Player) => boolean;\n  [key: string]: any;\n}\n\nexport type ControlItemEntry = ControlItem | (((player: Player) => ControlItem) & { id?: string });\n\nexport class Control extends Component {\n  private readonly bgElement: HTMLElement;\n\n  private showTimer: any;\n\n  private delayHidTime = 3000;\n\n  private latch = 0;\n\n  constructor(container: HTMLElement, private player: Player) {\n    super(container, '.control');\n    this.bgElement = container.appendChild($('.control_bg'));\n\n    addDisposable(this, new Progress(this.element, player));\n    addDisposable(this, new ControlBar(this.element, player));\n\n    addDisposable(this, player.on(EVENT.PAUSE, this.show));\n    addDisposable(this, player.on(EVENT.PLAY, this.showTransient));\n    addDisposableListener(this, player.element, 'mousemove', this.showTransient);\n    addDisposableListener(this, player.element, 'mouseleave', this.tryHide);\n\n    this.showTransient();\n  }\n\n  get isActive(): boolean {\n    return !containClass(this.element, classHide);\n  }\n\n  require(): void {\n    this.latch++;\n  }\n\n  release(): void {\n    if (this.latch) {\n      this.latch--;\n      this.tryHide();\n    }\n  }\n\n  show = (): void => {\n    removeClass(this.element, classHide);\n    removeClass(this.bgElement, classBgHide);\n    this.player.element.style.cursor = '';\n    this.player.emit(EVENT.CONTROL_SHOW);\n  }\n\n  hide = (): void => {\n    addClass(this.element, classHide);\n    addClass(this.bgElement, classBgHide);\n    this.player.element.style.cursor = 'none';\n    this.player.emit(EVENT.CONTROL_HIDE);\n  }\n\n  showTransient = (): void => {\n    this.show();\n    clearTimeout(this.showTimer);\n    this.showTimer = setTimeout(this.tryHide, this.delayHidTime);\n  }\n\n  tryHide = (): void => {\n    if (this.player.video.played.length && !this.player.paused && !this.latch) {\n      this.hide();\n    }\n  }\n}\n","import { CLASS_PLAYER, EVENT } from 'src/ts/constants';\nimport { Player } from 'src/ts/player';\nimport {\n  addClass, addDisposable, Component, containClass, removeClass,\n} from 'src/ts/utils';\n\nconst classLoading = '-loading';\nexport class Loading extends Component {\n  private showTimer: any;\n\n  private startWaitingTime = 0;\n\n  constructor(container: HTMLElement, private player: Player) {\n    super(container, player.opts.loadingElement || '.loading', undefined, '<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>');\n\n    addDisposable(this, player.on(EVENT.CANPLAY, this.hide));\n    addDisposable(this, player.on(EVENT.WAITING, () => {\n      if (!this.player.currentTime) return;\n      this.tryShow();\n    }));\n    addDisposable(this, player.on(EVENT.STALLED, () => {\n      const curTime = this.player.currentTime;\n      if (!curTime) return;\n\n      let show = true;\n      this.player.eachBuffer((start, end) => {\n        if (start <= curTime && end > curTime) {\n          show = false;\n          return true;\n        }\n      });\n\n      if (show) this.tryShow();\n    }));\n  }\n\n  get isActive(): boolean {\n    return containClass(this.player.element, classLoading, CLASS_PLAYER);\n  }\n\n  private _checkCanplay = (): void => {\n    if (this.startWaitingTime !== this.player.currentTime) {\n      this.hide();\n      clearTimeout(this.showTimer);\n      this.player.off(EVENT.TIME_UPDATE, this._checkCanplay);\n    }\n  };\n\n  private checkCanplay(): void {\n    this.startWaitingTime = this.player.currentTime;\n    this.player.off(EVENT.TIME_UPDATE, this._checkCanplay);\n    this.player.on(EVENT.TIME_UPDATE, this._checkCanplay);\n  }\n\n  private tryShow(): void {\n    this.checkCanplay();\n    clearTimeout(this.showTimer);\n    this.showTimer = setTimeout(this.show, 100);\n  }\n\n  show = (): void => {\n    addClass(this.player.element, classLoading, CLASS_PLAYER);\n    this.player.emit(EVENT.LOADING_SHOW);\n  }\n\n  hide = () => {\n    removeClass(this.player.element, classLoading, CLASS_PLAYER);\n    this.player.emit(EVENT.LOADING_HIDE);\n  }\n}\n","import { Player } from 'src/ts/player';\nimport {\n  $, addClass, show, hide, addDisposableListener, Rect, Component,\n} from 'src/ts/utils';\n\nexport interface ContextMenuItem {\n  id?: string;\n  html?: string;\n  disabled?: boolean;\n  invisible?: boolean;\n  checked?: boolean;\n  init?: (player: Player, item: ContextMenuItem) => void;\n  show?: (player: Player, item: ContextMenuItem) => void;\n  click?: (player: Player, item: ContextMenuItem) => void;\n}\n\nexport class ContextMenu extends Component {\n  private rect: Rect;\n\n  private showed = false;\n\n  constructor(\n    container: HTMLElement,\n    private player: Player,\n    private items: ContextMenuItem[],\n  ) {\n    super(container, '.contextmenu');\n    hide(this.element);\n\n    this.rect = new Rect(this.element, player);\n\n    this.items.forEach((item) => item.init && item.init(player, item));\n\n    addDisposableListener(this, player.element, 'contextmenu', (ev: MouseEvent) => {\n      this.hide();\n      if (!player.opts.contextMenuToggle || !this.showed) {\n        if (this.renderItems()) {\n          ev.preventDefault();\n          ev.stopPropagation();\n\n          show(this.element);\n          this.rect.update();\n          this.player.rect.update();\n\n          const { width, height } = this.rect;\n          const { x, y } = this.player.rect;\n          const { innerWidth, innerHeight } = window;\n          const { clientX, clientY } = ev;\n\n          let left = clientX - x;\n          let top = clientY - y;\n\n          if (clientX + width > innerWidth) left = innerWidth - width;\n          if (clientY + height > innerHeight) top = innerHeight - height;\n\n          this.applyStyle({ left: `${left}px`, top: `${top}px` });\n        }\n      }\n\n      this.showed = !this.showed;\n    });\n\n    addDisposableListener(this, document, 'click', () => {\n      this.showed = false;\n      this.hide();\n    });\n  }\n\n  private getDomNodes(): HTMLElement[] {\n    return this.items.filter((x) => x && !x.invisible).map((item) => {\n      const el = $('.contextmenu_item');\n      if (item.show) item.show(this.player, item);\n      if (item.html) el.innerHTML = item.html;\n      if (item.disabled) addClass(el, 'contextmenu_item-disabled');\n      if (item.checked) addClass(el, 'contextmenu_item-checked');\n      if (item.click) {\n        el.addEventListener('click', () => (item as any).click(this.player, item), false);\n      }\n      return el;\n    });\n  }\n\n  private renderItems(): boolean {\n    const items = this.getDomNodes();\n    if (!items.length) return false;\n    this.element.textContent = '';\n    const frag = document.createDocumentFragment();\n    items.forEach((item) => frag.appendChild(item));\n    this.element.appendChild(frag);\n    return true;\n  }\n\n  get isActive(): boolean {\n    return this.element.style.display !== 'none';\n  }\n\n  hide = () => {\n    hide(this.element);\n  }\n}\n","import { Disposable } from 'src/ts/types';\nimport { addClass, Component } from 'src/ts/utils';\n\ntype Position = 'center' | 'left-top' | 'right-top' | 'left-bottom' | 'right-bottom'\n\nexport class ToastItem extends Component {\n  timer!: any;\n\n  constructor(\n    container: HTMLElement,\n    html: string,\n    readonly position: Position = 'center',\n  ) {\n    super(container, '.toast');\n    addClass(this.element, `toast-${position}`);\n    this.element.innerHTML = html;\n  }\n\n  dispose(): void {\n    super.dispose();\n    clearTimeout(this.timer);\n  }\n}\n\nexport class Toast implements Disposable {\n  private toasts: ToastItem[] = [];\n\n  private container: HTMLElement;\n\n  constructor(container: HTMLElement) {\n    this.container = container;\n  }\n\n  show(html: string, position?: Position, timeout = 3000): ToastItem {\n    let toastItem = this.toasts.find((t) => t.position === position);\n\n    if (toastItem) {\n      clearTimeout(toastItem.timer);\n      toastItem.element.innerHTML = html;\n    } else {\n      toastItem = new ToastItem(this.container, html, position);\n      this.toasts.push(toastItem);\n    }\n\n    if (timeout > 0) {\n      toastItem.timer = setTimeout(this.close.bind(this, toastItem), timeout);\n    }\n\n    return toastItem;\n  }\n\n  close(toastItem?: ToastItem): void {\n    if (toastItem) {\n      this.toasts = this.toasts.filter((x) => x !== toastItem);\n      return toastItem.dispose();\n    }\n\n    this.toasts.forEach((item) => item.dispose());\n    this.toasts = [];\n  }\n\n  dispose(): void {\n    if (!this.toasts) return;\n    this.close();\n    this.toasts = null!;\n    this.container = null!;\n  }\n}\n","import { CLASS_PLAYER, EVENT } from '../constants';\nimport { Player } from '../player';\nimport { Disposable } from '../types';\nimport {\n  addClass, addDisposable, addDisposableListener, dispose, isFunction, isIOS, removeClass,\n} from '../utils';\n\nconst CLASS_FULL = '-full';\n\nexport class Fullscreen implements Disposable {\n  private target!: HTMLElement;\n\n  private readonly prefix = this.getPrefix();\n\n  constructor(private player: Player) {\n    addDisposableListener(this, document, this.prefix === 'ms' ? 'MSFullscreenChange' : `${this.prefix}fullscreenchange` as any, () => {\n      let evt = '';\n      if (this.isActive) {\n        this.addClass();\n        evt = EVENT.ENTER_FULLSCREEN;\n      } else {\n        this.removeClass();\n        evt = EVENT.EXIT_FULLSCREEN;\n      }\n      this.player.emit(evt);\n      this.player.emit(EVENT.UPDATE_SIZE);\n    });\n\n    if (player.opts.dblclickFullscreen) this.enableDblclick();\n\n    addDisposable(this, player.on(EVENT.UPDATE_OPTIONS, () => {\n      this.disableDblclick();\n      if (player.opts.dblclickFullscreen) this.enableDblclick();\n    }));\n\n    this.setTarget();\n    if (this.isActive) this.addClass();\n  }\n\n  private getPrefix(): string {\n    if (isFunction(document.exitFullscreen)) return '';\n\n    let prefix = '';\n    ['webkit', 'moz', 'ms'].forEach((p) => {\n      if (\n        isFunction((document as any)[`${p}ExitFullscreen`])\n        || isFunction((document as any)[`${p}CancelFullScreen`])\n      ) {\n        prefix = p;\n      }\n    });\n\n    return prefix;\n  }\n\n  get requestFullscreen(): Element['requestFullscreen'] {\n    return (\n      HTMLElement.prototype.requestFullscreen\n      || (HTMLElement.prototype as any).webkitRequestFullscreen\n      || (HTMLElement.prototype as any).mozRequestFullScreen\n      || (HTMLElement.prototype as any).msRequestFullscreen\n    );\n  }\n\n  get exitFullscreen(): Document['exitFullscreen'] {\n    return (\n      HTMLDocument.prototype.exitFullscreen\n      || (HTMLDocument.prototype as any).webkitExitFullscreen\n      || (HTMLDocument.prototype as any).cancelFullScreen\n      || (HTMLDocument.prototype as any).mozCancelFullScreen\n      || (HTMLDocument.prototype as any).msExitFullscreen\n    );\n  }\n\n  get fullscreenElement(): HTMLElement {\n    return (\n      document.fullscreenElement\n      || (document as any).mozFullScreenElement\n      || (document as any).msFullscreenElement\n      || (document as any).webkitFullscreenElement\n    );\n  }\n\n  get isActive(): boolean {\n    return this.fullscreenElement === this.target;\n  }\n\n  private addClass(): void {\n    addClass(this.player.element, CLASS_FULL, CLASS_PLAYER);\n  }\n\n  private removeClass(): void {\n    removeClass(this.player.element, CLASS_FULL, CLASS_PLAYER);\n  }\n\n  enableDblclick(): void {\n    this.player.video.addEventListener('dblclick', this.toggle);\n  }\n\n  disableDblclick(): void {\n    this.player.video.removeEventListener('dblclick', this.toggle);\n  }\n\n  setTarget(dom?: HTMLElement, video?: HTMLVideoElement): void {\n    this.target = (dom && isIOS ? video : dom) || (isIOS ? this.player.video : this.player.element);\n    if (this.isActive) this.enter();\n  }\n\n  enter(): void {\n    if (isIOS) {\n      (this.target as any).webkitEnterFullscreen();\n    } else {\n      this.requestFullscreen.call(this.target, { navigationUI: 'hide' });\n      this.player.emit(EVENT.UPDATE_SIZE);\n    }\n  }\n\n  exit(): boolean {\n    if (!this.isActive) return false;\n    if (isIOS) {\n      (this.target as any).webkitExitFullscreen();\n    } else {\n      this.exitFullscreen.call(document);\n      this.player.emit(EVENT.UPDATE_SIZE);\n    }\n    return true;\n  }\n\n  toggle = (): void => {\n    if (this.isActive) {\n      this.exit();\n    } else {\n      this.enter();\n    }\n  }\n\n  dispose(): void {\n    if (!this.player) return;\n    this.player.off(EVENT.ENTER_FULLSCREEN);\n    this.player.off(EVENT.EXIT_FULLSCREEN);\n    this.disableDblclick();\n    this.player = null!;\n    dispose(this);\n  }\n}\n","import { CLASS_PLAYER, EVENT } from '../constants';\nimport { Player } from '../player';\nimport { Disposable } from '../types';\nimport { addClass, containClass, removeClass } from '../utils';\n\nconst classFull = '-web-full';\n\nexport class WebFullscreen implements Disposable {\n  private player: Player\n\n  constructor(player: Player) {\n    this.player = player;\n  }\n\n  get isActive(): boolean {\n    return containClass(this.player.element, classFull, CLASS_PLAYER);\n  }\n\n  enter(): void {\n    addClass(this.player.element, classFull, CLASS_PLAYER);\n    this.player.emit(EVENT.WEB_ENTER_FULLSCREEN);\n    this.player.emit(EVENT.UPDATE_SIZE);\n  }\n\n  exit(): boolean {\n    if (!this.isActive) return false;\n    removeClass(this.player.element, classFull, CLASS_PLAYER);\n    this.player.emit(EVENT.WEB_EXIT_FULLSCREEN);\n    this.player.emit(EVENT.UPDATE_SIZE);\n    return true;\n  }\n\n  toggle = (): void => {\n    if (this.isActive) {\n      this.exit();\n    } else {\n      this.enter();\n    }\n  }\n\n  dispose(): void {\n    if (!this.player) return;\n    this.player.off(EVENT.WEB_ENTER_FULLSCREEN);\n    this.player.off(EVENT.WEB_EXIT_FULLSCREEN);\n    this.player = null!;\n  }\n}\n","import {\n  $, addClass, addDisposableListener, Component, getEventPath, removeClass,\n} from 'src/ts/utils';\n\nconst classActive = 'popover-active';\n\nexport class Popover extends Component {\n  readonly panelElement: HTMLElement;\n\n  readonly maskElement: HTMLElement;\n\n  constructor(\n    container: HTMLElement,\n    private readonly onHide?: (ev?: MouseEvent) => void,\n    style?: Partial<CSSStyleDeclaration>,\n    left?: boolean,\n  ) {\n    super(container, '.popover');\n    this.maskElement = this.element.appendChild($('.popover_mask'));\n    this.panelElement = this.element.appendChild($('.popover_panel'));\n\n    if (style) this.applyPanelStyle(style);\n\n    if (left) addClass(this.panelElement, 'popover_panel-left');\n\n    addDisposableListener(this, this.maskElement, 'click', (ev: MouseEvent) => {\n      ev.stopPropagation();\n      if (getEventPath(ev).includes(this.panelElement)) return;\n      this.hide(ev);\n    });\n  }\n\n  applyPanelStyle(style: Partial<CSSStyleDeclaration>): void {\n    Object.assign(this.panelElement.style, style);\n  }\n\n  show() {\n    addClass(this.element, classActive);\n  }\n\n  hide(ev?: MouseEvent) {\n    removeClass(this.element, classActive);\n    if (this.onHide) this.onHide(ev);\n  }\n}\n","import {\n  addDisposableListener, Component, containClass, toggleClass,\n} from 'src/ts/utils';\n\nconst activeClass = 'switch-active';\nexport class Switch extends Component {\n  constructor(container: HTMLElement, value?: boolean, change?: (v: boolean) => void) {\n    super(container, '.switch');\n    this.toggle(value || false);\n\n    if (change) {\n      addDisposableListener(this, this.element, 'click', () => {\n        this.toggle();\n        change(containClass(this.element, activeClass));\n      });\n    }\n  }\n\n  toggle(value?: boolean): void {\n    toggleClass(this.element, activeClass, value);\n  }\n}\n","import { isBrowser } from '../utils';\n\nconst data: Record<string, Record<string, string>> = Object.create(null);\n\nexport const FULL_SCREEN = 'Fullscreen';\nexport const EXIT_FULL_SCREEN = 'Exit fullscreen';\nexport const WEB_FULL_SCREEN = 'Web fullscreen';\nexport const WEB_EXIT_FULL_SCREEN = 'Web exit fullscreen';\nexport const SETTINGS = 'Settings';\nexport const PLAY = 'Play';\nexport const PAUSE = 'Pause';\nexport const MUTE = 'Mute';\nexport const UNMUTE = 'Unmute';\nexport const NORMAL = 'Normal';\nexport const SPEED = 'Speed';\nexport const PIP = 'Picture in Picture';\nexport const LOOP = 'Loop';\nexport const CURRENT_VOLUME = 'Current volume';\nexport const AIRPLAY = 'Airplay';\n\nexport const I18n = {\n  defaultLang: '',\n  currentLang: '',\n  t(key: string, lang?: string): string {\n    return data[lang || I18n.currentLang || I18n.defaultLang]?.[key] || key;\n  },\n  add(lang: string, transData: Record<string, string>): void {\n    data[lang] = { ...data[lang], ...transData };\n    I18n.fallback();\n  },\n  fallback(): void {\n    Object.keys(data).forEach((k) => {\n      data[k.split('-')[0]] = data[k];\n    });\n  },\n  setCurrentLang(lang?: string): void {\n    this.currentLang = lang || navigator.language || (navigator as any).userLanguage;\n    if (this.currentLang) this.currentLang = this.currentLang.toLowerCase();\n  },\n  setDefaultLang(lang?: string): void {\n    this.defaultLang = lang || '';\n  },\n};\n\nI18n.add('zh-cn', {\n  [FULL_SCREEN]: '',\n  [EXIT_FULL_SCREEN]: '',\n  [WEB_FULL_SCREEN]: '',\n  [WEB_EXIT_FULL_SCREEN]: '',\n  [SETTINGS]: '',\n  [PLAY]: '',\n  [PAUSE]: '',\n  [MUTE]: '',\n  [UNMUTE]: '',\n  [NORMAL]: '',\n  [SPEED]: '',\n  [PIP]: '',\n  [LOOP]: '',\n  [CURRENT_VOLUME]: '',\n  [AIRPLAY]: '',\n});\nif (isBrowser) I18n.setCurrentLang();\n","import { addClass, createSvg } from '../utils';\n\nconst play = 'M6 2.914v18.172L20.279 12 6 2.914z';\nconst pause = 'M14.333 20.133H19V3.8h-4.667M5 20.133h4.667V3.8H5v16.333z';\nconst volume = 'M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z';\nconst muted = 'M3,9H7L12,4V20L7,15H3V9M16.59,12L14,9.41L15.41,8L18,10.59L20.59,8L22,9.41L19.41,12L22,14.59L20.59,16L18,13.41L15.41,16L14,14.59L16.59,12Z';\nconst cog = 'M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z';\nconst webEnterFullscreen = 'M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z';\nconst webExitFullscreen = 'M19.5,3.09L15,7.59V4H13V11H20V9H16.41L20.91,4.5L19.5,3.09M4,13V15H7.59L3.09,19.5L4.5,20.91L9,16.41V20H11V13H4Z';\nconst enterFullscreen = 'M3 3h6.429v2.571H5.57V9.43H3V3m11.571 0H21v6.429h-2.571V5.57H14.57V3m3.858 11.571H21V21h-6.429v-2.571h3.858V14.57m-9 3.858V21H3v-6.429h2.571v3.858H9.43z';\nconst exitFullscreen = 'M14.571 14.571H21v2.572h-3.857V21H14.57v-6.429M3 14.571h6.429V21H6.857v-3.857H3V14.57M6.857 3H9.43v6.429H3V6.857h3.857V3M21 6.857V9.43h-6.429V3h2.572v3.857H21z';\nconst airplay = 'M6 22h12l-6-6m9-13H3a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H3V5h18v12h-4v2h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z';\n\nfunction createIcon(icon: string) {\n  return (cls?: string) => {\n    const svg = createSvg('icon', icon);\n    if (cls) addClass(svg, cls);\n    return svg;\n  };\n}\n\nconst Icon: {\n  // eslint-disable-next-line no-use-before-define\n  register: typeof registerIcon;\n} & {\n  [key: string]: <T extends Element>(cls?: string) => T;\n} = Object.create(null);\n\nfunction registerIcon(iconName: string, icon: (cls?: string) => any): void {\n  Icon[iconName] = icon;\n}\n\nObject.defineProperty(Icon, 'register', { value: registerIcon });\n\nregisterIcon('play', createIcon(play));\nregisterIcon('pause', createIcon(pause));\nregisterIcon('volume', createIcon(volume));\nregisterIcon('muted', createIcon(muted));\nregisterIcon('cog', createIcon(cog));\nregisterIcon('webEnterFullscreen', createIcon(webEnterFullscreen));\nregisterIcon('webExitFullscreen', createIcon(webExitFullscreen));\nregisterIcon('enterFullscreen', createIcon(enterFullscreen));\nregisterIcon('exitFullscreen', createIcon(exitFullscreen));\nregisterIcon('airplay', createIcon(airplay));\n\nexport { Icon };\n","import { Popover } from 'src/ts/components/popover';\nimport { Switch } from 'src/ts/components/switch';\nimport { EVENT } from 'src/ts/constants';\nimport { I18n, SETTINGS } from 'src/ts/features/i18n';\nimport { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport {\n  $, addClass, addDisposable, addDisposableListener, Component, getEventPath, measureElementSize, removeClass,\n} from 'src/ts/utils';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { ControlItem } from '..';\n\nexport interface SettingItemOption<T = any> {\n  html?: string;\n  selectedHtml?: string;\n  value?: T;\n}\n\nexport interface SettingItem<T = any> {\n  id?: string;\n  html?: string;\n  type?: 'switch' | 'select';\n  checked?: boolean;\n  options?: SettingItemOption<T>[];\n  value?: T;\n  init?: (player: Player, item: SettingItem) => void;\n  change?: (value: T, player: Player, item: SettingItem) => void;\n  _switch?: Switch;\n  _selectedElement?: HTMLElement;\n  _optionElements?: HTMLElement[];\n  _optionElement?: HTMLElement;\n  [key: string]: any;\n}\n\nexport class SettingPanelOption extends Component {}\n\nexport class SettingPanelHome extends Component {}\n\nexport class SettingPanel extends Component {\n  constructor(container: HTMLElement) {\n    super(container, '.control_setting_panel');\n  }\n}\n\nconst classActive = 'control_setting-active';\nconst classOptionActive = 'control_setting_option-active';\n\nclass Setting extends Component implements ControlItem {\n  private readonly items: SettingItem[];\n\n  private readonly homeElement!: HTMLElement;\n\n  private readonly popover: Popover;\n\n  private currentOptionElement!: HTMLElement;\n\n  tooltip!: Tooltip;\n\n  tip = I18n.t(SETTINGS);\n\n  constructor(private player: Player) {\n    super(undefined, '.control_setting');\n    this.items = player._settingItems;\n    this.element.appendChild(Icon.cog());\n    this.popover = new Popover(this.element, this.hide, { willChange: 'width, height' });\n    this.homeElement = this.popover.panelElement.appendChild($());\n\n    addDisposableListener(this, this.element, 'click', this.show);\n    addDisposable(this, player.on(EVENT.MOUNTED, () => this.showHomePage()));\n  }\n\n  init(player: Player, tooltip: Tooltip) {\n    this.tooltip = tooltip;\n    this.items.forEach((item) => item.init && item.init(player, item));\n    this.renderHome();\n  }\n\n  private renderHome(): void {\n    this.items.forEach((item) => {\n      const el = (!item._switch && !item._selectedElement && !item._optionElement) ? $('.control_setting_item') : null;\n\n      if (el) {\n        el.appendChild($(undefined, undefined, item.html));\n        if (item.type !== 'switch') el.appendChild($('.spacer'));\n      }\n\n      if (item.type === 'switch') {\n        if (!item._switch) item._switch = new Switch(el!, item.checked);\n      } else {\n        if (!item.options || !item.options.length) return;\n        if (!item._selectedElement) {\n          addClass(el!, 'control_setting_item-select');\n          item._selectedElement = el!.appendChild($());\n        }\n\n        const opt = item.options.find((x) => x.value === item.value);\n        if (!opt) return;\n        item._selectedElement.innerHTML = opt.selectedHtml || opt.html || '';\n      }\n\n      if (item._optionElement) {\n        item._optionElement.style.display = 'none';\n      }\n\n      if (el) {\n        el.addEventListener('click', this.onItemClick(item));\n        this.homeElement.appendChild(el);\n      }\n    });\n  }\n\n  private renderOptions(): void {\n    this.items.forEach((item) => {\n      if (item.type === 'switch') return;\n\n      if (!item._optionElement) {\n        item._optionElement = this.popover.panelElement.appendChild($());\n        const back = item._optionElement.appendChild($('.control_setting_item.control_setting_back'));\n        back.innerHTML = item.html || '';\n        back.addEventListener('click', this.back(item));\n      }\n\n      if (!item._optionElements && item.options) {\n        item._optionElements = item.options.map((opt) => {\n          const el = item._optionElement!.appendChild($('.control_setting_option', undefined, opt.html));\n          el.addEventListener('click', this.onOptionClick(item, opt));\n          return el;\n        });\n      }\n\n      if (item._optionElements) {\n        item._optionElements.forEach((el, i) => {\n          removeClass(el, classOptionActive);\n          if (item.value === item.options![i].value) {\n            addClass(el, classOptionActive);\n          }\n        });\n      }\n\n      item._optionElement.style.display = 'none';\n    });\n  }\n\n  private onItemClick = (item: SettingItem) => () => {\n    if (item.type === 'switch') {\n      item.checked = !item.checked;\n      item._switch!.toggle(item.checked);\n      if (item.change) item.change(item.checked, this.player, item);\n    } else {\n      this.renderOptions();\n      this.showOptionPage(item._optionElement as HTMLElement);\n    }\n  }\n\n  private onOptionClick = (item: SettingItem, option: SettingItemOption) => () => {\n    if (item.value !== option.value) {\n      item.value = option.value;\n      if (item.change) item.change(option.value, this.player, item);\n    }\n    this.renderHome();\n    this.showHomePage(item._optionElement as HTMLElement);\n  }\n\n  private back = (item: SettingItem) => () => {\n    this.showHomePage(item._optionElement as HTMLElement);\n  }\n\n  private showOptionPage(opt: HTMLElement): void {\n    this.homeElement.style.display = 'none';\n    opt.style.display = '';\n\n    const { width, height } = measureElementSize(opt);\n\n    this.popover.applyPanelStyle({\n      width: `${width}px`,\n      height: `${height}px`,\n    });\n\n    this.currentOptionElement = opt;\n  }\n\n  private showHomePage(opt?: HTMLElement): void {\n    if (opt) opt.style.display = 'none';\n\n    this.homeElement.style.display = '';\n\n    const { width, height } = measureElementSize(this.homeElement);\n\n    this.popover.applyPanelStyle({\n      width: `${width}px`,\n      height: `${height}px`,\n    });\n  }\n\n  show = (ev?: MouseEvent) => {\n    if (ev && getEventPath(ev).includes(this.popover.element)) return;\n    this.tooltip.hide();\n    this.renderHome();\n    this.popover.show();\n    this.homeElement.style.display = '';\n    addClass(this.element, classActive);\n  }\n\n  hide = (ev?: MouseEvent) => {\n    if (ev) ev.stopPropagation();\n\n    this.tooltip.show();\n    removeClass(this.element, classActive);\n\n    if (this.currentOptionElement) {\n      setTimeout(() => this.showHomePage(this.currentOptionElement), 200);\n    }\n  }\n}\n\nconst settingControlItem = (player: Player) => new Setting(player);\nsettingControlItem.id = 'settings';\nexport { settingControlItem };\n","import { Player } from '../player';\nimport { Disposable } from '../types';\nimport { addDisposableListener, dispose, isNumber } from '../utils';\n\nexport type ShortcutHandler = (player: Player) => void;\n\nconst editableTagNames = ['input', 'textarea', 'select'];\n\nexport class Shortcut implements Disposable {\n  private map: Record<string, ShortcutHandler>;\n\n  constructor(private player: Player, enable: boolean) {\n    this.map = Object.create(null);\n\n    this.register(27, (p) => {\n      if (!p.fullscreen.exit()) p.webFullscreen.exit();\n    });\n    this.register(32, (p) => p.toggle());\n    this.register(37, (p) => p.rewind());\n    this.register(38, (p) => p.incVolume());\n    this.register(39, (p) => p.forward());\n    this.register(40, (p) => p.decVolume());\n\n    if (enable) this.enable();\n  }\n\n  private onKeyDown = (ev: KeyboardEvent) => {\n    if (ev.altKey || ev.ctrlKey || ev.metaKey || ev.shiftKey) return;\n    const focused = document.activeElement;\n\n    if (focused) {\n      const tag = focused.tagName.toLowerCase();\n      const editable = focused.getAttribute('contenteditable');\n      if (editableTagNames.indexOf(tag) > -1 || editable || editable === '') {\n        return;\n      }\n    }\n\n    const code = ev.keyCode ? ev.keyCode : ev.which;\n\n    if (!isNumber(code)) return;\n\n    let handled = false;\n    if (this.map[code]) {\n      this.map[code](this.player);\n      handled = true;\n      this.player.control.showTransient();\n    }\n\n    if (handled) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n  }\n\n  register(keyCode: number, handler: ShortcutHandler): void {\n    this.map[keyCode] = handler;\n  }\n\n  unregister(keyCode: number): boolean {\n    return delete this.map[keyCode];\n  }\n\n  dispose(): void {\n    if (!this.map) return;\n    dispose(this);\n    this.map = null!;\n  }\n\n  enable(): void {\n    this.disable();\n    addDisposableListener(this, this.player.element, 'keydown', this.onKeyDown);\n  }\n\n  disable(): void {\n    dispose(this);\n  }\n}\n","import {\n  addDisposable, addDisposableListener, Component, hide, show,\n} from 'src/ts/utils';\nimport { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport { EVENT } from 'src/ts/constants';\nimport { I18n, PAUSE, PLAY } from 'src/ts/features/i18n';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { ControlItem } from '..';\n\nclass Play extends Component implements ControlItem {\n  private playIcon!: HTMLElement;\n\n  private pauseIcon!: HTMLElement;\n\n  tooltip!: Tooltip;\n\n  constructor() {\n    super();\n    this.playIcon = this.element.appendChild(Icon.play());\n    this.pauseIcon = this.element.appendChild(Icon.pause());\n  }\n\n  init(player: Player, tooltip: Tooltip) {\n    this.tooltip = tooltip;\n\n    if (player.paused) {\n      this.onPause();\n    } else {\n      this.onPlay();\n    }\n    addDisposable(this, player.on(EVENT.PLAY, this.onPlay));\n    addDisposable(this, player.on(EVENT.PAUSE, this.onPause));\n    addDisposableListener(this, this.element, 'click', player.toggle);\n  }\n\n  private onPlay = () => {\n    show(this.pauseIcon);\n    hide(this.playIcon);\n    this.tooltip.html = I18n.t(PAUSE);\n  }\n\n  private onPause = () => {\n    show(this.playIcon);\n    hide(this.pauseIcon);\n    this.tooltip.html = I18n.t(PLAY);\n  }\n}\n\nconst playControlItem = () => new Play();\nplayControlItem.id = 'play';\nexport { playControlItem };\n","import { EVENT } from 'src/ts/constants';\nimport { I18n, MUTE, UNMUTE } from 'src/ts/features/i18n';\nimport { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport {\n  $, addDisposable, addDisposableListener, clamp, Component, Drag, getEventPath, hide, isString, Rect, show,\n} from 'src/ts/utils';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { ControlItem } from '..';\n\nclass Volume extends Component implements ControlItem {\n  private readonly volumeIcon: HTMLElement;\n\n  private readonly mutedIcon: HTMLElement;\n\n  private readonly bar: HTMLElement;\n\n  private readonly rect: Rect;\n\n  tooltip!: Tooltip;\n\n  constructor(private player: Player) {\n    super(undefined, '.control_volume');\n    this.volumeIcon = this.element.appendChild(Icon.volume());\n    this.mutedIcon = this.element.appendChild(Icon.muted());\n\n    const bars = this.element.appendChild($('.control_volume_bars'));\n    const barWidth = player.opts.volumeBarWidth;\n    bars.style.width = isString(barWidth) ? barWidth : `${barWidth}px`;\n\n    this.bar = bars.appendChild($('.control_volume_bar'));\n\n    this.rect = new Rect(bars, player);\n\n    addDisposable(this, player.on(EVENT.VOLUME_CHANGE, this.onVolumeChange));\n    addDisposable(this, new Drag(bars, this.onDragStart, this.onDragging));\n    addDisposableListener(this, this.element, 'click', (ev:MouseEvent) => {\n      if (getEventPath(ev).includes(bars)) return;\n      player.toggleVolume();\n    });\n  }\n\n  init(_: any, tooltip: Tooltip) {\n    this.tooltip = tooltip;\n    this.onVolumeChange();\n  }\n\n  private onDragStart = (ev: PointerEvent) => {\n    this.onDragging(ev);\n  }\n\n  private onDragging = (ev: PointerEvent) => {\n    const x = ev.pageX - this.rect.x;\n    const v = clamp(x / this.rect.width);\n    this.player.volume = v;\n  }\n\n  private onVolumeChange = () => {\n    if (this.player.muted) {\n      this.mute();\n    } else {\n      this.unmute();\n    }\n    this.bar.style.transform = `scaleX(${this.player.volume})`;\n  };\n\n  mute(): void {\n    show(this.mutedIcon);\n    hide(this.volumeIcon);\n    this.tooltip.html = I18n.t(UNMUTE);\n  }\n\n  unmute(): void {\n    show(this.volumeIcon);\n    hide(this.mutedIcon);\n    this.tooltip.html = I18n.t(MUTE);\n  }\n}\n\nconst volumeControlItem = (player: Player) => new Volume(player);\nvolumeControlItem.id = 'volume';\nexport { volumeControlItem };\n","import { EVENT } from 'src/ts/constants';\nimport { Player } from 'src/ts/player';\nimport {\n  $, addDisposable, Component, formatTime,\n} from 'src/ts/utils';\nimport { ControlItem } from '..';\n\nclass Time extends Component implements ControlItem {\n  private readonly playedElement: HTMLElement;\n\n  private readonly totalElement: HTMLElement;\n\n  constructor(player: Player) {\n    super(undefined, '.control_time');\n    this.playedElement = this.element.appendChild($('span'));\n    this.totalElement = this.element.appendChild($('span'));\n\n    this.played = player.currentTime;\n    this.total = player.duration;\n\n    addDisposable(this, player.on(EVENT.TIME_UPDATE, () => {\n      this.played = player.currentTime;\n    }));\n    addDisposable(this, player.on(EVENT.DURATION_CHANGE, () => {\n      this.total = player.duration;\n    }));\n  }\n\n  private set played(v: number) {\n    this.playedElement.textContent = formatTime(v);\n  }\n\n  private set total(v: number) {\n    this.totalElement.textContent = formatTime(v);\n  }\n}\n\nconst timeControlItem = (player: Player) => new Time(player);\ntimeControlItem.id = 'time';\nexport { timeControlItem };\n","import { $ } from 'src/ts/utils';\nimport { ControlItem } from '..';\n\nconst spacerControlItem = (): ControlItem => ({\n  id: 'spacer',\n  element: $('.spacer'),\n  flex(n = 0) {\n    if (this.element) {\n      this.element.style.flex = String(n);\n    }\n  },\n});\nspacerControlItem.id = 'spacer';\nexport { spacerControlItem };\n","import { EVENT } from 'src/ts/constants';\nimport { I18n, WEB_EXIT_FULL_SCREEN, WEB_FULL_SCREEN } from 'src/ts/features/i18n';\nimport { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport {\n  addDisposable, addDisposableListener, Component, hide, show,\n} from 'src/ts/utils';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { ControlItem } from '..';\n\nclass WebFullscreen extends Component implements ControlItem {\n  private readonly exitIcon: HTMLElement;\n\n  private readonly enterIcon: HTMLElement;\n\n  tooltip!: Tooltip;\n\n  constructor() {\n    super();\n    this.enterIcon = this.element.appendChild(Icon.webEnterFullscreen());\n    this.exitIcon = this.element.appendChild(Icon.webExitFullscreen());\n  }\n\n  init(player: Player, tooltip: Tooltip) {\n    this.tooltip = tooltip;\n    if (player.webFullscreen.isActive) {\n      this.enter();\n    } else {\n      this.exit();\n    }\n    addDisposable(this, player.on(EVENT.WEB_ENTER_FULLSCREEN, this.enter));\n    addDisposable(this, player.on(EVENT.WEB_EXIT_FULLSCREEN, this.exit));\n    addDisposableListener(this, this.element, 'click', player.webFullscreen.toggle);\n  }\n\n  private enter = (): void => {\n    show(this.exitIcon);\n    hide(this.enterIcon);\n    this.tooltip.html = I18n.t(WEB_EXIT_FULL_SCREEN);\n  }\n\n  private exit = (): void => {\n    hide(this.exitIcon);\n    show(this.enterIcon);\n    this.tooltip.html = I18n.t(WEB_FULL_SCREEN);\n  }\n}\n\nconst webFullscreenControlItem = () => new WebFullscreen();\nwebFullscreenControlItem.id = 'web-fullscreen';\nexport { webFullscreenControlItem };\n","import { EVENT } from 'src/ts/constants';\nimport { EXIT_FULL_SCREEN, FULL_SCREEN, I18n } from 'src/ts/features/i18n';\nimport { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport {\n  hide, Component, addDisposableListener, addDisposable, show,\n} from 'src/ts/utils';\nimport { Tooltip } from 'src/ts/components/tooltip';\nimport { ControlItem } from '..';\n\nclass Fullscreen extends Component implements ControlItem {\n  private readonly exitIcon: HTMLElement;\n\n  private readonly enterIcon: HTMLElement;\n\n  tooltip!: Tooltip;\n\n  constructor() {\n    super();\n    this.exitIcon = this.element.appendChild(Icon.exitFullscreen());\n    this.enterIcon = this.element.appendChild(Icon.enterFullscreen());\n  }\n\n  init(player: Player, tooltip: Tooltip) {\n    this.tooltip = tooltip;\n    if (player.fullscreen.isActive) {\n      this.enter();\n    } else {\n      this.exit();\n    }\n\n    addDisposable(this, player.on(EVENT.ENTER_FULLSCREEN, this.enter));\n    addDisposable(this, player.on(EVENT.EXIT_FULLSCREEN, this.exit));\n    addDisposableListener(this, this.element, 'click', player.fullscreen.toggle);\n  }\n\n  private enter = (): void => {\n    show(this.exitIcon);\n    hide(this.enterIcon);\n    this.tooltip.html = I18n.t(EXIT_FULL_SCREEN);\n  }\n\n  private exit = (): void => {\n    hide(this.exitIcon);\n    show(this.enterIcon);\n    this.tooltip.html = I18n.t(FULL_SCREEN);\n  }\n}\n\nconst fullscreenControlItem = () => new Fullscreen();\nfullscreenControlItem.id = 'fullscreen';\nexport { fullscreenControlItem };\n","import { Icon } from 'src/ts/features/icons';\nimport { Player } from 'src/ts/player';\nimport {\n  hide, Component, addDisposableListener, show,\n} from 'src/ts/utils';\nimport { AIRPLAY, I18n } from 'src/ts/features';\nimport { ControlItem } from '..';\n\nclass Airplay extends Component implements ControlItem {\n  tip = I18n.t(AIRPLAY);\n\n  constructor(player: Player) {\n    super();\n\n    if (!this.isSupport()) {\n      hide(this.element);\n      return;\n    }\n\n    this.element.appendChild(Icon.airplay());\n\n    addDisposableListener(this, player.video, 'webkitplaybacktargetavailabilitychanged' as any, (ev) => {\n      if (ev.availability === 'available') {\n        show(this.element);\n      } else {\n        hide(this.element);\n      }\n    });\n    addDisposableListener(this, this.element, 'click', () => {\n      const video = player.video as any;\n      if (video && video.webkitShowPlaybackTargetPicker) {\n        video.webkitShowPlaybackTargetPicker();\n      }\n    });\n  }\n\n  isSupport(): boolean {\n    return !!(window as any).WebKitPlaybackTargetAvailabilityEvent;\n  }\n}\n\nconst airplayControlItem = (player: Player) => new Airplay(player);\nairplayControlItem.id = 'airplay';\nexport { airplayControlItem };\n","import { EVENT } from './constants';\nimport { Player } from './player';\nimport { Disposable, PlayerOptions } from './types';\nimport { addDisposable, isWin10IE } from './utils';\nimport { settingControlItem } from './parts/control/items/setting';\nimport { speedSettingItem } from './setting-items/speed';\nimport { playControlItem } from './parts/control/items/play';\nimport { volumeControlItem } from './parts/control/items/volume';\nimport { timeControlItem } from './parts/control/items/time';\nimport { spacerControlItem } from './parts/control/items/spacer';\nimport { webFullscreenControlItem } from './parts/control/items/web-fullscreen';\nimport { fullscreenControlItem } from './parts/control/items/fullscreen';\nimport { loopContextMenuItem } from './contextmenu-items/loop';\nimport { pipContextMenuItem } from './contextmenu-items/pip';\nimport { versionContextMenuItem } from './contextmenu-items/version';\nimport { airplayControlItem } from './parts/control/items/airplay';\n\nfunction trans(\n  player: Player,\n  from: string,\n  to: string,\n): Disposable {\n  const fn = (ev: Event) => player.emit(to, ev);\n  player.video.addEventListener(from, fn);\n  return { dispose: () => player.video.removeEventListener(from, fn) };\n}\n\nfunction transThrottle(\n  player: Player,\n  from: string,\n  to: string,\n  dom: HTMLElement | Window = player.video,\n): Disposable {\n  let pending = false;\n  const fn = (ev: Event) => {\n    if (pending) return;\n    pending = true;\n    requestAnimationFrame(() => {\n      player.emit(to, ev);\n      pending = false;\n    });\n  };\n  dom.addEventListener(from, fn);\n  return { dispose: () => dom.removeEventListener('from', fn) };\n}\n\nexport function tryOpenEdge(player: Player): void {\n  if (player.opts.openEdgeInIE && isWin10IE) {\n    window.location.href = `microsoft-edge:${document.URL}`;\n    player.emit(EVENT.OPEN_EDGE);\n  }\n}\n\nexport function setCssVariables(el: HTMLElement, opts: PlayerOptions): void {\n  const style = el.style;\n  if (opts.themeColor) style.setProperty('--theme-color', opts.themeColor);\n  if (opts.progressBg) style.setProperty('--progress-bg', opts.progressBg);\n  if (opts.posterBgColor) style.setProperty('--poster-bg-color', opts.posterBgColor);\n  if (opts.volumeProgressBg) style.setProperty('--volume-progress-bg', opts.volumeProgressBg);\n}\n\nexport function setVideoAttrs(video: HTMLVideoElement, opts: PlayerOptions['videoAttrs']): void {\n  if (!opts) return;\n  Object.keys(opts).forEach((k) => {\n    video.setAttribute(k, opts[k]);\n  });\n}\n\nexport function setVideoVolumeFromLocal(video: HTMLVideoElement): void {\n  const volume = parseFloat(localStorage.getItem('nplayer:volume') as string);\n\n  // eslint-disable-next-line no-restricted-globals\n  if (!isNaN(volume)) video.volume = volume;\n}\n\nexport function registerNamedMap(player: Player) {\n  player.registerContextMenuItem(loopContextMenuItem());\n  player.registerContextMenuItem(pipContextMenuItem());\n  player.registerContextMenuItem(versionContextMenuItem());\n  player.registerSettingItem(speedSettingItem());\n  player.registerControlItem(playControlItem);\n  player.registerControlItem(volumeControlItem);\n  player.registerControlItem(timeControlItem);\n  player.registerControlItem(spacerControlItem);\n  player.registerControlItem(settingControlItem);\n  player.registerControlItem(webFullscreenControlItem);\n  player.registerControlItem(fullscreenControlItem);\n  player.registerControlItem(airplayControlItem);\n}\n\nexport function transferEvent(player: Player): void {\n  const dis = (d: Disposable) => addDisposable(player, d);\n\n  dis(trans(player, 'durationchange', EVENT.DURATION_CHANGE));\n  dis(trans(player, 'ratechange', EVENT.RATE_CHANGE));\n  dis(trans(player, 'play', EVENT.PLAY));\n  dis(trans(player, 'pause', EVENT.PAUSE));\n  dis(trans(player, 'ended', EVENT.ENDED));\n  dis(trans(player, 'waiting', EVENT.WAITING));\n  dis(trans(player, 'stalled', EVENT.STALLED));\n  dis(trans(player, 'canplay', EVENT.CANPLAY));\n  dis(trans(player, 'loadedmetadata', EVENT.LOADED_METADATA));\n  dis(trans(player, 'error', EVENT.ERROR));\n  dis(trans(player, 'seeked', EVENT.SEEKED));\n  dis(trans(player, 'enterpictureinpicture', EVENT.ENTER_PIP));\n  dis(trans(player, 'leavepictureinpicture', EVENT.EXIT_PIP));\n\n  dis(transThrottle(player, 'timeupdate', EVENT.TIME_UPDATE));\n  dis(transThrottle(player, 'volumechange', EVENT.VOLUME_CHANGE));\n  dis(transThrottle(player, 'progress', EVENT.PROGRESS));\n\n  dis(transThrottle(player, 'resize', EVENT.UPDATE_SIZE, window));\n  if ((window as any).ResizeObserver) {\n    const ro = new ResizeObserver(() => player.emit(EVENT.UPDATE_SIZE));\n    ro.observe(player.element);\n    dis({ dispose: () => ro.disconnect() });\n  }\n\n  player.on(EVENT.LOADED_METADATA, () => {\n    if (player.video.paused) {\n      player.emit(EVENT.PAUSE);\n    } else {\n      player.emit(EVENT.PLAY);\n    }\n  });\n}\n","import { I18n, LOOP } from '../features';\nimport { ContextMenuItem } from '../parts/contextmenu';\n\nexport const loopContextMenuItem = (): ContextMenuItem => ({\n  id: 'loop',\n  html: I18n.t(LOOP),\n  show(player, item) {\n    item.checked = player.loop;\n  },\n  click(player, item) {\n    item.checked = player.loop = !player.loop;\n  },\n});\n","import { I18n, PIP } from '../features';\nimport { ContextMenuItem } from '../parts/contextmenu';\n\nexport const pipContextMenuItem = (): ContextMenuItem => ({\n  id: 'pip',\n  html: I18n.t(PIP),\n  init() {\n    this.invisible = !('pictureInPictureEnabled' in document);\n  },\n  click(player) {\n    if (player.video.readyState < 3) return;\n    if ((document as any).pictureInPictureElement !== player.video) {\n      (player.video as any).requestPictureInPicture();\n    } else {\n      (document as any).exitPictureInPicture();\n    }\n  },\n});\n","import { ContextMenuItem } from '../parts/contextmenu';\n\nexport const versionContextMenuItem = (): ContextMenuItem => ({\n  id: 'version',\n  html: `NPlayer v${__VERSION__}`,\n  disabled: true,\n});\n","import { I18n, NORMAL, SPEED } from '../features';\nimport { SettingItem } from '../parts/control/items/setting';\n\nexport const speedSettingItem = (): SettingItem => ({\n  id: 'speed',\n  html: I18n.t(SPEED),\n  type: 'select',\n  value: 1,\n  options: [\n    { value: 0.25, html: '0.25' },\n    { value: 0.5, html: '0.5' },\n    { value: 1, html: I18n.t(NORMAL) },\n    { value: 1.5, html: '1.5' },\n    { value: 2, html: '2' },\n  ],\n  init(p) {\n    p.playbackRate = 1;\n  },\n  change(value, player) {\n    this.value = player.playbackRate = value;\n  },\n});\n","import {\n  addDisposableListener, Component, hide, show,\n} from 'src/ts/utils';\n\nexport class Mask extends Component {\n  constructor(container: HTMLElement, click?: (e: MouseEvent) => void, style?: Partial<CSSStyleDeclaration>) {\n    super(container, '.mask');\n    if (style) this.applyStyle(style);\n    if (click) addDisposableListener(this, this.element, 'click', click, true);\n    this.hide();\n  }\n\n  show(): void {\n    show(this.element);\n  }\n\n  hide(): void {\n    hide(this.element);\n  }\n}\n","import { Component } from 'src/ts/utils';\n\nexport class Spacer extends Component {\n  constructor(container: HTMLElement) {\n    super(container, '.spacer');\n  }\n}\n","import {\n  addClass,\n  addDisposableListener, Component, containClass, toggleClass,\n} from 'src/ts/utils';\n\nexport interface CheckboxOptions {\n  html?: string;\n  checked?: boolean;\n  change?: (newValue: boolean) => void;\n}\n\nconst classActive = 'checkbox-active';\n\nexport class Checkbox extends Component {\n  constructor(container: HTMLElement, opts: CheckboxOptions) {\n    super(container, '.checkbox');\n    if (opts.html) this.element.innerHTML = opts.html;\n    if (opts.change) {\n      addDisposableListener(this, this.element, 'click', () => {\n        toggleClass(this.element, classActive);\n        opts.change!(containClass(this.element, classActive));\n      });\n    }\n\n    if (opts.checked) addClass(this.element, classActive);\n  }\n\n  update(v: boolean) {\n    toggleClass(this.element, classActive, v);\n  }\n}\n","import { EVENT } from 'src/ts/constants';\nimport { Player } from 'src/ts/player';\nimport {\n  $, addDisposable, clamp, Component, Drag, Rect,\n} from 'src/ts/utils';\n\nexport interface SliderOption {\n  value?: number;\n  stops?: { value: number, html?: string }[];\n  change?: (value: number) => void;\n  step?: boolean;\n}\n\nexport class Slider extends Component {\n  private readonly trackElement: HTMLElement;\n\n  private readonly dotElement: HTMLElement;\n\n  private readonly step: boolean | undefined;\n\n  readonly rect: Rect;\n\n  constructor(container: HTMLElement, private opts: SliderOption, player?: Player) {\n    super(container, '.slider');\n\n    this.rect = new Rect(this.element);\n\n    this.trackElement = this.element.appendChild($('.slider_track')).appendChild($('.slider_track_inner'));\n    if (opts.stops) {\n      let stop;\n      opts.stops.forEach((s) => {\n        stop = $('.slider_stop', undefined, s.html ? `<span>${s.html}</span>` : '');\n        stop.style.left = `${s.value * 100}%`;\n        this.element.appendChild(stop);\n      });\n    }\n    this.dotElement = this.element.appendChild($('.slider_dot'));\n\n    addDisposable(this, new Drag(this.element, this.onDrag, this.onDrag));\n\n    this.step = opts.stops && opts.step;\n\n    this.update(opts.value || 0, undefined, false);\n\n    if (player) addDisposable(this, player.on(EVENT.UPDATE_SIZE, () => this.rect.update()));\n  }\n\n  private onDrag = (ev: PointerEvent) => {\n    const x = ev.pageX - this.rect.x;\n    this.update(x / this.rect.width, x);\n  }\n\n  update(value: number, x?: number, trigger = true): void {\n    if (this.step) {\n      let closed = Infinity;\n      let v = 0; let c;\n      this.opts.stops!.forEach((s) => {\n        c = Math.abs(value - s.value);\n        if (c < closed) {\n          closed = c;\n          v = s.value;\n        }\n      });\n      value = v;\n      x = null!;\n    }\n\n    x = x != null ? x : value * this.rect.width;\n    this.trackElement.style.transform = `scaleX(${clamp(value)})`;\n    this.dotElement.style.transform = `translateX(${clamp(x, 0, this.rect.width)}px)`;\n\n    if (trigger && this.opts.change) this.opts.change(value);\n  }\n}\n","import { EVENT } from 'src/ts/constants';\nimport { Icon } from 'src/ts/features';\nimport { Player } from 'src/ts/player';\nimport {\n  addDisposable, addDisposableListener, Component, hide, show,\n} from 'src/ts/utils';\n\nexport class Poster extends Component {\n  private playElement: HTMLElement;\n\n  private poster: string;\n\n  private tryToPlayed = false;\n\n  constructor(container: HTMLElement, private player: Player) {\n    super(container, '.poster');\n    this.poster = player.opts.poster;\n    this.playElement = player.opts.posterPlayElement || Icon.play('poster_play');\n    this.element.appendChild(this.playElement);\n    this.hide();\n\n    if (!player.opts.posterEnable) return;\n\n    this.show();\n    if (this.poster) {\n      this.applyStyle({\n        backgroundImage: `url(${this.poster})`,\n      });\n    }\n\n    addDisposableListener(this, this.element, 'click', () => {\n      if (this.tryToPlayed) return;\n      this.tryToPlayed = true;\n      if (player.video.readyState >= 3) {\n        this.hide();\n      } else {\n        hide(this.playElement);\n        player.loading.show();\n      }\n      player.play();\n    });\n\n    addDisposable(this, player.on(EVENT.CANPLAY, this.tryHide));\n    addDisposable(this, player.on(EVENT.LOADED_METADATA, this.tryHide));\n    addDisposable(this, player.on(EVENT.UPDATE_OPTIONS, () => {\n      if (player.opts.poster && player.opts.poster !== this.poster && player.video.readyState < 3) {\n        this.tryToPlayed = false;\n        this.addTimeUpdateHandler();\n        this.show();\n      }\n    }));\n\n    this.addTimeUpdateHandler();\n  }\n\n  private addTimeUpdateHandler() {\n    this.player.off(EVENT.TIME_UPDATE, this.onTimeUpdate);\n    this.player.on(EVENT.TIME_UPDATE, this.onTimeUpdate);\n  }\n\n  private onTimeUpdate = () => {\n    if (this.player.playing) {\n      this.tryToPlayed = true;\n      this.hide();\n      this.player.off(EVENT.TIME_UPDATE, this.onTimeUpdate);\n    }\n  }\n\n  private tryHide = () => {\n    if (!this.tryToPlayed) return;\n    this.hide();\n  }\n\n  get isActive(): boolean {\n    return this.element.style.display !== 'none';\n  }\n\n  show() {\n    show(this.element);\n    show(this.playElement);\n  }\n\n  hide() {\n    hide(this.element);\n  }\n}\n","import { Disposable, PlayerOptions } from './types';\nimport { processOptions } from './options';\nimport {\n  $, addClass, getEl, Rect, EventEmitter, clamp, isString,\n  dispose, removeNode, addDisposable, isBrowser,\n} from './utils';\nimport { Control, ControlItemEntry } from './parts/control';\nimport { Loading } from './parts/loading';\nimport { ContextMenu, ContextMenuItem } from './parts/contextmenu';\nimport { Toast } from './parts/toast';\nimport { Fullscreen } from './features/fullscreen';\nimport { WebFullscreen } from './features/web-fullscreen';\nimport {\n  setCssVariables, setVideoAttrs, transferEvent, tryOpenEdge, setVideoVolumeFromLocal, registerNamedMap,\n} from './helper';\nimport { EVENT } from './constants';\nimport { Shortcut } from './features/shortcut';\nimport { SettingItem } from './parts/control/items/setting';\n\nimport * as _utils from './utils';\nimport * as components from './components';\nimport { CURRENT_VOLUME, I18n, Icon } from './features';\nimport { Poster } from './parts/poster';\n\nexport class Player extends EventEmitter implements Disposable {\n  private el: HTMLElement | null;\n\n  element: HTMLElement;\n\n  opts: Required<PlayerOptions>;\n\n  private prevVolume = 1;\n\n  private readonly settingNamedMap: Record<string, SettingItem> = Object.create(null);\n\n  private readonly contextmenuNamedMap: Record<string, ContextMenuItem> = Object.create(null);\n\n  private readonly controlNamedMap: Record<string, ControlItemEntry> = Object.create(null);\n\n  readonly _settingItems: SettingItem[];\n\n  readonly video: HTMLVideoElement;\n\n  readonly rect: Rect;\n\n  readonly fullscreen: Fullscreen;\n\n  readonly webFullscreen: WebFullscreen;\n\n  readonly shortcut: Shortcut;\n\n  readonly control: Control;\n\n  readonly loading: Loading;\n\n  readonly poster: Poster;\n\n  readonly contextmenu: ContextMenu;\n\n  readonly toast: Toast;\n\n  constructor(opts: PlayerOptions) {\n    super();\n    this.opts = processOptions(opts);\n    tryOpenEdge(this);\n    this.el = getEl(this.opts.el);\n    this.element = $('.nplayer', { tabindex: '0' }, undefined, '');\n    if (this.opts.video) {\n      this.video = this.opts.video;\n      addClass(this.video, 'video');\n    } else {\n      this.video = $('video.video');\n    }\n\n    setCssVariables(this.element, this.opts);\n    setVideoAttrs(this.video, this.opts.videoAttrs);\n    setVideoVolumeFromLocal(this.video);\n    transferEvent(this);\n    if (this.opts.clickPause) this.enableClickPause();\n    this.element.appendChild(this.video);\n\n    registerNamedMap(this);\n\n    this.rect = addDisposable(this, new Rect(this.element, this));\n    this.fullscreen = addDisposable(this, new Fullscreen(this));\n    this.webFullscreen = addDisposable(this, new WebFullscreen(this));\n    this.shortcut = addDisposable(this, new Shortcut(this, this.opts.shortcut));\n    this.toast = addDisposable(this, new Toast(this.element));\n    this.loading = addDisposable(this, new Loading(this.element, this));\n    this.poster = addDisposable(this, new Poster(this.element, this));\n\n    if (this.opts.plugins) {\n      this.opts.plugins.forEach((plugin) => {\n        if (plugin.dispose) {\n          addDisposable(this, plugin as Disposable);\n        }\n        plugin.apply(this);\n      });\n    }\n\n    this.contextmenu = addDisposable(this, new ContextMenu(this.element, this, this.opts.contextMenus.map((item) => {\n      if (isString(item)) return this.contextmenuNamedMap[item];\n      return item;\n    }).filter(Boolean)));\n\n    this._settingItems = this.opts.settings.map((item) => {\n      if (isString(item)) return this.settingNamedMap[item];\n      return item;\n    }).filter(Boolean);\n\n    this.control = addDisposable(this, new Control(this.element, this));\n\n    addDisposable(this, this.on(EVENT.LOADED_METADATA, () => {\n      if (this.currentTime < 0.3) this.currentTime = 0.3;\n    }));\n\n    this.emit(EVENT.AFTER_INIT);\n  }\n\n  get currentTime(): number {\n    return this.video.currentTime;\n  }\n\n  set currentTime(v: number) {\n    if (!this.duration) return;\n    const diff = v - this.video.currentTime;\n    if (!diff) return;\n    this.video.currentTime = clamp(v, 0, this.duration);\n    this.emit(EVENT.TIME_UPDATE);\n  }\n\n  get duration(): number {\n    return this.video.duration || 0;\n  }\n\n  get buffered(): TimeRanges {\n    return this.video.buffered;\n  }\n\n  get volume(): number {\n    return this.video.volume;\n  }\n\n  set volume(v: number) {\n    this.video.volume = clamp(v);\n    if (this.muted && v > 0) this.muted = false;\n    localStorage.setItem('nplayer:volume', String(this.video.volume));\n  }\n\n  get muted(): boolean {\n    return this.video.muted || this.volume === 0;\n  }\n\n  set muted(v: boolean) {\n    this.video.muted = v;\n  }\n\n  get playbackRate(): number {\n    return this.video.playbackRate;\n  }\n\n  set playbackRate(v: number) {\n    this.video.playbackRate = v;\n  }\n\n  get ended(): boolean {\n    return this.video.ended;\n  }\n\n  get paused(): boolean {\n    return this.video.paused;\n  }\n\n  get playing(): boolean {\n    return !this.paused && !this.ended;\n  }\n\n  get loop(): boolean {\n    return this.video.loop;\n  }\n\n  set loop(v: boolean) {\n    this.video.loop = v;\n  }\n\n  enableClickPause() {\n    this.video.addEventListener('click', this.toggle);\n  }\n\n  disableClickPause() {\n    this.video.removeEventListener('click', this.toggle);\n  }\n\n  mount(el?: PlayerOptions['el']): void {\n    if (el) this.el = getEl(el) || this.el;\n    if (!this.el) throw new Error('require `el` option');\n    this.el.appendChild(this.element);\n\n    this.emit(EVENT.MOUNTED);\n  }\n\n  incVolume(v = this.opts.volumeStep): void {\n    this.updateVolume(this.volume + v);\n  }\n\n  decVolume(v = this.opts.volumeStep): void {\n    this.updateVolume(this.volume - v);\n  }\n\n  forward(v = this.opts.seekStep): void {\n    this.currentTime += v;\n    this.toast.show(`+${v}s`, 'left-bottom', 500);\n  }\n\n  rewind(v = this.opts.seekStep): void {\n    this.currentTime -= v;\n    this.toast.show(`-${v}s`, 'left-bottom', 500);\n  }\n\n  play(): Promise<void> {\n    return this.video.play();\n  }\n\n  pause(): void {\n    this.video.pause();\n  }\n\n  seek(seconds: number): void {\n    this.video.currentTime = clamp(seconds, 0, this.duration);\n  }\n\n  updateVolume(v: number): void {\n    this.volume = v;\n    this.toast.show(`${I18n.t(CURRENT_VOLUME)} ${Math.round(this.volume * 100)}`, 'left-bottom', 500);\n  }\n\n  toggle = () => {\n    if (this.paused) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  }\n\n  toggleVolume(): void {\n    if (this.muted) {\n      this.volume = this.prevVolume || 1;\n      this.muted = false;\n    } else {\n      this.prevVolume = this.volume;\n      this.volume = 0;\n    }\n  }\n\n  eachBuffer(fn: (start: number, end: number) => boolean | void): void {\n    for (let l = this.buffered.length, i = l - 1; i >= 0; i--) {\n      if (fn(this.buffered.start(i), this.buffered.end(i))) {\n        break;\n      }\n    }\n  }\n\n  registerSettingItem(item: SettingItem, id?: string): void {\n    this.settingNamedMap[id || item.id!] = item;\n  }\n\n  registerContextMenuItem(item: ContextMenuItem, id?: string): void {\n    this.contextmenuNamedMap[id || item.id!] = item;\n  }\n\n  registerControlItem(item: ControlItemEntry, id?: string): void {\n    this.controlNamedMap[id || item.id!] = item;\n  }\n\n  getSettingItem(id: string): SettingItem | null {\n    return this.settingNamedMap[id];\n  }\n\n  getContextMenuItem(id: string): ContextMenuItem | null {\n    return this.contextmenuNamedMap[id];\n  }\n\n  getControlItem(id: string): ControlItemEntry | null {\n    return this.controlNamedMap[id] as ControlItemEntry;\n  }\n\n  updateOptions(opts: PlayerOptions): void {\n    this.opts = { ...this.opts, ...opts };\n    setCssVariables(this.element, this.opts);\n    setVideoAttrs(this.video, this.opts.videoAttrs);\n    if (this.opts.shortcut) {\n      this.shortcut.enable();\n    } else {\n      this.shortcut.disable();\n    }\n    this.disableClickPause();\n    if (this.opts.clickPause) this.enableClickPause();\n    this.emit(EVENT.UPDATE_OPTIONS, this.opts);\n  }\n\n  dispose(): void {\n    if (!this.element) return;\n    this.emit(EVENT.BEFORE_DISPOSE);\n    dispose(this);\n    const plugins = this.opts.plugins;\n    if (plugins) plugins.forEach((p) => p.dispose && p.dispose());\n    this.removeAllListeners();\n    removeNode(this.element);\n    this.element = null!;\n    this.el = null;\n  }\n\n  static _utils = _utils;\n\n  static addDisposable = _utils.addDisposable;\n\n  static addDisposableListener = _utils.addDisposableListener;\n\n  static dispose = _utils.dispose;\n\n  static getDisposableMap = _utils.getDisposableMap;\n\n  static EVENT = EVENT;\n\n  static I18n = I18n;\n\n  static Icon = Icon;\n\n  static components = components;\n\n  static Player = Player;\n\n  Player!: typeof Player;\n\n  EVENT!: typeof EVENT;\n}\n\nPlayer.prototype.Player = Player;\nPlayer.prototype.EVENT = EVENT;\n\nif (isBrowser) {\n  // eslint-disable-next-line no-console\n  console.log(\n    `%c NPlayer %c v${__VERSION__} %c https://github.com/woopen/nplayer `,\n    'padding: 1px; border-radius: 3px 0 0 3px; color: #fff; background: #606060;',\n    'padding: 1px; color: #fff; background: #1475b2;',\n    'padding: 1px; border-radius: 0 3px 3px 0; color: #fff; background: #42c02e;',\n  );\n}\n","import { PlayerOptions } from './types';\n\nconst defaultOptions = (): Partial<PlayerOptions> => ({\n  shortcut: true,\n  seekStep: 10,\n  volumeStep: 0.1,\n  volumeBarWidth: 100,\n  controls: ['play', 'volume', 'time', 'spacer', 'airplay', 'settings', 'web-fullscreen', 'fullscreen'],\n  settings: ['speed'],\n  contextMenus: ['loop', 'pip', 'version'],\n  contextMenuToggle: true,\n  openEdgeInIE: true,\n  posterEnable: true,\n  clickPause: true,\n  dblclickFullscreen: true,\n  videoAttrs: {\n    crossorigin: 'anonymous',\n    preload: 'auto',\n    playsinline: 'true',\n  },\n});\n\nexport function processOptions(opts: PlayerOptions): Required<PlayerOptions> {\n  const dOpts = defaultOptions();\n  return {\n    ...dOpts,\n    ...opts,\n    videoAttrs: {\n      ...dOpts.videoAttrs,\n      ...opts?.videoAttrs,\n    },\n  } as Required<PlayerOptions>;\n}\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".nplayer{--theme-color:#007aff;--poster-bg-color:transparent;--progress-bg:#007aff;--volume-progress-bg:#007aff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;align-items:center;background:#000;color:#fff;display:flex;font-family:-apple-system,BlinkMacSystemFont,Microsoft YaHei;height:100%;justify-content:center;position:relative;width:100%}.nplayer *{box-sizing:content-box}.nplayer_control{z-index:10}.nplayer_control_bg{z-index:9}.nplayer_poster{z-index:20}.nplayer_loading{z-index:30}.nplayer_contextmenu{z-index:40}.nplayer_toast{z-index:50}.nplayer:focus{outline:none}.nplayer_flex{display:flex}.nplayer_align-center{align-items:center}.nplayer-web-full{bottom:0;left:0;position:fixed;right:0;top:0;z-index:99999}.nplayer-loading .nplayer_loading{display:block}.nplayer_icon{fill:#fff;height:24px;width:24px}.nplayer_video{max-height:100%;outline:none;width:100%}.nplayer_spacer{flex:1}.nplayer_mask{bottom:0;left:0;position:absolute;right:0;top:0}.nplayer_tooltip{cursor:pointer;padding:3px;position:relative;transition:background .2s ease}.nplayer_tooltip:hover{background:var(--theme-color)}.nplayer_tooltip:hover .nplayer_tooltip_content{opacity:1;transform:translate(-50%)}.nplayer_tooltip:hover .nplayer_tooltip-left{transform:translate(0)}.nplayer_tooltip:hover .nplayer_tooltip-right{transform:translate(0)}.nplayer_tooltip_content{background:rgba(0,0,0,.7);bottom:100%;font-size:12px;left:50%;margin-bottom:10px;opacity:0;padding:5px 10px;pointer-events:none;position:absolute;transform:translate(-50%,10px) scale(.8);transform-origin:50% 100%;transition:transform .2s ease .1s,opacity .2s ease .1s;white-space:nowrap}.nplayer_tooltip-left{left:0;transform:translateY(10px) scale(.8);transform-origin:0 100%}.nplayer_tooltip-right{left:auto;right:0;transform:translateY(10px) scale(.8);transform-origin:100% 100%}.nplayer_popover{pointer-events:none}.nplayer_popover-active{pointer-events:auto}.nplayer_popover-active .nplayer_popover_panel{opacity:1;transform:translateY(0)}.nplayer_popover_panel{background:rgba(0,0,0,.7);bottom:100%;box-shadow:0 1px 20px 1px rgba(0,0,0,.2);font-size:13px;margin-bottom:5px;opacity:0;overflow:hidden;padding:3px 0;position:absolute;right:0;transform:translateY(10px);transition:opacity .2s ease,transform .2s ease,height .2s cubic-bezier(.4,0,.2,1),width .2s cubic-bezier(.4,0,.2,1);white-space:nowrap;z-index:2}.nplayer_popover_panel-left{left:0;right:auto}.nplayer_popover_mask{bottom:0;left:0;position:fixed;right:0;top:0;z-index:1}.nplayer_switch{background:hsla(0,0%,100%,.3);border-radius:10px;cursor:pointer;display:inline-block;padding:2px;transition:background-color .3s cubic-bezier(.4,0,.2,1);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:30px}.nplayer_switch:after{background:#fff;border-radius:50%;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);content:\\\"\\\";display:block;height:15px;transition:transform .15s cubic-bezier(.4,0,.2,1);width:15px}.nplayer_switch-active{background:var(--theme-color)}.nplayer_switch-active:after{transform:translateX(16px)}.nplayer_loading{display:none;height:80px;left:50%;pointer-events:none;position:absolute;top:50%;transform:translate(-50%,-50%);width:80px}.nplayer_loading div{-webkit-animation:nplayer-loading 1s linear infinite;animation:nplayer-loading 1s linear infinite;transform-origin:40px 40px}.nplayer_loading div:after{background:#fff;border-radius:20%;content:\\\" \\\";display:block;height:18px;left:37px;position:absolute;top:3px;width:6px}.nplayer_loading div:first-child{-webkit-animation-delay:-1.1s;animation-delay:-1.1s;transform:rotate(0deg)}.nplayer_loading div:nth-child(2){-webkit-animation-delay:-1s;animation-delay:-1s;transform:rotate(30deg)}.nplayer_loading div:nth-child(3){-webkit-animation-delay:-.9s;animation-delay:-.9s;transform:rotate(60deg)}.nplayer_loading div:nth-child(4){-webkit-animation-delay:-.8s;animation-delay:-.8s;transform:rotate(90deg)}.nplayer_loading div:nth-child(5){-webkit-animation-delay:-.7s;animation-delay:-.7s;transform:rotate(120deg)}.nplayer_loading div:nth-child(6){-webkit-animation-delay:-.6s;animation-delay:-.6s;transform:rotate(150deg)}.nplayer_loading div:nth-child(7){-webkit-animation-delay:-.5s;animation-delay:-.5s;transform:rotate(180deg)}.nplayer_loading div:nth-child(8){-webkit-animation-delay:-.4s;animation-delay:-.4s;transform:rotate(210deg)}.nplayer_loading div:nth-child(9){-webkit-animation-delay:-.3s;animation-delay:-.3s;transform:rotate(240deg)}.nplayer_loading div:nth-child(10){-webkit-animation-delay:-.2s;animation-delay:-.2s;transform:rotate(270deg)}.nplayer_loading div:nth-child(11){-webkit-animation-delay:-.1s;animation-delay:-.1s;transform:rotate(300deg)}.nplayer_loading div:nth-child(12){-webkit-animation-delay:0s;animation-delay:0s;transform:rotate(330deg)}.nplayer_toast{background:rgba(0,0,0,.7);font-size:12px;padding:3px 5px;position:absolute}.nplayer_toast-center{left:50%;right:50%;transform:translate(-50%,-50%)}.nplayer_toast-left-top,.nplayer_toast-right-top{top:5px}.nplayer_toast-left-bottom,.nplayer_toast-left-top{left:5px}.nplayer_toast-right-bottom,.nplayer_toast-right-top{right:5px}.nplayer_toast-left-bottom,.nplayer_toast-right-bottom{bottom:60px}.nplayer_slider{cursor:pointer;display:inline-block;flex:1;margin:0 6px;padding:5px 0;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nplayer_slider_track{background:hsla(0,0%,100%,.3);height:2px;overflow:hidden;width:100%}.nplayer_slider_track_inner{background:var(--theme-color);height:100%;transform-origin:0 0}.nplayer_slider_stop{background:hsla(0,0%,100%,.7);font-size:12px;height:6px;position:absolute;top:3px;white-space:nowrap;width:3px}.nplayer_slider_stop span{left:2px;position:absolute;top:6px;transform:translateX(-50%)}.nplayer_slider_dot{background:var(--theme-color);border-radius:50%;height:12px;left:-6px;pointer-events:none;position:absolute;top:0;width:12px}.nplayer_checkbox{align-items:center;color:#fff;cursor:pointer;display:inline-flex;font-size:12px;position:relative;transition:color .2s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nplayer_checkbox:before{border:1px solid;border-radius:2px;content:\\\"\\\";display:block;height:1em;margin-right:5px;transition:background .2s ease;width:1em}.nplayer_checkbox:after{border:1px solid #fff;border-left:0;border-top:0;content:\\\"\\\";height:7px;left:.5em;opacity:0;position:absolute;top:50%;transform:translate(-30%,-70%) rotate(45deg);width:4px}.nplayer_checkbox:hover{color:var(--theme-color)}.nplayer_checkbox-active:before{background:var(--theme-color);border-color:var(--theme-color)}.nplayer_checkbox-active:after{opacity:1}.nplayer_poster{background-color:var(--poster-bg-color);background-position:50% 50%;background-repeat:no-repeat;background-size:cover;bottom:0;left:0;position:absolute;right:0;top:0}.nplayer_poster_play{cursor:pointer;height:50px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:50px}.nplayer_control{bottom:0;left:0;padding:0 5px;position:absolute;right:0;transition:opacity .2s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nplayer_control-hide{opacity:0;pointer-events:none}.nplayer_control:hover{cursor:default!important;opacity:1!important;pointer-events:auto!important}.nplayer_control:hover~.nplayer_control_bg{opacity:1!important}.nplayer_control_bg{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;bottom:0;height:100px;left:0;pointer-events:none;position:absolute;right:0;transition:opacity .2s ease}.nplayer_control_bg-hide{opacity:0}.nplayer_control_bar{align-items:center;display:flex;font-size:0}.nplayer_control_bar>div{margin:5px 3px}.nplayer_control_time{font-size:13px;letter-spacing:1px;margin-left:8px;margin-right:auto;margin-top:-1px;text-shadow:0 0 2px rgba(0,0,0,.3);white-space:nowrap}.nplayer_control_time :first-child:after{content:\\\"/\\\";display:inline-block;font-size:12px;margin:0 5px;transform:translateY(-.5px)}.nplayer_control_volume{position:relative;z-index:1}.nplayer_control_volume_bar,.nplayer_control_volume_bars{bottom:0;position:absolute;top:0}.nplayer_control_volume_bars{background:hsla(0,0%,100%,.3);font-size:0;left:100%;opacity:0;overflow:hidden;pointer-events:none;transition:opacity .2s ease}.nplayer_control_volume:hover .nplayer_control_volume_bars{opacity:1;pointer-events:auto;transform:translateX(0)}.nplayer_control_volume_bar{background:var(--volume-progress-bg);left:0;right:0;transform:scaleX(0);transform-origin:0 0;will-change:transform}.nplayer_control_setting .nplayer_icon{transition:transform .2s ease}.nplayer_control_setting-active{background:var(--theme-color)}.nplayer_control_setting-active .nplayer_icon{transform:rotate(90deg)}.nplayer_control_setting_item,.nplayer_control_setting_option{align-items:center;display:flex;padding:5px 8px}.nplayer_control_setting_item:hover,.nplayer_control_setting_option:hover{background:hsla(0,0%,100%,.2)}.nplayer_control_setting_item{justify-content:space-between}.nplayer_control_setting_item>:first-child{margin-right:20px}.nplayer_control_setting_item-select:after{border:4px solid transparent;border-left-color:#fff;content:\\\"\\\";display:block;height:0;margin-left:10px;width:0}.nplayer_control_setting_option:before{border-bottom:1px solid #fff;border-right:1px solid #fff;content:\\\"\\\";display:inline-block;height:12px;margin-left:6px;margin-right:17px;opacity:0;transform:rotate(45deg);width:5px}.nplayer_control_setting_option-active:before{opacity:1}.nplayer_control_setting_back{border-bottom:1px solid hsla(0,0%,100%,.2);justify-content:flex-start;padding-right:20px}.nplayer_control_setting_back:before{border:4px solid transparent;border-right-color:#fff;content:\\\"\\\";display:block;height:0;margin-right:21px;width:0}.nplayer_contextmenu{background:rgba(0,0,0,.7);font-size:13px;left:0;padding:3px 0;position:absolute;top:0}.nplayer_contextmenu_item{align-items:center;cursor:pointer;display:flex;justify-content:space-between;padding:5px 8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.nplayer_contextmenu_item:hover{background:hsla(0,0%,100%,.2)}.nplayer_contextmenu_item-disabled{color:hsla(0,0%,100%,.5)}.nplayer_contextmenu_item-disabled:hover{background:transparent}.nplayer_contextmenu_item-checked:after{border-bottom:1px solid #fff;border-right:1px solid #fff;content:\\\"\\\";display:inline-block;height:12px;margin:0 2px 5px;transform:rotate(45deg);width:5px}.nplayer_progress{cursor:pointer;position:relative}.nplayer_progress:hover .nplayer_progress_bars{height:16px}.nplayer_progress_bars{background:hsla(0,0%,100%,.3);height:4px;overflow:hidden;position:relative;touch-action:none;transition:height .12s ease}.nplayer_progress_bars:after{bottom:0;content:\\\"\\\";height:16px;left:0;position:absolute;right:0}.nplayer_progress_buf,.nplayer_progress_played{bottom:0;left:0;position:absolute;right:0;top:0;transform:scaleX(0);transform-origin:0 0}.nplayer_progress_played{background:var(--progress-bg);will-change:transform}.nplayer_progress_buf,.nplayer_progress_hover{background:hsla(0,0%,100%,.5)}.nplayer_progress_hover{opacity:0}.nplayer_progress:hover .nplayer_thumb{display:block}.nplayer_thumb{bottom:20px;display:none;font-size:12px;left:0;pointer-events:none;position:absolute;text-align:center;text-shadow:0 0 2px rgba(0,0,0,.3)}.nplayer_thumb_img{background-color:hsla(0,0%,100%,.5);background-repeat:no-repeat;border:1px solid #fff;box-shadow:0 0 10px rgba(0,0,0,.1)}.nplayer_thumb_time{background:rgba(0,0,0,.7);border-radius:3px;display:inline-block;margin-top:5px;padding:2px 5px 1px}@-webkit-keyframes nplayer-loading{0%{opacity:1}to{opacity:0}}@keyframes nplayer-loading{0%{opacity:1}to{opacity:0}}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(673);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}